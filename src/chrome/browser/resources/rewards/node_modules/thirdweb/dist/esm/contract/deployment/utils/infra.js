import { prepareTransaction } from "../../../transaction/prepare-transaction.js";
import { computePublishedContractAddress } from "../../../utils/any-evm/compute-published-contract-address.js";
import { computeDeploymentInfoFromContractId } from "../../../utils/any-evm/compute-published-contract-deploy-info.js";
import { isContractDeployed } from "../../../utils/bytecode/is-contract-deployed.js";
import { getContract } from "../../contract.js";
import { computeCreate2FactoryAddress } from "./create-2-factory.js";
/**
 * @internal
 */
export async function getDeployedInfraContract(options) {
    const address = await computePublishedContractAddress({
        ...options,
    });
    const factory = getContract({
        ...options,
        address,
    });
    if (await isContractDeployed(factory)) {
        return factory;
    }
    return null;
}
/**
 * @internal
 */
export function prepareInfraContractDeployTransaction(options) {
    const { client, chain } = options;
    return prepareTransaction({
        client,
        chain,
        to: () => computeCreate2FactoryAddress({
            client,
            chain,
        }),
        data: async () => {
            const infraContractInfo = await computeDeploymentInfoFromContractId(options);
            return infraContractInfo.initBytecodeWithsalt;
        },
    });
}
//# sourceMappingURL=infra.js.map