"use strict";
"use client";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const wallet_ui_states_provider_js_1 = require("../../providers/wallet-ui-states-provider.js");
const screen_js_1 = require("../../ui/ConnectWallet/Modal/screen.js");
const GuestLogin_js_1 = require("../shared/GuestLogin.js");
const LoadingScreen_js_1 = require("../shared/LoadingScreen.js");
const OTPLoginUI_js_1 = require("../shared/OTPLoginUI.js");
const PassKeyLogin_js_1 = require("../shared/PassKeyLogin.js");
const SocialLogin_js_1 = require("../shared/SocialLogin.js");
const InAppWalletFormUI_js_1 = require("./InAppWalletFormUI.js");
const WalletAuth_js_1 = require("./WalletAuth.js");
const useInAppWalletLocale_js_1 = require("./useInAppWalletLocale.js");
/**
 *
 * @internal
 */
function InAppWalletConnectUI(props) {
    const data = (0, wallet_ui_states_provider_js_1.useSelectionData)();
    const setSelectionData = (0, wallet_ui_states_provider_js_1.useSetSelectionData)();
    const state = data;
    const localeId = props.connectLocale.id;
    const locale = (0, useInAppWalletLocale_js_1.useInAppWalletLocale)(localeId);
    const { initialScreen } = (0, screen_js_1.useScreenContext)();
    if (!locale) {
        return (0, jsx_runtime_1.jsx)(LoadingScreen_js_1.LoadingScreen, {});
    }
    // if the the modal starts out with the wallet's connect ui instead of wallet selector - going back to main screen requires staying on the same component and clearing the selection data
    // otherwise, we go back to the wallet selector by calling props.goBack
    const goBackToMain = () => {
        if (initialScreen === props.wallet) {
            setSelectionData({});
        }
        else {
            props.goBack?.();
            setSelectionData({});
        }
    };
    const done = () => {
        props.done();
        setSelectionData({});
    };
    const otpUserInfo = state?.emailLogin
        ? { email: state.emailLogin }
        : state?.phoneLogin
            ? { phone: state.phoneLogin }
            : undefined;
    if (otpUserInfo) {
        return ((0, jsx_runtime_1.jsx)(OTPLoginUI_js_1.OTPLoginUI, { userInfo: otpUserInfo, locale: locale, done: done, goBack: goBackToMain, wallet: props.wallet, chain: props.chain, client: props.client, size: props.size, isLinking: props.isLinking }));
    }
    if (state?.passkeyLogin) {
        return ((0, jsx_runtime_1.jsx)(PassKeyLogin_js_1.PassKeyLogin, { locale: props.connectLocale, wallet: props.wallet, done: done, onBack: goBackToMain, chain: props.chain, client: props.client, size: props.size, isLinking: props.isLinking }));
    }
    if (state?.walletLogin) {
        return ((0, jsx_runtime_1.jsx)(WalletAuth_js_1.WalletAuth, { meta: props.meta, inAppLocale: locale, walletConnect: props.walletConnect, wallet: props.wallet, client: props.client, size: props.size, done: done, onBack: goBackToMain || (() => setSelectionData({})), locale: props.connectLocale }));
    }
    if (state?.socialLogin) {
        return ((0, jsx_runtime_1.jsx)(SocialLogin_js_1.SocialLogin, { socialAuth: state.socialLogin.type, locale: locale, done: done, goBack: goBackToMain, wallet: props.wallet, state: state, chain: props.chain, client: props.client, size: props.size, connectLocale: props.connectLocale, isLinking: props.isLinking }));
    }
    if (state?.guestLogin) {
        return ((0, jsx_runtime_1.jsx)(GuestLogin_js_1.GuestLogin, { locale: locale, done: done, goBack: goBackToMain, wallet: props.wallet, state: state, client: props.client, size: props.size, connectLocale: props.connectLocale }));
    }
    return ((0, jsx_runtime_1.jsx)(InAppWalletFormUI_js_1.InAppWalletFormUIScreen, { select: () => { }, connectLocale: props.connectLocale, inAppWalletLocale: locale, done: done, goBack: props.goBack, wallet: props.wallet, client: props.client, meta: props.meta, size: props.size, chain: props.chain, isLinking: props.isLinking }));
}
exports.default = InAppWalletConnectUI;
//# sourceMappingURL=InAppWalletConnectUI.js.map