"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getRecipientSplitPercentage = getRecipientSplitPercentage;
const shares_js_1 = require("../__generated__/Split/read/shares.js");
const totalShares_js_1 = require("../__generated__/Split/read/totalShares.js");
/**
 * Get the split percentage of a recipient
 * @param options - The options for the transaction
 * @param options.recipientAddress - The address of the recipient
 * @returns The split percentage of the recipient
 * @extension SPLIT
 * @example
 * ```ts
 * import { getRecipientSplitPercentage } from "thirdweb/extensions/split";
 *
 * const percentage = await getRecipientSplitPercentage({ recipientAddress: "0x..." });
 * ```
 */
async function getRecipientSplitPercentage(options) {
    const { contract, recipientAddress } = options;
    const [_totalShares, walletsShares] = await Promise.all([
        (0, totalShares_js_1.totalShares)({ contract }),
        (0, shares_js_1.shares)({ contract, account: recipientAddress }),
    ]);
    // We convert to basis points to avoid floating point loss of precision
    // 7544n -> 75.44 (75.44 %)
    // also we don't have to worry about number overflow in this particular context
    const splitPercentage = (Number(walletsShares) * 1e7) / Number(_totalShares) / 1e5;
    return {
        address: recipientAddress,
        splitPercentage,
    };
}
//# sourceMappingURL=getRecipientSplitPercentage.js.map