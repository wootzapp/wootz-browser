"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isBuyerApprovedForListing = isBuyerApprovedForListing;
const getListing_js_1 = require("./getListing.js");
/**
 * Checks if the buyer is approved for a listing.
 *
 * @param options - The options for checking buyer approval.
 * @returns A promise that resolves to a boolean indicating whether the buyer is approved for the listing.
 * @extension MARKETPLACE
 * @example
 * ```ts
 * import { isBuyerApprovedForListing } from "thirdweb/extensions/marketplace";
 *
 * const isApproved = await isBuyerApprovedForListing({ contract, listingId: 1n, buyer: "0x..." });
 * ```
 */
async function isBuyerApprovedForListing(options) {
    const listing = await (0, getListing_js_1.getListing)({
        contract: options.contract,
        listingId: options.listingId,
    });
    if (!listing.isReservedListing) {
        // if the listing is not reserved then *any* buyer is "approved"
        return true;
    }
    // otherwise we need to check if the buyer is the one who the listing is reserved for
    const { isBuyerApprovedForListing: generatedIsBuyerApprovedForListing } = await Promise.resolve().then(() => require("../../__generated__/IDirectListings/read/isBuyerApprovedForListing.js"));
    return await generatedIsBuyerApprovedForListing({
        contract: options.contract,
        buyer: options.buyer,
        listingId: options.listingId,
    });
}
//# sourceMappingURL=isBuyerApprovedForListing.js.map