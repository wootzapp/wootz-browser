"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useAutoConnect = useAutoConnect;
const webStorage_js_1 = require("../../../../utils/storage/webStorage.js");
const create_wallet_js_1 = require("../../../../wallets/create-wallet.js");
const mipdStore_js_1 = require("../../../../wallets/injected/mipdStore.js");
const useAutoConnect_js_1 = require("../../../core/hooks/wallets/useAutoConnect.js");
const defaultWallets_js_1 = require("../../wallets/defaultWallets.js");
/**
 * Autoconnect the last previously connected wallet.
 *
 * @example
 * ```tsx
 * import { useAutoConnect } from "thirdweb/react";
 *
 * const { data: autoConnected, isLoading } = useAutoConnect({
 *  client,
 *  accountAbstraction,
 *  wallets,
 *  onConnect,
 *  timeout,
 * });
 * ```
 * @walletConnection
 * @param props - The props for auto connect.
 * @returns whether the auto connect was successful.
 */
function useAutoConnect(props) {
    const wallets = props.wallets || (0, defaultWallets_js_1.getDefaultWallets)(props);
    return (0, useAutoConnect_js_1.useAutoConnectCore)(webStorage_js_1.webLocalStorage, {
        ...props,
        wallets,
    }, () => {
        const specifiedWalletIds = new Set(wallets.map((x) => x.id));
        // pass the wallets that are not already specified but are installed by the user
        const installedWallets = (0, mipdStore_js_1.getInstalledWalletProviders)()
            .filter((x) => !specifiedWalletIds.has(x.info.rdns))
            .map((x) => (0, create_wallet_js_1.createWallet)(x.info.rdns));
        return installedWallets;
    });
}
//# sourceMappingURL=useAutoConnect.js.map