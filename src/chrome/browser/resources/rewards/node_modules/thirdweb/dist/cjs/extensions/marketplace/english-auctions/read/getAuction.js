"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAuction = getAuction;
const eth_getBlockByNumber_js_1 = require("../../../../rpc/actions/eth_getBlockByNumber.js");
const rpc_js_1 = require("../../../../rpc/rpc.js");
const getAuction_js_1 = require("../../__generated__/IEnglishAuctions/read/getAuction.js");
const utils_js_1 = require("../utils.js");
/**
 * Retrieves an auction listing based on the provided options.
 * @param options - The options for retrieving the listing.
 * @returns A promise that resolves to the direct listing.
 * @extension MARKETPLACE
 * @example
 *
 * ```ts
 * import { getListing } from "thirdweb/extensions/marketplace";
 *
 * const listing = await getListing({ contract, listingId: 1n });
 * ```
 */
async function getAuction(options) {
    const rpcClient = (0, rpc_js_1.getRpcClient)(options.contract);
    const [rawAuction, latestBlock] = await Promise.all([
        (0, getAuction_js_1.getAuction)(options),
        (0, eth_getBlockByNumber_js_1.eth_getBlockByNumber)(rpcClient, {
            blockTag: "latest",
        }),
    ]);
    return (0, utils_js_1.mapEnglishAuction)({
        contract: options.contract,
        latestBlock,
        rawAuction,
    });
}
//# sourceMappingURL=getAuction.js.map