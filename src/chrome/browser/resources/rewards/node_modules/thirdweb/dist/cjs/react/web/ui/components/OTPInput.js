"use strict";
"use client";
Object.defineProperty(exports, "__esModule", { value: true });
exports.OTPInput = OTPInput;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@emotion/react");
const input_otp_1 = require("input-otp");
const CustomThemeProvider_js_1 = require("../../../core/design-system/CustomThemeProvider.js");
const index_js_1 = require("../../../core/design-system/index.js");
const elements_js_1 = require("../design-system/elements.js");
const basic_js_1 = require("./basic.js");
/**
 * @internal
 */
function OTPInput(props) {
    return ((0, jsx_runtime_1.jsx)(OTPInputContainer, { children: (0, jsx_runtime_1.jsx)(input_otp_1.OTPInput, { onComplete: () => {
                props.onEnter();
            }, maxLength: 6, value: props.value, render: ({ slots }) => ((0, jsx_runtime_1.jsx)(basic_js_1.Container, { flex: "row", gap: "xs", center: "both", children: slots.map((slot, idx) => (
                // biome-ignore lint/suspicious/noArrayIndexKey: index is the only valid key here
                (0, jsx_runtime_1.jsx)(Slot, { ...slot, isInvalid: props.isInvalid }, idx))) })), onChange: (newValue) => {
                props.setValue(newValue);
            } }) }));
}
const OTPInputContainer = /* @__PURE__ */ (0, elements_js_1.StyledDiv)({
    "& input": {
        maxWidth: "100%",
    },
});
function Slot(props) {
    return ((0, jsx_runtime_1.jsxs)(OTPInputBox, { "data-active": props.isActive, "data-error": props.isInvalid, children: [props.char !== null && (0, jsx_runtime_1.jsx)("div", { children: props.char }), props.hasFakeCaret && (0, jsx_runtime_1.jsx)(FakeCaret, {})] }));
}
const caretBlink = (0, react_1.keyframes) `
  0%, 100% {
    opacity: 0;
  },
  50% {
    opacity: 1;
  }
  `;
const FakeCaret = (0, elements_js_1.StyledDiv)((_) => {
    const theme = (0, CustomThemeProvider_js_1.useCustomTheme)();
    return {
        position: "absolute",
        pointerEvents: "none",
        inset: 0,
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        animation: `${caretBlink} 1s infinite`,
        "&::before": {
            content: "''",
            display: "block",
            width: "1.5px",
            height: "1em",
            backgroundColor: theme.colors.primaryText,
        },
    };
});
const OTPInputBox = /* @__PURE__ */ (0, elements_js_1.StyledDiv)((_) => {
    const theme = (0, CustomThemeProvider_js_1.useCustomTheme)();
    return {
        position: "relative",
        width: "40px",
        height: "40px",
        textAlign: "center",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        fontSize: index_js_1.fontSize.md,
        padding: index_js_1.spacing.xs,
        boxSizing: "border-box",
        transition: "color 200ms ease",
        border: `2px solid ${theme.colors.borderColor}`,
        "&[data-active='true']": {
            borderColor: theme.colors.accentText,
        },
        color: theme.colors.primaryText,
        borderRadius: index_js_1.radius.lg,
        "&[data-error='true']": {
            borderColor: theme.colors.danger,
        },
    };
});
//# sourceMappingURL=OTPInput.js.map