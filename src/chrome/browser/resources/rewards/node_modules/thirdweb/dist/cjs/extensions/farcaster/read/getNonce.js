"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getNonce = getNonce;
const withCache_js_1 = require("../../../utils/promise/withCache.js");
const nonces_js_1 = require("../__generated__/IKeyGateway/read/nonces.js");
const getKeyGateway_js_1 = require("../contracts/getKeyGateway.js");
/**
 * Retrieves the current key gateway nonce for an account.
 * @param options - Parameters to pass to the function.
 * @returns A promise that resolves to the current nonce.
 * @extension FARCASTER
 * @example
 * ```ts
 * import { getNonce } from "thirdweb/extensions/farcaster";
 *
 * const nonce = await getNonce({
 *  client,
 * 	address,
 * });
 * ```
 */
async function getNonce(options) {
    const fetch = () => {
        const contract = (0, getKeyGateway_js_1.getKeyGateway)({
            client: options.client,
            chain: options.chain,
        });
        return (0, nonces_js_1.nonces)({ contract, account: options.address });
    };
    return (0, withCache_js_1.withCache)(fetch, {
        cacheKey: `${options.address}:getNonce`,
        cacheTime: options.disableCache ? 0 : 5 * 60 * 1000, // 5 minutes
    });
}
//# sourceMappingURL=getNonce.js.map