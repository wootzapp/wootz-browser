"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.signTransaction = signTransaction;
const keccak256_js_1 = require("../../utils/hashing/keccak256.js");
const sign_js_1 = require("../../utils/signatures/sign.js");
const serialize_transaction_js_1 = require("../serialize-transaction.js");
/**
 * Signs a transaction to be sent to a node.
 * @param options The options for signing.
 * @param options.transaction - The transaction object to sign
 * @param options.privateKey - The account private key
 * @returns The signed transaction as a hex string
 * @example
 * ```ts
 * import { signTransaction } from "thirdweb";
 * signTransaction({
 *   transaction: {
 *     ...
 *   },
 *   privateKey: "0x...",
 * });
 * ```
 * @transaction
 */
function signTransaction({ transaction, privateKey, }) {
    if (transaction.type === "eip4844") {
        transaction = { ...transaction, sidecars: false };
    }
    const serializedTransaction = (0, serialize_transaction_js_1.serializeTransaction)({ transaction });
    const signature = (0, sign_js_1.sign)({
        hash: (0, keccak256_js_1.keccak256)(serializedTransaction),
        privateKey: privateKey,
    });
    return (0, serialize_transaction_js_1.serializeTransaction)({
        transaction: { ...transaction, ...signature },
    });
}
//# sourceMappingURL=sign-transaction.js.map