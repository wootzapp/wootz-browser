"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RNImage = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_native_1 = require("react-native");
const react_native_svg_1 = require("react-native-svg");
const index_js_1 = require("../../design-system/index.js");
function getImage(data) {
    if (data.startsWith("data:image/svg+xml;base64,")) {
        const image = globalThis.atob(data.replace("data:image/svg+xml;base64,", ""));
        return { image, type: "xml" };
    }
    if (data.startsWith("data:image/")) {
        return { image: data, type: "image" };
    }
    if (data.startsWith("<svg")) {
        return { image: data, type: "xml" };
    }
    return { image: data, type: "url" };
}
const RNImage = (props) => {
    const { data, size, color, placeholder } = props;
    const imageResult = (0, react_1.useMemo)(() => {
        if (!data) {
            return undefined;
        }
        return getImage(data);
    }, [data]);
    if (!imageResult) {
        return null;
    }
    const { image, type } = imageResult;
    switch (type) {
        case "url":
        case "image":
            return ((0, jsx_runtime_1.jsx)(jsx_runtime_1.Fragment, { children: (0, jsx_runtime_1.jsx)(react_native_1.Image, { source: { uri: image }, loadingIndicatorSource: { uri: placeholder }, width: size, height: size, style: [{ borderRadius: index_js_1.radius.md }] }) }));
        case "xml":
            return (0, jsx_runtime_1.jsx)(react_native_svg_1.SvgXml, { xml: image, width: size, height: size, color: color });
        default:
            return null;
    }
};
exports.RNImage = RNImage;
//# sourceMappingURL=RNImage.js.map