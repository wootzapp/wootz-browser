{"version":3,"file":"controls-spec.js","sourceRoot":"","sources":["../../../src/test/features/controls-spec.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Camera, Vector3} from 'three';\n\nimport {$controls, $promptAnimatedContainer, $promptElement, CameraChangeDetails, cameraOrbitIntrinsics, ControlsInterface, DEFAULT_FOV_DEG, DEFAULT_MIN_FOV_DEG, INTERACTION_PROMPT, SphericalPosition} from '../../features/controls.js';\nimport ModelViewerElementBase, {$scene, $statusElement, $userInputElement, Vector3D} from '../../model-viewer-base.js';\nimport {ModelViewerElement} from '../../model-viewer.js';\nimport {StyleEvaluator} from '../../styles/evaluators.js';\nimport {ChangeSource, SmoothControls} from '../../three-components/SmoothControls.js';\nimport {step, timePasses, waitForEvent} from '../../utilities.js';\nimport {assetPath, dispatchSyntheticEvent, rafPasses, until} from '../helpers.js';\nimport {settleControls} from '../three-components/SmoothControls-spec.js';\n\nconst expect = chai.expect;\nconst ASTRONAUT_GLB_PATH = assetPath('models/Astronaut.glb');\n\nconst interactWith = (element: HTMLElement) => {\n  element.dispatchEvent(\n      new PointerEvent('pointerdown', {pointerId: 8, clientX: 0, clientY: 10}));\n  element.dispatchEvent(\n      new PointerEvent('pointermove', {pointerId: 8, clientX: 0, clientY: 0}));\n};\n\nconst expectSphericalsToBeEqual =\n    (sphericalOne: SphericalPosition, sphericalTwo: SphericalPosition) => {\n      const precision = 5;\n\n      expect(sphericalOne.theta.toFixed(precision))\n          .to.be.equal(\n              sphericalTwo.theta.toFixed(precision),\n              'Spherical theta does not match');\n\n      expect(sphericalOne.phi.toFixed(precision))\n          .to.be.equal(\n              sphericalTwo.phi.toFixed(precision),\n              'Spherical phi does not match');\n\n      expect(sphericalOne.radius.toFixed(precision))\n          .to.be.equal(\n              sphericalTwo.radius.toFixed(precision),\n              'Spherical radius does not match');\n    };\n\n// NOTE(cdata): Precision is a bit off when comparing e.g., expected camera\n// direction in practice:\nconst FLOAT_EQUALITY_THRESHOLD = 1e-6;\n\n/**\n * Returns true if the camera is looking at a given position, within +/-\n * FLOAT_EQUALITY_THRESHOLD on each axis.\n */\nconst cameraIsLookingAt = (camera: Camera, position: Vector3D) => {\n  const cameraDirection = camera.getWorldDirection(new Vector3());\n  const expectedDirection = new Vector3(position.x, position.y, position.z)\n                                .sub(camera.position)\n                                .normalize();\n\n  const deltaX = Math.abs(cameraDirection.x - expectedDirection.x);\n  const deltaY = Math.abs(cameraDirection.y - expectedDirection.y);\n  const deltaZ = Math.abs(cameraDirection.z - expectedDirection.z);\n\n  return step(FLOAT_EQUALITY_THRESHOLD, deltaX) === 0 &&\n      step(FLOAT_EQUALITY_THRESHOLD, deltaY) === 0 &&\n      step(FLOAT_EQUALITY_THRESHOLD, deltaZ) === 0;\n};\n\n\nsuite('Controls', () => {\n  suite('camera-orbit', () => {\n    let element: ModelViewerElement;\n    let controls: SmoothControls;\n    let defaultRadius: number;\n\n    setup(async () => {\n      element = new ModelViewerElement();\n      controls = (element as any)[$controls];\n      document.body.insertBefore(element, document.body.firstChild);\n      element.src = assetPath('models/cube.gltf');\n\n      await waitForEvent(element, 'poster-dismissed');\n\n      settleControls(controls);\n\n      const orbitIntrinsics = cameraOrbitIntrinsics(element);\n      const evaluator = new StyleEvaluator([], orbitIntrinsics);\n\n      defaultRadius = evaluator.evaluate()[2];\n    });\n\n    teardown(() => {\n      if (element.parentNode != null) {\n        element.parentNode.removeChild(element);\n      }\n    });\n\n    test('defaults radius to ideal camera distance', () => {\n      expect(element.getCameraOrbit().radius).to.be.equal(defaultRadius);\n    });\n\n    test('can independently adjust azimuth', async () => {\n      const orbit = element.getCameraOrbit();\n      const nextTheta = orbit.theta + 1.0;\n\n      element.cameraOrbit = `${nextTheta}rad ${orbit.phi}rad ${orbit.radius}m`;\n\n      await timePasses();\n\n      settleControls(controls);\n\n      expectSphericalsToBeEqual(\n          element.getCameraOrbit(), {...orbit, theta: nextTheta});\n    });\n\n    test('can independently adjust inclination', async () => {\n      const orbit = element.getCameraOrbit();\n      const nextPhi = orbit.phi + 1.0;\n\n      element.cameraOrbit = `${orbit.theta}rad ${nextPhi}rad ${orbit.radius}m`;\n\n      await timePasses();\n\n      settleControls(controls);\n\n      expectSphericalsToBeEqual(\n          element.getCameraOrbit(), {...orbit, phi: nextPhi});\n    });\n\n    test('can independently adjust radius', async () => {\n      const orbit = element.getCameraOrbit();\n      const nextRadius = orbit.radius - 1.0;\n\n      element.cameraOrbit = `${orbit.theta}rad ${orbit.phi}rad ${nextRadius}m`;\n\n      await timePasses();\n\n      settleControls(controls);\n\n      expectSphericalsToBeEqual(\n          element.getCameraOrbit(), {...orbit, radius: nextRadius});\n\n      element.cameraOrbit = `${orbit.theta}rad ${orbit.phi}rad auto`;\n\n      await timePasses();\n      settleControls(controls);\n\n      expect(element.getCameraOrbit().radius).to.be.equal(defaultRadius);\n    });\n\n    test('can independently adjust target', async () => {\n      const target = element.getCameraTarget();\n      target.x += 1;\n      target.z += 1;\n\n      element.cameraTarget = `${target.x}m auto ${target.z}m`;\n\n      await timePasses();\n\n      settleControls(controls);\n\n      expect(element.getCameraTarget().toString())\n          .to.be.equal(target.toString());\n    });\n\n    test('causes the camera to look at the target', () => {\n      expect(\n          cameraIsLookingAt(element[$scene].camera, element.getCameraTarget()))\n          .to.be.equal(true);\n    });\n\n    suite('when target is modified', () => {\n      test('camera looks at the configured target', () => {\n        element.cameraTarget = '3m 2m 1m';\n        element.jumpCameraToGoal();\n\n        expect(cameraIsLookingAt(\n                   element[$scene].camera, element.getCameraTarget()))\n            .to.be.equal(true);\n      });\n\n      test('causes camera-change event to fire', async () => {\n        const cameraChangeDispatches = waitForEvent(element, 'camera-change');\n        element.cameraTarget = '3m 2m 1m';\n\n        await cameraChangeDispatches;\n      });\n    });\n\n    test('defaults FOV correctly', async () => {\n      expect(element.getFieldOfView()).to.be.closeTo(DEFAULT_FOV_DEG, 0.00001);\n    });\n\n    test('defaults FOV limits correctly', async () => {\n      expect(element.getMinimumFieldOfView())\n          .to.be.closeTo(DEFAULT_MIN_FOV_DEG, 0.00001);\n      expect(element.getMaximumFieldOfView())\n          .to.be.closeTo(DEFAULT_FOV_DEG, 0.00001);\n    });\n\n    test('can independently adjust FOV', async () => {\n      const fov = element.getFieldOfView();\n      const nextFov = fov - 1.0;\n\n      element.fieldOfView = `${nextFov}deg`;\n\n      await timePasses();\n\n      settleControls(controls);\n\n      expect(element.getFieldOfView()).to.be.closeTo(nextFov, 0.00001);\n    });\n\n    test('changes FOV basis when aspect ratio changes', async () => {\n      const fov = element.getFieldOfView();\n      expect(fov).to.be.closeTo(DEFAULT_FOV_DEG, .001);\n      element.setAttribute('style', 'width: 200px; height: 300px');\n      await rafPasses();\n      await rafPasses();\n\n      expect(element.getFieldOfView()).to.be.greaterThan(fov);\n    });\n\n    test('causes camera-change event to fire', async () => {\n      const cameraChangeDispatches = waitForEvent(element, 'camera-change');\n      const cameraOrbit = element.getCameraOrbit();\n      element.cameraOrbit = `${cameraOrbit.theta + 1}rad ${\n          cameraOrbit.phi}rad ${cameraOrbit.radius}m`;\n\n      await cameraChangeDispatches;\n    });\n\n    test('sets an appropriate event source', async () => {\n      const cameraChangeDispatches =\n          waitForEvent<CustomEvent<CameraChangeDetails>>(\n              element, 'camera-change');\n\n      const cameraOrbit = element.getCameraOrbit();\n      element.cameraOrbit = `${cameraOrbit.theta + 1}rad ${\n          cameraOrbit.phi}rad ${cameraOrbit.radius}m`;\n\n      const event = await cameraChangeDispatches;\n      expect(event.detail.source).to.be.equal(ChangeSource.NONE);\n    });\n\n\n    suite('getCameraOrbit', () => {\n      setup(async () => {\n        element.cameraOrbit = `1rad 1rad 2.5m`;\n        await timePasses();\n        settleControls(controls);\n      });\n\n      test('starts at the initially configured orbit', () => {\n        const orbit = element.getCameraOrbit();\n\n        expect(`${orbit.theta}rad ${orbit.phi}rad ${orbit.radius}m`)\n            .to.be.equal(element.cameraOrbit);\n      });\n\n      test('updates with current orbit after interaction', async () => {\n        controls.adjustOrbit(0, 0.5, 0);\n        settleControls(controls);\n\n        const orbit = element.getCameraOrbit();\n        expect(`${orbit.theta}rad ${orbit.phi}rad ${orbit.radius}m`)\n            .to.equal(`1rad 0.5rad 2.5m`);\n      });\n\n      test('jumpCameraToGoal updates instantly', async () => {\n        const cameraOrbit = `0.5rad 1.5rad 2.2m`;\n        element.cameraOrbit = cameraOrbit;\n        const fieldOfView = 30;\n        element.fieldOfView = `${fieldOfView}deg`;\n        element.jumpCameraToGoal();\n\n        await rafPasses();\n\n        expect(element.getFieldOfView()).to.be.closeTo(fieldOfView, 0.00001);\n        let orbit = element.getCameraOrbit();\n        // round to nearest 0.0001\n        orbit.theta = Math.round(orbit.theta * 10000) / 10000;\n        expect(`${orbit.theta}rad ${orbit.phi}rad ${orbit.radius}m`)\n            .to.equal(cameraOrbit);\n      });\n    });\n\n    suite('min/max extents', () => {\n      setup(async () => {\n        element.cameraOrbit = `0deg 90deg 2.5m`;\n        await timePasses();\n        settleControls(controls);\n      });\n\n      test('defaults maxFieldOfView correctly', async () => {\n        element.fieldOfView = '180deg';\n        await timePasses();\n        settleControls(controls);\n        expect(element.getFieldOfView()).to.be.closeTo(DEFAULT_FOV_DEG, 0.001);\n      });\n\n      test('jumps to maxCameraOrbit when outside', async () => {\n        element.maxCameraOrbit = `-2rad 1rad 2m`;\n        await timePasses();\n        const orbit = element.getCameraOrbit();\n        expect(`${orbit.theta}rad ${orbit.phi}rad ${orbit.radius}m`)\n            .to.equal(element.maxCameraOrbit);\n      });\n\n      test('jumps to minCameraOrbit when outside', async () => {\n        element.minCameraOrbit = `2rad 2rad 3m`;\n        await timePasses();\n        const orbit = element.getCameraOrbit();\n        expect(`${orbit.theta}rad ${orbit.phi}rad ${orbit.radius}m`)\n            .to.equal(element.minCameraOrbit);\n      });\n\n      test('jumps to maxFieldOfView when outside', async () => {\n        element.maxFieldOfView = `30deg`;\n        await timePasses();\n        const fov = Math.round(element.getFieldOfView());\n        expect(`${fov}deg`).to.equal(element.maxFieldOfView);\n      });\n\n      test('jumps to minFieldOfView when outside', async () => {\n        element.minFieldOfView = `60deg`;\n        await timePasses();\n        const fov = Math.round(element.getFieldOfView());\n        expect(`${fov}deg`).to.equal(element.minFieldOfView);\n      });\n\n      suite('when configured before model loads', () => {\n        let initiallyUnloadedElement: ModelViewerElementBase&ControlsInterface;\n        let controls: SmoothControls;\n\n        setup(() => {\n          initiallyUnloadedElement = new ModelViewerElement();\n          controls =\n              (initiallyUnloadedElement as any)[$controls] as SmoothControls;\n        });\n\n        teardown(() => {\n          if (initiallyUnloadedElement.parentNode != null) {\n            initiallyUnloadedElement.parentNode.removeChild(\n                initiallyUnloadedElement);\n          }\n        });\n\n        test('respects user-configured min/maxFieldOfView', async () => {\n          document.body.insertBefore(\n              initiallyUnloadedElement, document.body.firstChild);\n\n          initiallyUnloadedElement.minFieldOfView = '90deg';\n          initiallyUnloadedElement.maxFieldOfView = '100deg';\n          initiallyUnloadedElement.src = ASTRONAUT_GLB_PATH;\n\n          await waitForEvent(initiallyUnloadedElement, 'load');\n\n          initiallyUnloadedElement.fieldOfView = '100deg';\n\n          await timePasses();\n          settleControls(controls);\n\n          expect(initiallyUnloadedElement.getFieldOfView())\n              .to.be.closeTo(100, 0.001);\n\n          expect(initiallyUnloadedElement.getMinimumFieldOfView())\n              .to.be.closeTo(90, 0.001);\n\n          expect(initiallyUnloadedElement.getMaximumFieldOfView())\n              .to.be.closeTo(100, 0.001);\n        });\n      });\n    });\n  });\n\n  suite('camera-controls', () => {\n    let element: ModelViewerElementBase&ControlsInterface;\n    let controls: SmoothControls;\n\n    setup(async () => {\n      element = new ModelViewerElement();\n      controls = (element as any)[$controls]\n      document.body.insertBefore(element, document.body.firstChild);\n      element.src = assetPath('models/cube.gltf');\n      element.cameraControls = true;\n\n      element.interactionPromptThreshold =\n          100;  // Fairly low, to keep the test time down\n\n      await waitForEvent(element, 'poster-dismissed');\n    });\n\n    teardown(() => {\n      element.cameraControls = false;\n      if (element.parentNode != null) {\n        element.parentNode.removeChild(element);\n      }\n    });\n\n    test('creates SmoothControls if enabled', () => {\n      expect(controls).to.be.ok;\n    });\n\n    test('sets max radius to at least the camera framed distance', () => {\n      const cameraDistance = element[$scene].camera.position.distanceTo(\n          element[$scene].target.position);\n      expect(controls.options.maximumRadius).to.be.at.least(cameraDistance);\n    });\n\n    test(\n        'with a large radius, sets far plane to contain the model',\n        async () => {\n          const maxRadius = 10;\n          element.maxCameraOrbit = `auto auto ${maxRadius}m`;\n          await timePasses();\n\n          const cameraDistance = element[$scene].camera.position.distanceTo(\n              element[$scene].target.position);\n          expect(controls.camera.far)\n              .to.be.at.least(cameraDistance + maxRadius);\n        });\n\n    test('with zero radius, sets far plane to contain the model', async () => {\n      const maxRadius = 0;\n      element.minCameraOrbit = `auto auto ${maxRadius}m`;\n      element.maxCameraOrbit = `auto auto ${maxRadius}m`;\n      element.jumpCameraToGoal();\n      await timePasses();\n\n      const cameraDistance = element[$scene].camera.position.distanceTo(\n          element[$scene].target.position);\n      expect(controls.camera.far).to.be.at.least(cameraDistance + maxRadius);\n    });\n\n    test('disables interaction if disabled after enabled', async () => {\n      element.cameraControls = false;\n      await timePasses();\n      expect(controls.interactionEnabled).to.be.false;\n    });\n\n    suite('when user is interacting', () => {\n      test('sets an appropriate camera-change event source', async () => {\n        await rafPasses();\n        element[$userInputElement].focus();\n        interactWith(element[$userInputElement]);\n\n        const cameraChangeDispatches =\n            waitForEvent<CustomEvent<CameraChangeDetails>>(\n                element, 'camera-change');\n        const event = await cameraChangeDispatches;\n\n        expect(event.detail.source).to.be.equal(ChangeSource.USER_INTERACTION);\n      });\n    });\n\n    suite('interaction-prompt', () => {\n      test('can be configured to never appear', async () => {\n        element.interactionPrompt = 'none';\n        await timePasses(element.interactionPromptThreshold + 100);\n\n        const promptElement: HTMLElement = (element as any)[$promptElement];\n        expect(promptElement.classList.contains('visible')).to.be.equal(false);\n      });\n\n      test('can be configured to raise automatically', async () => {\n        element.interactionPrompt = 'auto';\n        await timePasses(element.interactionPromptThreshold + 100);\n\n        const promptElement: HTMLElement = (element as any)[$promptElement];\n        expect(promptElement.classList.contains('visible')).to.be.equal(true);\n      });\n\n      test('does not appear when camera-controls is disabled', async () => {\n        element.interactionPrompt = 'auto';\n        element.cameraControls = false;\n        await timePasses(element.interactionPromptThreshold + 100);\n\n        const promptElement: HTMLElement = (element as any)[$promptElement];\n        expect(promptElement.classList.contains('visible')).to.be.equal(false);\n      });\n\n      suite('after it has been dismissed', () => {\n        let promptElement: HTMLElement;\n\n        setup(async () => {\n          promptElement = (element as any)[$promptElement];\n          element.interactionPrompt = 'auto';\n\n          await until(() => promptElement.classList.contains('visible'));\n\n          interactWith(element[$userInputElement]);\n\n          await until(\n              () => promptElement.classList.contains('visible') === false);\n\n          settleControls(controls);\n        });\n\n        test('can be reset and displayed again', async () => {\n          element.resetInteractionPrompt();\n\n          await timePasses(element.interactionPromptThreshold + 100);\n\n          expect(promptElement.classList.contains('visible')).to.be.true;\n        });\n      });\n\n      suite('when configured to be basic', () => {\n        setup(async () => {\n          element.interactionPromptStyle = 'basic';\n          await timePasses();\n        });\n\n        test('does not have a css animation', () => {\n          const computedStyle =\n              getComputedStyle((element as any)[$promptElement]);\n          expect(computedStyle.animationName).to.be.equal('none');\n        });\n\n        test('becomes visible', async () => {\n          await until(\n              () => (element as any)[$promptElement].classList.contains(\n                  'visible'));\n          expect((element as any)[$promptAnimatedContainer].style.opacity)\n              .to.be.equal('1');\n        });\n      });\n    });\n\n    suite('synthetic interaction', () => {\n      const finger = {\n        x: {\n          initialValue: 0.6,\n          keyframes: [\n            {frames: 1, value: 0.7},\n            {frames: 1, value: 0.6},\n          ]\n        },\n        y: {\n          initialValue: 0.45,\n          keyframes: [\n            {frames: 1, value: 0.4},\n            {frames: 1, value: 0.45},\n          ]\n        }\n      };\n\n      const tap = (position: number) => {\n        return {\n          x: {\n            initialValue: position,\n            keyframes: [\n              {frames: 1, value: position},\n            ]\n          },\n          y: {\n            initialValue: position,\n            keyframes: [\n              {frames: 1, value: position},\n            ]\n          }\n        };\n      };\n\n      test('one finger rotates', async () => {\n        const orbit = element.getCameraOrbit();\n\n        element.interact(50, finger);\n        await rafPasses();\n        await rafPasses();\n        await rafPasses();\n\n        const newOrbit = element.getCameraOrbit();\n        expect(newOrbit.theta).to.be.lessThan(orbit.theta, 'theta');\n        expect(newOrbit.phi).to.be.greaterThan(orbit.phi, 'phi');\n        expect(newOrbit.radius).to.eq(orbit.radius, 'radius');\n      });\n\n      test(\n          'return one finger to starting point returns camera to starting point',\n          async () => {\n            const orbit = element.getCameraOrbit();\n            element.interactionPrompt = 'none';\n            element.interpolationDecay = 0;\n\n            element.interact(50, finger);\n            await timePasses(50);\n            await rafPasses();\n            await rafPasses();\n\n            const newOrbit = element.getCameraOrbit();\n            expect(newOrbit.theta).to.be.closeTo(orbit.theta, 0.001, 'theta');\n            expect(newOrbit.phi).to.be.closeTo(orbit.phi, 0.001, 'phi');\n            expect(newOrbit.radius).to.eq(orbit.radius, 'radius');\n          });\n\n      test('two fingers pan', async () => {\n        element.cameraOrbit = '0deg 90deg auto';\n        element.jumpCameraToGoal();\n        await element.updateComplete;\n        const target = element.getCameraTarget();\n\n        element.interact(50, finger, finger);\n        await rafPasses();\n        await rafPasses();\n\n        const newTarget = element.getCameraTarget();\n        expect(newTarget.x).to.be.lessThan(target.x, 'X');\n        expect(newTarget.y).to.be.lessThan(target.y, 'Y');\n        expect(newTarget.z).to.be.closeTo(target.z, 0.001, 'Z');\n      });\n\n      test('two fingers do not pan if disable-pan is set', async () => {\n        element.disablePan = true;\n        await element.updateComplete;\n        element.cameraOrbit = '0deg 90deg auto';\n        element.jumpCameraToGoal();\n        await element.updateComplete;\n        const target = element.getCameraTarget();\n\n        element.interact(50, finger, finger);\n        await rafPasses();\n        await rafPasses();\n\n        const newTarget = element.getCameraTarget();\n        expect(newTarget.x).to.be.eq(target.x, 'X');\n        expect(newTarget.y).to.be.eq(target.y, 'Y');\n        expect(newTarget.z).to.be.eq(target.z, 'Z');\n      });\n\n      test(\n          'return two fingers to starting point returns target to starting point',\n          async () => {\n            const target = element.getCameraTarget();\n\n            // Long enough duration to not be considered a re-centering tap.\n            element.interact(500, finger, finger);\n            await timePasses(500);\n            await rafPasses();\n\n            const newTarget = element.getCameraTarget();\n            expect(newTarget.x).to.be.closeTo(target.x, 0.001, 'X');\n            expect(newTarget.y).to.be.closeTo(target.y, 0.001, 'Y');\n            expect(newTarget.z).to.be.closeTo(target.z, 0.001, 'Z');\n          });\n\n      test(\n          'disconnecting the mv from DOM cancels the interaction.',\n          async () => {\n            let stopped = false;\n            element.addEventListener('interact-stopped', () => {\n              stopped = true;\n            }, {once: true});\n            element.interact(500, finger, finger);\n            await rafPasses();\n            expect(element.isConnected).to.be.true;\n            element.parentNode!.removeChild(element);\n            expect(element.isConnected).to.be.false;\n            await rafPasses();\n            expect(stopped).to.be.true;\n          });\n\n      test('tap moves the model and re-centers', async () => {\n        element.cameraOrbit = '0deg 90deg auto';\n        element.jumpCameraToGoal();\n        await element.updateComplete;\n        const target = element.getCameraTarget();\n\n        // tap on the model\n        element.interact(5, tap(0.5));\n        await rafPasses();\n        element.jumpCameraToGoal();\n        await element.updateComplete;\n        await rafPasses();\n\n        const newTarget = element.getCameraTarget();\n        expect(newTarget.x).to.be.closeTo(target.x, 0.001, 'X');\n        expect(newTarget.y).to.be.closeTo(target.y, 0.001, 'Y');\n        expect(newTarget.z).to.be.greaterThan(target.z, 'Z');\n\n        // tap off the model\n        element.interact(5, tap(0));\n        await rafPasses();\n        element.jumpCameraToGoal();\n        await element.updateComplete;\n        await rafPasses();\n\n        const oldTarget = element.getCameraTarget();\n        expect(oldTarget.x).to.be.closeTo(target.x, 0.001, 'X recenter');\n        expect(oldTarget.y).to.be.closeTo(target.y, 0.001, 'Y recenter');\n        expect(oldTarget.z).to.be.closeTo(target.z, 0.001, 'Z recenter');\n      });\n\n      test('tap does not move the model with disable-tap is set', async () => {\n        element.disableTap = true;\n        await element.updateComplete;\n        element.cameraOrbit = '0deg 90deg auto';\n        element.jumpCameraToGoal();\n        await element.updateComplete;\n        const target = element.getCameraTarget();\n\n        element.interact(5, tap(0.5));\n        await rafPasses();\n        await rafPasses();\n\n        const newTarget = element.getCameraTarget();\n        expect(newTarget.x).to.be.eq(target.x, 'X');\n        expect(newTarget.y).to.be.eq(target.y, 'Y');\n        expect(newTarget.z).to.be.eq(target.z, 'Z');\n      });\n\n      test('camera-orbit cancels synthetic interaction', async () => {\n        element.interact(50, finger);\n        await rafPasses();\n        await rafPasses();\n\n        const canceled = waitForEvent(\n            element,\n            'interact-stopped',\n            (event) => (event as any).detail.source === ChangeSource.NONE);\n\n        element.cameraOrbit = 'auto auto 70%';\n        await canceled;\n      });\n\n      test('user interaction cancels synthetic interaction', async () => {\n        element.interact(50, finger);\n        await rafPasses();\n        await rafPasses();\n\n        const canceled = waitForEvent(\n            element,\n            'interact-stopped',\n            (event) =>\n                (event as any).detail.source === ChangeSource.USER_INTERACTION);\n\n        dispatchSyntheticEvent(\n            element[$userInputElement], 'keydown', {key: 'PageDown'});\n        await canceled;\n      });\n\n      test('second interaction does not interrupt the first', async () => {\n        const target = element.getCameraTarget();\n        const orbit = element.getCameraOrbit();\n\n        element.interact(50, finger, finger);\n        element.interact(50, finger);\n        await rafPasses();\n        await rafPasses();\n\n        const newTarget = element.getCameraTarget();\n        expect(newTarget.x).to.be.lessThan(target.x, 'X');\n        expect(newTarget.y).to.be.lessThan(target.y, 'Y');\n\n        const newOrbit = element.getCameraOrbit();\n        expect(newOrbit.theta).to.be.closeTo(orbit.theta, 0.001, 'theta');\n        expect(newOrbit.phi).to.be.closeTo(orbit.phi, 0.001, 'phi');\n      });\n    });\n\n    suite('a11y', () => {\n      let input: HTMLDivElement;\n      let promptElement: HTMLElement;\n      let statusElement: HTMLSpanElement;\n\n      setup(async () => {\n        input = element[$userInputElement];\n        promptElement = (element as any)[$promptElement];\n        statusElement = element[$statusElement];\n        element.alt = 'A 3D model of a cube';\n        element.cameraOrbit = '0 90deg auto';\n        await element.updateComplete;\n      });\n\n      test('has initial aria-label set to alt before interaction', () => {\n        expect(input.getAttribute('aria-label')).to.include(element.alt);\n      });\n\n      test('does not prompt if user already interacted', async () => {\n        input.focus();\n\n        interactWith(input);\n\n        await timePasses(element.interactionPromptThreshold + 100);\n\n        expect(input.getAttribute('aria-label')).to.include(INTERACTION_PROMPT);\n        expect(promptElement.classList.contains('visible')).to.be.equal(false);\n      });\n\n      test(\n          'announces camera orientation when orbiting horizontally',\n          async () => {\n            await rafPasses();\n            input.focus();\n\n            controls.setOrbit(-Math.PI / 2.0);\n            settleControls(controls);\n\n            expect(statusElement.textContent)\n                .to.be.equal('View from stage left');\n\n            controls.setOrbit(Math.PI / 2.0);\n            settleControls(controls);\n\n            expect(statusElement.textContent)\n                .to.be.equal('View from stage right');\n\n            controls.adjustOrbit(-Math.PI / 2.0, 0, 0);\n            settleControls(controls);\n\n            expect(statusElement.textContent)\n                .to.be.equal('View from stage back');\n\n            controls.adjustOrbit(Math.PI, 0, 0);\n            settleControls(controls);\n\n            expect(statusElement.textContent)\n                .to.be.equal('View from stage front');\n          });\n\n      test(\n          'announces camera orientation when orbiting vertically', async () => {\n            await rafPasses();\n            input.focus();\n\n            settleControls(controls);\n\n            controls.setOrbit(0, 0);\n            settleControls(controls);\n\n            expect(statusElement.textContent)\n                .to.be.equal('View from stage upper-front');\n\n            controls.adjustOrbit(0, -Math.PI / 2.0, 0);\n            settleControls(controls);\n\n            expect(statusElement.textContent)\n                .to.be.equal('View from stage front');\n\n            controls.adjustOrbit(0, -Math.PI / 2.0, 0);\n            settleControls(controls);\n\n            expect(statusElement.textContent)\n                .to.be.equal('View from stage lower-front');\n          });\n    });\n  });\n});\n"]}