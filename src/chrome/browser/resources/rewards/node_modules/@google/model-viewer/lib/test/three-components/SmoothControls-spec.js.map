{"version":3,"file":"SmoothControls-spec.js","sourceRoot":"","sources":["../../../src/test/three-components/SmoothControls-spec.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {PerspectiveCamera, Vector3} from 'three';\n\nimport {$controls} from '../../features/controls.js';\nimport {$userInputElement} from '../../model-viewer-base.js';\nimport {ModelViewerElement} from '../../model-viewer.js';\nimport {ChangeSource, SmoothControls} from '../../three-components/SmoothControls.js';\nimport {waitForEvent} from '../../utilities.js';\nimport {assetPath, dispatchSyntheticEvent} from '../helpers.js';\n\nconst expect = chai.expect;\n\nconst ONE_FRAME_DELTA = 1000.0 / 60.0;\nconst FIFTY_FRAME_DELTA = 50.0 * ONE_FRAME_DELTA;\n\nconst HALF_PI = Math.PI / 2.0;\nconst QUARTER_PI = HALF_PI / 2.0;\nconst THREE_QUARTERS_PI = HALF_PI + QUARTER_PI;\n\n/**\n * Settle controls by performing 50 frames worth of updates\n */\nexport const settleControls = (controls: SmoothControls) =>\n    controls.update(performance.now(), FIFTY_FRAME_DELTA);\n\nsuite('SmoothControls', () => {\n  let controls: SmoothControls;\n  let camera: PerspectiveCamera;\n  let modelViewer: ModelViewerElement;\n  let element: HTMLDivElement;\n\n  setup(async () => {\n    modelViewer = new ModelViewerElement();\n    element = modelViewer[$userInputElement];\n    controls = (modelViewer as any)[$controls];\n    camera = controls.camera;\n\n    modelViewer.style.height = '100px';\n\n    document.body.insertBefore(modelViewer, document.body.firstChild);\n\n    modelViewer.cameraControls = true;\n    modelViewer.src = assetPath('models/cube.gltf');\n    await waitForEvent(modelViewer, 'poster-dismissed');\n  });\n\n  teardown(() => {\n    document.body.removeChild(modelViewer);\n  });\n\n  suite('when updated', () => {\n    test('repositions the camera within the configured radius options', () => {\n      controls.setOrbit(0, HALF_PI, 1.5);\n      settleControls(controls);\n\n      const radius = camera.position.length();\n\n      expect(radius).to.be.within(\n          controls.options.minimumRadius as number,\n          controls.options.maximumRadius as number);\n    });\n\n    suite('when orbit is changed', () => {\n      suite('radius', () => {\n        test('changes the absolute distance to the target', () => {\n          settleControls(controls);\n\n          controls.setOrbit(0, HALF_PI, 2.5);\n          settleControls(controls);\n          expect(camera.position.length()).to.be.equal(2.5);\n        });\n      });\n\n      suite('azimuth', () => {\n        test('wraps and takes the shortest path', () => {\n          controls.setOrbit(QUARTER_PI);\n          settleControls(controls);\n          expect(controls.getCameraSpherical().theta).to.be.equal(QUARTER_PI);\n\n          controls.setOrbit(4 * Math.PI - HALF_PI);\n          expect(controls.getCameraSpherical().theta)\n              .to.be.closeTo(4 * Math.PI + QUARTER_PI, 0.0001);\n\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n          expect(Math.abs(controls.getCameraSpherical().theta))\n              .to.be.lessThan(4 * Math.PI + QUARTER_PI);\n\n          settleControls(controls);\n          expect(controls.getCameraSpherical().theta)\n              .to.be.closeTo(4 * Math.PI - HALF_PI, 0.0001);\n\n          controls.setOrbit(THREE_QUARTERS_PI);\n          expect(controls.getCameraSpherical().theta)\n              .to.be.closeTo(Math.PI + HALF_PI, 0.0001);\n\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n          expect(Math.abs(controls.getCameraSpherical().theta))\n              .to.be.lessThan(Math.PI + HALF_PI);\n\n          settleControls(controls);\n          expect(controls.getCameraSpherical().theta)\n              .to.be.closeTo(THREE_QUARTERS_PI, 0.0001);\n        });\n\n        test(\n            'adjustOrbit does not move the goal theta more than pi past the current theta',\n            () => {\n              controls.adjustOrbit(-Math.PI * 3 / 2, 0, 0);\n\n              controls.update(performance.now(), ONE_FRAME_DELTA);\n              const startingTheta = controls.getCameraSpherical().theta;\n              expect(startingTheta).to.be.greaterThan(0);\n\n              controls.adjustOrbit(-Math.PI * 3 / 2, 0, 0);\n              settleControls(controls);\n              const goalTheta = controls.getCameraSpherical().theta;\n              expect(goalTheta).to.be.greaterThan(Math.PI);\n              expect(goalTheta).to.be.lessThan(startingTheta + Math.PI);\n            });\n      });\n    });\n\n    suite('keyboard input', () => {\n      let initialCameraPosition: Vector3;\n\n      setup(() => {\n        settleControls(controls);\n        initialCameraPosition = camera.position.clone();\n      });\n\n      suite('global keyboard input', () => {\n        test('does not change orbital position of camera', () => {\n          dispatchSyntheticEvent(window, 'keydown', {key: 'ArrowUp'});\n\n          settleControls(controls);\n\n          expect(camera.position.z).to.be.equal(initialCameraPosition.z);\n        });\n      });\n\n      suite('local keyboard input', () => {\n        test('changes orbital position of camera', () => {\n          element.focus();\n          dispatchSyntheticEvent(element, 'keydown', {key: 'ArrowUp'});\n\n          settleControls(controls);\n\n          expect(camera.position.z).to.not.be.equal(initialCameraPosition.z);\n        });\n\n        test('changes pan position of camera', () => {\n          element.focus();\n          const initialCameraTarget = controls.scene.getTarget();\n          dispatchSyntheticEvent(\n              element, 'keydown', {key: 'ArrowLeft', shiftKey: true});\n\n          settleControls(controls);\n\n          const postCameraTarget = controls.scene.getTarget();\n          expect(postCameraTarget.x).to.be.greaterThan(initialCameraTarget.x);\n        });\n      });\n    });\n\n    suite('customizing options', () => {\n      suite('azimuth', () => {\n        setup(() => {\n          controls.applyOptions({\n            minimumAzimuthalAngle: -1 * THREE_QUARTERS_PI,\n            maximumAzimuthalAngle: THREE_QUARTERS_PI\n          });\n        });\n\n        test('prevents camera azimuth from exceeding options', () => {\n          controls.setOrbit(-Math.PI, 0, 0);\n          settleControls(controls);\n          expect(controls.getCameraSpherical().theta)\n              .to.be.equal(-1 * THREE_QUARTERS_PI);\n\n          controls.setOrbit(Math.PI, 0, 0);\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n          expect(Math.abs(controls.getCameraSpherical().theta))\n              .to.be.lessThan(THREE_QUARTERS_PI);\n\n          settleControls(controls);\n          expect(controls.getCameraSpherical().theta)\n              .to.be.equal(THREE_QUARTERS_PI);\n        });\n      });\n\n      suite('pole', () => {\n        setup(() => {\n          controls.applyOptions({\n            minimumPolarAngle: QUARTER_PI,\n            maximumPolarAngle: THREE_QUARTERS_PI\n          });\n        });\n\n        test('prevents camera polar angle from exceeding options', () => {\n          controls.setOrbit(0, 0, 0);\n          settleControls(controls);\n\n          expect(controls.getCameraSpherical().phi).to.be.equal(QUARTER_PI);\n\n          controls.setOrbit(0, Math.PI, 0);\n          settleControls(controls);\n\n          expect(controls.getCameraSpherical().phi)\n              .to.be.equal(THREE_QUARTERS_PI);\n        });\n      });\n\n      suite('radius', () => {\n        setup(() => {\n          controls.applyOptions({minimumRadius: 10, maximumRadius: 20});\n        });\n\n        test('prevents camera distance from exceeding options', () => {\n          controls.setOrbit(0, 0, 0);\n          settleControls(controls);\n\n          expect(controls.getCameraSpherical().radius).to.be.equal(10);\n\n          controls.setOrbit(0, 0, 100);\n          settleControls(controls);\n\n          expect(controls.getCameraSpherical().radius).to.be.equal(20);\n        });\n      });\n\n      suite('field of view', () => {\n        setup(() => {\n          controls.applyOptions(\n              {minimumFieldOfView: 15, maximumFieldOfView: 20});\n        });\n\n        test('prevents field of view from exceeding options', () => {\n          controls.setFieldOfView(5);\n          settleControls(controls);\n\n          expect(controls.getFieldOfView()).to.be.closeTo(15, 0.00001);\n\n          controls.setFieldOfView(30);\n          settleControls(controls);\n\n          expect(controls.getFieldOfView()).to.be.closeTo(20, 0.00001);\n        });\n      });\n\n      suite('interaction', () => {\n        test('orbits when pointing, even while blurred', () => {\n          const originalPhi = controls.getCameraSpherical().phi;\n\n          element.dispatchEvent(new PointerEvent(\n              'pointerdown', {pointerId: 8, clientX: 0, clientY: 10}));\n          element.dispatchEvent(new PointerEvent(\n              'pointermove', {pointerId: 8, clientX: 0, clientY: 0}));\n\n          settleControls(controls);\n\n          expect(controls.getCameraSpherical().phi)\n              .to.be.greaterThan(originalPhi);\n        });\n\n        test('zooms when scrolling, even while blurred', () => {\n          const fov = controls.getFieldOfView();\n\n          dispatchSyntheticEvent(element, 'wheel', {deltaY: -1});\n\n          settleControls(controls);\n\n          expect(controls.getFieldOfView()).to.be.lessThan(fov);\n        });\n      });\n\n      suite('events', () => {\n        test('dispatches \"change\" on user interaction', () => {\n          let didCall = false;\n          let changeSource;\n\n          controls.addEventListener('change', ({source}) => {\n            didCall = true;\n            changeSource = source;\n          });\n\n          dispatchSyntheticEvent(element, 'keydown', {key: 'ArrowUp'});\n          settleControls(controls);\n\n          expect(didCall).to.be.true;\n          expect(changeSource).to.equal(ChangeSource.USER_INTERACTION);\n        });\n\n        test('dispatches \"change\" on direct orbit change', () => {\n          let didCall = false;\n          let changeSource;\n\n          controls.addEventListener('change', ({source}) => {\n            didCall = true;\n            changeSource = source;\n          });\n\n          controls.setOrbit(33, 33, 33);\n          settleControls(controls);\n\n          expect(didCall).to.be.true;\n          expect(changeSource).to.equal(ChangeSource.NONE);\n        });\n\n        test('sends \"user-interaction\" multiple times', () => {\n          const expectedSources = [\n            ChangeSource.USER_INTERACTION,\n            ChangeSource.USER_INTERACTION,\n            ChangeSource.USER_INTERACTION,\n            ChangeSource.USER_INTERACTION,\n          ];\n          let changeSource: Array<string> = [];\n\n          controls.addEventListener('change', ({source}) => {\n            changeSource.push(source);\n          });\n\n          dispatchSyntheticEvent(element, 'keydown', {key: 'ArrowUp'});\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n\n          expect(changeSource).to.eql(expectedSources);\n        });\n\n        test('does not send \"user-interaction\" after setOrbit', () => {\n          const expectedSources = [\n            ChangeSource.USER_INTERACTION,\n            ChangeSource.USER_INTERACTION,\n            ChangeSource.USER_INTERACTION,\n            ChangeSource.NONE,\n            ChangeSource.NONE,\n          ];\n          let changeSource: Array<string> = [];\n\n          controls.addEventListener('change', ({source}) => {\n            changeSource.push(source);\n          });\n\n          dispatchSyntheticEvent(element, 'keydown', {key: 'ArrowUp'});\n\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n\n          controls.changeSource = ChangeSource.NONE;\n          controls.setOrbit(3, 3, 3);\n\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n          controls.update(performance.now(), ONE_FRAME_DELTA);\n\n          expect(changeSource).to.eql(expectedSources);\n        });\n\n        suite('simultaneous user and imperative interaction', () => {\n          test('reports source as user interaction', async () => {\n            const eventDispatches = waitForEvent(controls, 'change');\n            controls.adjustOrbit(1, 1, 1);\n            dispatchSyntheticEvent(element, 'keydown', {key: 'ArrowUp'});\n            settleControls(controls);\n\n            const event: any = await eventDispatches;\n            expect(event.source).to.be.equal(ChangeSource.USER_INTERACTION);\n          });\n        });\n      });\n    });\n  });\n});\n"]}