{"version":3,"file":"utilities-spec.js","sourceRoot":"","sources":["../../../../src/test/three-components/gltf-instance/utilities-spec.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;GAaG;AAGH,OAAO,EAAC,eAAe,EAAC,MAAM,sDAAsD,CAAC;AACrF,OAAO,EAAC,SAAS,EAAE,aAAa,EAAC,MAAM,kBAAkB,CAAC;AAE1D,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAE3B,MAAM,mBAAmB,GAAG,SAAS,CAAC,kCAAkC,CAAC,CAAC;AAE1E,KAAK,CAAC,WAAW,EAAE,GAAG,EAAE;IACtB,KAAK,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC5B,IAAI,IAAU,CAAC;QAEf,KAAK,CAAC,KAAK,IAAI,EAAE;YACf,MAAM,SAAS,GAAG,MAAM,aAAa,CAAC,mBAAmB,CAAC,CAAC;YAC3D,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC;QAC/B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gCAAgC,EAAE,GAAG,EAAE;YAC1C,MAAM,SAAS,GAAa,EAAE,CAAC;YAC/B,MAAM,OAAO,GAAG,IAAI,eAAe,CAC/B,EAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAK,CAAC,EAAC,CAAC,CAAC;YAE9D,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAEpB,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC;gBACjC,WAAW;gBACX,WAAW;gBACX,WAAW;gBACX,WAAW;gBACX,WAAW;gBACX,WAAW;gBACX,WAAW;aACZ,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,kBAAkB,EAAE,GAAG,EAAE;YAC7B,IAAI,CAAC,gCAAgC,EAAE,GAAG,EAAE;gBAC1C,MAAM,SAAS,GAAa,EAAE,CAAC;gBAC/B,MAAM,OAAO,GAAG,IAAI,eAAe,CAC/B,EAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAK,CAAC,EAAC,CAAC,CAAC;gBAE9D,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;gBAEpC,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC;oBACjC,WAAW;oBACX,WAAW;oBACX,WAAW;iBACZ,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {GLTF} from '../../../three-components/gltf-instance/gltf-2.0.js';\nimport {GLTFTreeVisitor} from '../../../three-components/gltf-instance/utilities.js';\nimport {assetPath, loadThreeGLTF} from '../../helpers.js';\n\nconst expect = chai.expect;\n\nconst ORDER_TEST_GLB_PATH = assetPath('models/order-test/order-test.glb');\n\nsuite('utilities', () => {\n  suite('GLTFTreeVisitor', () => {\n    let gltf: GLTF;\n\n    setup(async () => {\n      const threeGLTF = await loadThreeGLTF(ORDER_TEST_GLB_PATH);\n      gltf = threeGLTF.parser.json;\n    });\n\n    test('visits materials in tree order', () => {\n      const materials: string[] = [];\n      const visitor = new GLTFTreeVisitor(\n          {material: (material) => materials.push(material.name!)});\n\n      visitor.visit(gltf);\n\n      expect(materials).to.be.deep.equal([\n        'Material0',\n        'Material1',\n        'Material2',\n        'Material2',\n        'Material1',\n        'Material0',\n        'Material2',\n      ]);\n    });\n\n    suite('sparse traversal', () => {\n      test('visits materials in tree order', () => {\n        const materials: string[] = [];\n        const visitor = new GLTFTreeVisitor(\n            {material: (material) => materials.push(material.name!)});\n\n        visitor.visit(gltf, {sparse: true});\n\n        expect(materials).to.be.deep.equal([\n          'Material0',\n          'Material1',\n          'Material2',\n        ]);\n      });\n    });\n  });\n});\n"]}