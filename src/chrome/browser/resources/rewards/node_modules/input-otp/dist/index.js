var Gt=Object.create;var F=Object.defineProperty,xt=Object.defineProperties,jt=Object.getOwnPropertyDescriptor,Lt=Object.getOwnPropertyDescriptors,Nt=Object.getOwnPropertyNames,Z=Object.getOwnPropertySymbols,$t=Object.getPrototypeOf,ot=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Et=(e,n,t)=>n in e?F(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,bt=(e,n)=>{for(var t in n||(n={}))ot.call(n,t)&&Et(e,t,n[t]);if(Z)for(var t of Z(n))St.call(n,t)&&Et(e,t,n[t]);return e},Pt=(e,n)=>xt(e,Lt(n));var ht=(e,n)=>{var t={};for(var a in e)ot.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&Z)for(var a of Z(e))n.indexOf(a)<0&&St.call(e,a)&&(t[a]=e[a]);return t};var Ft=(e,n)=>{for(var t in n)F(e,t,{get:n[t],enumerable:!0})},_t=(e,n,t,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of Nt(n))!ot.call(e,m)&&m!==t&&F(e,m,{get:()=>n[m],enumerable:!(a=jt(n,m))||a.enumerable});return e};var rt=(e,n,t)=>(t=e!=null?Gt($t(e)):{},_t(n||!e||!e.__esModule?F(t,"default",{value:e,enumerable:!0}):t,e)),zt=e=>_t(F({},"__esModule",{value:!0}),e);var Kt={};Ft(Kt,{OTPInput:()=>yt,OTPInputContext:()=>Ct,REGEXP_ONLY_CHARS:()=>Vt,REGEXP_ONLY_DIGITS:()=>st,REGEXP_ONLY_DIGITS_AND_CHARS:()=>Xt});module.exports=zt(Kt);var r=rt(require("react"));var st="^\\d+$",Vt="^[a-zA-Z]+$",Xt="^[a-zA-Z0-9]+$";function wt(e){let n=setTimeout(e,0),t=setTimeout(e,10),a=setTimeout(e,50);return[n,t,a]}var q=rt(require("react"));function Tt(e){let n=q.useRef();return q.useEffect(()=>{n.current=e}),n.current}var v=rt(require("react")),Yt=18,It=40,Ut=`${It}px`,Zt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Mt({containerRef:e,inputRef:n,pushPasswordManagerStrategy:t,isFocused:a}){let m=v.useRef({done:!1,refocused:!1}),[W,B]=v.useState(!1),[V,K]=v.useState(!1),[j,A]=v.useState(!1),X=v.useMemo(()=>t==="none"?!1:(t==="increase-width"||t==="experimental-no-flickering")&&W&&V,[W,V,t]),c=v.useCallback(()=>{let g=e.current,p=n.current;if(!g||!p||j||t==="none")return;let E=g,k=E.getBoundingClientRect().left+E.offsetWidth,M=E.getBoundingClientRect().top+E.offsetHeight/2,i=k-Yt,P=M;if(!(document.querySelectorAll(Zt).length===0&&document.elementFromPoint(i,P)===g)&&(B(!0),A(!0),!m.current.refocused&&document.activeElement===p)){let d=[p.selectionStart,p.selectionEnd];p.blur(),p.focus(),p.setSelectionRange(d[0],d[1]),m.current.refocused=!0}},[e,n,j,t]);return v.useEffect(()=>{let g=e.current;if(!g||t==="none")return;function p(){let M=window.innerWidth-g.getBoundingClientRect().right;K(M>=It)}p();let E=setInterval(p,1e3);return()=>{clearInterval(E)}},[e,t]),v.useEffect(()=>{let g=a||document.activeElement===n.current;if(t==="none"||!g)return;let p=setTimeout(c,0),E=setTimeout(c,2e3),k=setTimeout(c,5e3),M=setTimeout(()=>{A(!0)},6e3);return()=>{clearTimeout(p),clearTimeout(E),clearTimeout(k),clearTimeout(M)}},[n,a,t,c]),{hasPWMBadge:W,willPushPWMBadge:X,PWM_BADGE_SPACE_WIDTH:Ut}}var Ct=r.createContext({}),yt=r.forwardRef((p,g)=>{var E=p,{value:e,onChange:n,maxLength:t,textAlign:a="left",pattern:m=st,inputMode:W="numeric",onComplete:B,pushPasswordManagerStrategy:V="increase-width",containerClassName:K,noScriptCSSFallback:j=qt,render:A,children:X}=E,c=ht(E,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]);var U,ft,mt,pt,Rt;let[k,M]=r.useState(typeof c.defaultValue=="string"?c.defaultValue:""),i=e!=null?e:k,P=Tt(i),O=r.useCallback(o=>{n==null||n(o),M(o)},[n]),d=r.useMemo(()=>m?typeof m=="string"?new RegExp(m):m:null,[m]),l=r.useRef(null),J=r.useRef(null),Q=r.useRef({value:i,onChange:O,isIOS:typeof window!="undefined"&&((ft=(U=window==null?void 0:window.CSS)==null?void 0:U.supports)==null?void 0:ft.call(U,"-webkit-touch-callout","none"))}),Y=r.useRef({prev:[(mt=l.current)==null?void 0:mt.selectionStart,(pt=l.current)==null?void 0:pt.selectionEnd,(Rt=l.current)==null?void 0:Rt.selectionDirection]});r.useImperativeHandle(g,()=>l.current,[]),r.useEffect(()=>{let o=l.current,s=J.current;if(!o||!s)return;Q.current.value!==o.value&&Q.current.onChange(o.value),Y.current.prev=[o.selectionStart,o.selectionEnd,o.selectionDirection];function f(){if(document.activeElement!==o){N(null),$(null);return}let u=o.selectionStart,b=o.selectionEnd,w=o.selectionDirection,y=o.maxLength,D=o.value,h=Y.current.prev,S=-1,T=-1,I;if(D.length!==0&&u!==null&&b!==null){let At=u===b,kt=u===D.length&&D.length<y;if(At&&!kt){let H=u;if(H===0)S=0,T=1,I="forward";else if(H===y)S=H-1,T=H,I="backward";else if(y>1&&D.length>1){let nt=0;if(h[0]!==null&&h[1]!==null){I=H<h[1]?"backward":"forward";let Ot=h[0]===h[1]&&h[0]<y;I==="backward"&&!Ot&&(nt=-1)}S=nt+H,T=nt+H+1}}S!==-1&&T!==-1&&S!==T&&l.current.setSelectionRange(S,T,I)}let vt=S!==-1?S:u,gt=T!==-1?T:b,Bt=I!=null?I:w;N(vt),$(gt),Y.current.prev=[vt,gt,Bt]}if(document.addEventListener("selectionchange",f,{capture:!0}),f(),document.activeElement===o&&tt(!0),!document.getElementById("input-otp-style")){let u=document.createElement("style");if(u.id="input-otp-style",document.head.appendChild(u),u.sheet){let b="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";z(u.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),z(u.sheet,`[data-input-otp]:autofill { ${b} }`),z(u.sheet,`[data-input-otp]:-webkit-autofill { ${b} }`),z(u.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),z(u.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let R=()=>{s&&s.style.setProperty("--root-height",`${o.clientHeight}px`)};R();let _=new ResizeObserver(R);return _.observe(o),()=>{document.removeEventListener("selectionchange",f,{capture:!0}),_.disconnect()}},[]);let[ct,at]=r.useState(!1),[L,tt]=r.useState(!1),[C,N]=r.useState(null),[G,$]=r.useState(null);r.useEffect(()=>{wt(()=>{var R,_,u,b;(R=l.current)==null||R.dispatchEvent(new Event("input"));let o=(_=l.current)==null?void 0:_.selectionStart,s=(u=l.current)==null?void 0:u.selectionEnd,f=(b=l.current)==null?void 0:b.selectionDirection;o!==null&&s!==null&&(N(o),$(s),Y.current.prev=[o,s,f])})},[i,L]),r.useEffect(()=>{P!==void 0&&i!==P&&P.length<t&&i.length===t&&(B==null||B(i))},[t,B,P,i]);let x=Mt({containerRef:J,inputRef:l,pushPasswordManagerStrategy:V,isFocused:L}),it=r.useCallback(o=>{let s=o.currentTarget.value.slice(0,t);if(s.length>0&&d&&!d.test(s)){o.preventDefault();return}typeof P=="string"&&s.length<P.length&&document.dispatchEvent(new Event("selectionchange")),O(s)},[t,O,P,d]),lt=r.useCallback(()=>{var o;if(l.current){let s=Math.min(l.current.value.length,t-1),f=l.current.value.length;(o=l.current)==null||o.setSelectionRange(s,f),N(s),$(f)}tt(!0)},[t]),ut=r.useCallback(o=>{var h,S;let s=l.current;if(!Q.current.isIOS||!o.clipboardData||!s)return;let f=o.clipboardData.getData("text/plain");o.preventDefault();let R=(h=l.current)==null?void 0:h.selectionStart,_=(S=l.current)==null?void 0:S.selectionEnd,w=(R!==_?i.slice(0,R)+f+i.slice(_):i.slice(0,R)+f+i.slice(R)).slice(0,t);if(w.length>0&&d&&!d.test(w))return;s.value=w,O(w);let y=Math.min(w.length,t-1),D=w.length;s.setSelectionRange(y,D),N(y),$(D)},[t,O,d,i]),Dt=r.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),dt=r.useMemo(()=>({position:"absolute",inset:0,width:x.willPushPWMBadge?`calc(100% + ${x.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:x.willPushPWMBadge?`inset(0 ${x.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:a,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[x.PWM_BADGE_SPACE_WIDTH,x.willPushPWMBadge,a]),Ht=r.useMemo(()=>r.createElement("input",Pt(bt({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-mss":C,"data-input-otp-mse":G,inputMode:W,pattern:d==null?void 0:d.source,style:dt,maxLength:t,value:i,ref:l,onPaste:o=>{var s;ut(o),(s=c.onPaste)==null||s.call(c,o)},onChange:it,onMouseOver:o=>{var s;at(!0),(s=c.onMouseOver)==null||s.call(c,o)},onMouseLeave:o=>{var s;at(!1),(s=c.onMouseLeave)==null||s.call(c,o)},onFocus:o=>{var s;lt(),(s=c.onFocus)==null||s.call(c,o)},onBlur:o=>{var s;tt(!1),(s=c.onBlur)==null||s.call(c,o)}})),[it,lt,ut,W,dt,t,G,C,c,d==null?void 0:d.source,i]),et=r.useMemo(()=>({slots:Array.from({length:t}).map((o,s)=>{let f=L&&C!==null&&G!==null&&(C===G&&s===C||s>=C&&s<G),R=i[s]!==void 0?i[s]:null;return{char:R,isActive:f,hasFakeCaret:f&&R===null}}),isFocused:L,isHovering:!c.disabled&&ct}),[L,ct,t,G,C,c.disabled,i]),Wt=r.useMemo(()=>A?A(et):r.createElement(Ct.Provider,{value:et},X),[X,et,A]);return r.createElement(r.Fragment,null,j!==null&&r.createElement("noscript",null,r.createElement("style",null,j)),r.createElement("div",{ref:J,"data-input-otp-container":!0,style:Dt,className:K},Wt,r.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Ht)))});yt.displayName="Input";function z(e,n){try{e.insertRule(n)}catch(t){console.error("input-otp could not insert CSS rule:",n)}}var qt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;0&&(module.exports={OTPInput,OTPInputContext,REGEXP_ONLY_CHARS,REGEXP_ONLY_DIGITS,REGEXP_ONLY_DIGITS_AND_CHARS});
//# sourceMappingURL=index.js.map