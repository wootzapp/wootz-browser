"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Aa=require("@walletconnect/sign-client"),et=require("@walletconnect/utils"),Ia=require("@walletconnect/logger"),xa=require("@walletconnect/jsonrpc-http-connection"),Wt=require("@walletconnect/jsonrpc-provider"),$g=require("events"),qg=require("@walletconnect/jsonrpc-utils");function qi(P){return P&&typeof P=="object"&&"default"in P?P:{default:P}}var Ug=qi(Aa),te=qi(xa),Fg=qi($g);const Ea="error",Mg="wss://relay.walletconnect.com",Wg="wc",Bg="universal_provider",ya=`${Wg}@2:${Bg}:`,Gg="https://rpc.walletconnect.com/v1/",ze="generic",Lt={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var _n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ui={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(P,s){(function(){var i,p="4.17.21",w=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",O="Expected a function",k="Invalid `variable` option passed into `_.template`",ee="__lodash_hash_undefined__",Je=500,xe="__lodash_placeholder__",Nt=1,Bt=2,Ee=4,ye=1,mn=2,_t=1,le=2,Gi=4,Dt=8,Se=16,$t=32,Oe=64,Gt=128,Ye=256,gr=512,Fa=30,Ma="...",Wa=800,Ba=16,Ki=1,Ga=2,Ka=3,pe=1/0,ne=9007199254740991,za=17976931348623157e292,wn=0/0,qt=4294967295,Ja=qt-1,Ya=qt>>>1,Za=[["ary",Gt],["bind",_t],["bindKey",le],["curry",Dt],["curryRight",Se],["flip",gr],["partial",$t],["partialRight",Oe],["rearg",Ye]],Re="[object Arguments]",Pn="[object Array]",Xa="[object AsyncFunction]",Ze="[object Boolean]",Xe="[object Date]",Qa="[object DOMException]",Cn="[object Error]",An="[object Function]",zi="[object GeneratorFunction]",yt="[object Map]",Qe="[object Number]",Va="[object Null]",Kt="[object Object]",Ji="[object Promise]",ka="[object Proxy]",Ve="[object RegExp]",St="[object Set]",ke="[object String]",In="[object Symbol]",ja="[object Undefined]",je="[object WeakMap]",to="[object WeakSet]",tn="[object ArrayBuffer]",be="[object DataView]",vr="[object Float32Array]",_r="[object Float64Array]",mr="[object Int8Array]",wr="[object Int16Array]",Pr="[object Int32Array]",Cr="[object Uint8Array]",Ar="[object Uint8ClampedArray]",Ir="[object Uint16Array]",xr="[object Uint32Array]",eo=/\b__p \+= '';/g,no=/\b(__p \+=) '' \+/g,ro=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yi=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,io=RegExp(Yi.source),so=RegExp(Zi.source),uo=/<%-([\s\S]+?)%>/g,ao=/<%([\s\S]+?)%>/g,Xi=/<%=([\s\S]+?)%>/g,oo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,co=/^\w*$/,fo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/[\\^$.*+?()[\]{}|]/g,ho=RegExp(Er.source),yr=/^\s+/,lo=/\s/,po=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,go=/\{\n\/\* \[wrapped with (.+)\] \*/,vo=/,? & /,_o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mo=/[()=,{}\[\]\/\s]/,wo=/\\(\\)?/g,Po=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qi=/\w*$/,Co=/^[-+]0x[0-9a-f]+$/i,Ao=/^0b[01]+$/i,Io=/^\[object .+?Constructor\]$/,xo=/^0o[0-7]+$/i,Eo=/^(?:0|[1-9]\d*)$/,yo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xn=/($^)/,So=/['\n\r\u2028\u2029\\]/g,En="\\ud800-\\udfff",Oo="\\u0300-\\u036f",Ro="\\ufe20-\\ufe2f",bo="\\u20d0-\\u20ff",Vi=Oo+Ro+bo,ki="\\u2700-\\u27bf",ji="a-z\\xdf-\\xf6\\xf8-\\xff",To="\\xac\\xb1\\xd7\\xf7",Lo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ho="\\u2000-\\u206f",No=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ts="A-Z\\xc0-\\xd6\\xd8-\\xde",es="\\ufe0e\\ufe0f",ns=To+Lo+Ho+No,Sr="['\u2019]",Do="["+En+"]",rs="["+ns+"]",yn="["+Vi+"]",is="\\d+",$o="["+ki+"]",ss="["+ji+"]",us="[^"+En+ns+is+ki+ji+ts+"]",Or="\\ud83c[\\udffb-\\udfff]",qo="(?:"+yn+"|"+Or+")",as="[^"+En+"]",Rr="(?:\\ud83c[\\udde6-\\uddff]){2}",br="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="["+ts+"]",os="\\u200d",cs="(?:"+ss+"|"+us+")",Uo="(?:"+Te+"|"+us+")",fs="(?:"+Sr+"(?:d|ll|m|re|s|t|ve))?",hs="(?:"+Sr+"(?:D|LL|M|RE|S|T|VE))?",ls=qo+"?",ps="["+es+"]?",Fo="(?:"+os+"(?:"+[as,Rr,br].join("|")+")"+ps+ls+")*",Mo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ds=ps+ls+Fo,Bo="(?:"+[$o,Rr,br].join("|")+")"+ds,Go="(?:"+[as+yn+"?",yn,Rr,br,Do].join("|")+")",Ko=RegExp(Sr,"g"),zo=RegExp(yn,"g"),Tr=RegExp(Or+"(?="+Or+")|"+Go+ds,"g"),Jo=RegExp([Te+"?"+ss+"+"+fs+"(?="+[rs,Te,"$"].join("|")+")",Uo+"+"+hs+"(?="+[rs,Te+cs,"$"].join("|")+")",Te+"?"+cs+"+"+fs,Te+"+"+hs,Wo,Mo,is,Bo].join("|"),"g"),Yo=RegExp("["+os+En+Vi+es+"]"),Zo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qo=-1,G={};G[vr]=G[_r]=G[mr]=G[wr]=G[Pr]=G[Cr]=G[Ar]=G[Ir]=G[xr]=!0,G[Re]=G[Pn]=G[tn]=G[Ze]=G[be]=G[Xe]=G[Cn]=G[An]=G[yt]=G[Qe]=G[Kt]=G[Ve]=G[St]=G[ke]=G[je]=!1;var B={};B[Re]=B[Pn]=B[tn]=B[be]=B[Ze]=B[Xe]=B[vr]=B[_r]=B[mr]=B[wr]=B[Pr]=B[yt]=B[Qe]=B[Kt]=B[Ve]=B[St]=B[ke]=B[In]=B[Cr]=B[Ar]=B[Ir]=B[xr]=!0,B[Cn]=B[An]=B[je]=!1;var Vo={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ko={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ec=parseFloat,nc=parseInt,gs=typeof _n=="object"&&_n&&_n.Object===Object&&_n,rc=typeof self=="object"&&self&&self.Object===Object&&self,j=gs||rc||Function("return this")(),Lr=s&&!s.nodeType&&s,de=Lr&&!0&&P&&!P.nodeType&&P,vs=de&&de.exports===Lr,Hr=vs&&gs.process,mt=function(){try{var h=de&&de.require&&de.require("util").types;return h||Hr&&Hr.binding&&Hr.binding("util")}catch{}}(),_s=mt&&mt.isArrayBuffer,ms=mt&&mt.isDate,ws=mt&&mt.isMap,Ps=mt&&mt.isRegExp,Cs=mt&&mt.isSet,As=mt&&mt.isTypedArray;function ht(h,g,d){switch(d.length){case 0:return h.call(g);case 1:return h.call(g,d[0]);case 2:return h.call(g,d[0],d[1]);case 3:return h.call(g,d[0],d[1],d[2])}return h.apply(g,d)}function ic(h,g,d,A){for(var R=-1,q=h==null?0:h.length;++R<q;){var X=h[R];g(A,X,d(X),h)}return A}function wt(h,g){for(var d=-1,A=h==null?0:h.length;++d<A&&g(h[d],d,h)!==!1;);return h}function sc(h,g){for(var d=h==null?0:h.length;d--&&g(h[d],d,h)!==!1;);return h}function Is(h,g){for(var d=-1,A=h==null?0:h.length;++d<A;)if(!g(h[d],d,h))return!1;return!0}function re(h,g){for(var d=-1,A=h==null?0:h.length,R=0,q=[];++d<A;){var X=h[d];g(X,d,h)&&(q[R++]=X)}return q}function Sn(h,g){var d=h==null?0:h.length;return!!d&&Le(h,g,0)>-1}function Nr(h,g,d){for(var A=-1,R=h==null?0:h.length;++A<R;)if(d(g,h[A]))return!0;return!1}function K(h,g){for(var d=-1,A=h==null?0:h.length,R=Array(A);++d<A;)R[d]=g(h[d],d,h);return R}function ie(h,g){for(var d=-1,A=g.length,R=h.length;++d<A;)h[R+d]=g[d];return h}function Dr(h,g,d,A){var R=-1,q=h==null?0:h.length;for(A&&q&&(d=h[++R]);++R<q;)d=g(d,h[R],R,h);return d}function uc(h,g,d,A){var R=h==null?0:h.length;for(A&&R&&(d=h[--R]);R--;)d=g(d,h[R],R,h);return d}function $r(h,g){for(var d=-1,A=h==null?0:h.length;++d<A;)if(g(h[d],d,h))return!0;return!1}var ac=qr("length");function oc(h){return h.split("")}function cc(h){return h.match(_o)||[]}function xs(h,g,d){var A;return d(h,function(R,q,X){if(g(R,q,X))return A=q,!1}),A}function On(h,g,d,A){for(var R=h.length,q=d+(A?1:-1);A?q--:++q<R;)if(g(h[q],q,h))return q;return-1}function Le(h,g,d){return g===g?Cc(h,g,d):On(h,Es,d)}function fc(h,g,d,A){for(var R=d-1,q=h.length;++R<q;)if(A(h[R],g))return R;return-1}function Es(h){return h!==h}function ys(h,g){var d=h==null?0:h.length;return d?Fr(h,g)/d:wn}function qr(h){return function(g){return g==null?i:g[h]}}function Ur(h){return function(g){return h==null?i:h[g]}}function Ss(h,g,d,A,R){return R(h,function(q,X,W){d=A?(A=!1,q):g(d,q,X,W)}),d}function hc(h,g){var d=h.length;for(h.sort(g);d--;)h[d]=h[d].value;return h}function Fr(h,g){for(var d,A=-1,R=h.length;++A<R;){var q=g(h[A]);q!==i&&(d=d===i?q:d+q)}return d}function Mr(h,g){for(var d=-1,A=Array(h);++d<h;)A[d]=g(d);return A}function lc(h,g){return K(g,function(d){return[d,h[d]]})}function Os(h){return h&&h.slice(0,Ls(h)+1).replace(yr,"")}function lt(h){return function(g){return h(g)}}function Wr(h,g){return K(g,function(d){return h[d]})}function en(h,g){return h.has(g)}function Rs(h,g){for(var d=-1,A=h.length;++d<A&&Le(g,h[d],0)>-1;);return d}function bs(h,g){for(var d=h.length;d--&&Le(g,h[d],0)>-1;);return d}function pc(h,g){for(var d=h.length,A=0;d--;)h[d]===g&&++A;return A}var dc=Ur(Vo),gc=Ur(ko);function vc(h){return"\\"+tc[h]}function _c(h,g){return h==null?i:h[g]}function He(h){return Yo.test(h)}function mc(h){return Zo.test(h)}function wc(h){for(var g,d=[];!(g=h.next()).done;)d.push(g.value);return d}function Br(h){var g=-1,d=Array(h.size);return h.forEach(function(A,R){d[++g]=[R,A]}),d}function Ts(h,g){return function(d){return h(g(d))}}function se(h,g){for(var d=-1,A=h.length,R=0,q=[];++d<A;){var X=h[d];(X===g||X===xe)&&(h[d]=xe,q[R++]=d)}return q}function Rn(h){var g=-1,d=Array(h.size);return h.forEach(function(A){d[++g]=A}),d}function Pc(h){var g=-1,d=Array(h.size);return h.forEach(function(A){d[++g]=[A,A]}),d}function Cc(h,g,d){for(var A=d-1,R=h.length;++A<R;)if(h[A]===g)return A;return-1}function Ac(h,g,d){for(var A=d+1;A--;)if(h[A]===g)return A;return A}function Ne(h){return He(h)?xc(h):ac(h)}function Ot(h){return He(h)?Ec(h):oc(h)}function Ls(h){for(var g=h.length;g--&&lo.test(h.charAt(g)););return g}var Ic=Ur(jo);function xc(h){for(var g=Tr.lastIndex=0;Tr.test(h);)++g;return g}function Ec(h){return h.match(Tr)||[]}function yc(h){return h.match(Jo)||[]}var Sc=function h(g){g=g==null?j:De.defaults(j.Object(),g,De.pick(j,Xo));var d=g.Array,A=g.Date,R=g.Error,q=g.Function,X=g.Math,W=g.Object,Gr=g.RegExp,Oc=g.String,Pt=g.TypeError,bn=d.prototype,Rc=q.prototype,$e=W.prototype,Tn=g["__core-js_shared__"],Ln=Rc.toString,M=$e.hasOwnProperty,bc=0,Hs=function(){var t=/[^.]+$/.exec(Tn&&Tn.keys&&Tn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Hn=$e.toString,Tc=Ln.call(W),Lc=j._,Hc=Gr("^"+Ln.call(M).replace(Er,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nn=vs?g.Buffer:i,ue=g.Symbol,Dn=g.Uint8Array,Ns=Nn?Nn.allocUnsafe:i,$n=Ts(W.getPrototypeOf,W),Ds=W.create,$s=$e.propertyIsEnumerable,qn=bn.splice,qs=ue?ue.isConcatSpreadable:i,nn=ue?ue.iterator:i,ge=ue?ue.toStringTag:i,Un=function(){try{var t=Pe(W,"defineProperty");return t({},"",{}),t}catch{}}(),Nc=g.clearTimeout!==j.clearTimeout&&g.clearTimeout,Dc=A&&A.now!==j.Date.now&&A.now,$c=g.setTimeout!==j.setTimeout&&g.setTimeout,Fn=X.ceil,Mn=X.floor,Kr=W.getOwnPropertySymbols,qc=Nn?Nn.isBuffer:i,Us=g.isFinite,Uc=bn.join,Fc=Ts(W.keys,W),Q=X.max,nt=X.min,Mc=A.now,Wc=g.parseInt,Fs=X.random,Bc=bn.reverse,zr=Pe(g,"DataView"),rn=Pe(g,"Map"),Jr=Pe(g,"Promise"),qe=Pe(g,"Set"),sn=Pe(g,"WeakMap"),un=Pe(W,"create"),Wn=sn&&new sn,Ue={},Gc=Ce(zr),Kc=Ce(rn),zc=Ce(Jr),Jc=Ce(qe),Yc=Ce(sn),Bn=ue?ue.prototype:i,an=Bn?Bn.valueOf:i,Ms=Bn?Bn.toString:i;function a(t){if(J(t)&&!b(t)&&!(t instanceof D)){if(t instanceof Ct)return t;if(M.call(t,"__wrapped__"))return Wu(t)}return new Ct(t)}var Fe=function(){function t(){}return function(e){if(!z(e))return{};if(Ds)return Ds(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Gn(){}function Ct(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}a.templateSettings={escape:uo,evaluate:ao,interpolate:Xi,variable:"",imports:{_:a}},a.prototype=Gn.prototype,a.prototype.constructor=a,Ct.prototype=Fe(Gn.prototype),Ct.prototype.constructor=Ct;function D(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qt,this.__views__=[]}function Zc(){var t=new D(this.__wrapped__);return t.__actions__=at(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=at(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=at(this.__views__),t}function Xc(){if(this.__filtered__){var t=new D(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Qc(){var t=this.__wrapped__.value(),e=this.__dir__,n=b(t),r=e<0,u=n?t.length:0,o=ch(0,u,this.__views__),c=o.start,f=o.end,l=f-c,v=r?f:c-1,_=this.__iteratees__,m=_.length,C=0,I=nt(l,this.__takeCount__);if(!n||!r&&u==l&&I==l)return fu(t,this.__actions__);var y=[];t:for(;l--&&C<I;){v+=e;for(var L=-1,S=t[v];++L<m;){var N=_[L],$=N.iteratee,gt=N.type,ut=$(S);if(gt==Ga)S=ut;else if(!ut){if(gt==Ki)continue t;break t}}y[C++]=S}return y}D.prototype=Fe(Gn.prototype),D.prototype.constructor=D;function ve(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vc(){this.__data__=un?un(null):{},this.size=0}function kc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function jc(t){var e=this.__data__;if(un){var n=e[t];return n===ee?i:n}return M.call(e,t)?e[t]:i}function tf(t){var e=this.__data__;return un?e[t]!==i:M.call(e,t)}function ef(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=un&&e===i?ee:e,this}ve.prototype.clear=Vc,ve.prototype.delete=kc,ve.prototype.get=jc,ve.prototype.has=tf,ve.prototype.set=ef;function zt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nf(){this.__data__=[],this.size=0}function rf(t){var e=this.__data__,n=Kn(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():qn.call(e,n,1),--this.size,!0}function sf(t){var e=this.__data__,n=Kn(e,t);return n<0?i:e[n][1]}function uf(t){return Kn(this.__data__,t)>-1}function af(t,e){var n=this.__data__,r=Kn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}zt.prototype.clear=nf,zt.prototype.delete=rf,zt.prototype.get=sf,zt.prototype.has=uf,zt.prototype.set=af;function Jt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function of(){this.size=0,this.__data__={hash:new ve,map:new(rn||zt),string:new ve}}function cf(t){var e=nr(this,t).delete(t);return this.size-=e?1:0,e}function ff(t){return nr(this,t).get(t)}function hf(t){return nr(this,t).has(t)}function lf(t,e){var n=nr(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}Jt.prototype.clear=of,Jt.prototype.delete=cf,Jt.prototype.get=ff,Jt.prototype.has=hf,Jt.prototype.set=lf;function _e(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Jt;++e<n;)this.add(t[e])}function pf(t){return this.__data__.set(t,ee),this}function df(t){return this.__data__.has(t)}_e.prototype.add=_e.prototype.push=pf,_e.prototype.has=df;function Rt(t){var e=this.__data__=new zt(t);this.size=e.size}function gf(){this.__data__=new zt,this.size=0}function vf(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function _f(t){return this.__data__.get(t)}function mf(t){return this.__data__.has(t)}function wf(t,e){var n=this.__data__;if(n instanceof zt){var r=n.__data__;if(!rn||r.length<w-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jt(r)}return n.set(t,e),this.size=n.size,this}Rt.prototype.clear=gf,Rt.prototype.delete=vf,Rt.prototype.get=_f,Rt.prototype.has=mf,Rt.prototype.set=wf;function Ws(t,e){var n=b(t),r=!n&&Ae(t),u=!n&&!r&&he(t),o=!n&&!r&&!u&&Ge(t),c=n||r||u||o,f=c?Mr(t.length,Oc):[],l=f.length;for(var v in t)(e||M.call(t,v))&&!(c&&(v=="length"||u&&(v=="offset"||v=="parent")||o&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||Qt(v,l)))&&f.push(v);return f}function Bs(t){var e=t.length;return e?t[ri(0,e-1)]:i}function Pf(t,e){return rr(at(t),me(e,0,t.length))}function Cf(t){return rr(at(t))}function Yr(t,e,n){(n!==i&&!bt(t[e],n)||n===i&&!(e in t))&&Yt(t,e,n)}function on(t,e,n){var r=t[e];(!(M.call(t,e)&&bt(r,n))||n===i&&!(e in t))&&Yt(t,e,n)}function Kn(t,e){for(var n=t.length;n--;)if(bt(t[n][0],e))return n;return-1}function Af(t,e,n,r){return ae(t,function(u,o,c){e(r,u,n(u),c)}),r}function Gs(t,e){return t&&Ft(e,V(e),t)}function If(t,e){return t&&Ft(e,ct(e),t)}function Yt(t,e,n){e=="__proto__"&&Un?Un(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Zr(t,e){for(var n=-1,r=e.length,u=d(r),o=t==null;++n<r;)u[n]=o?i:Oi(t,e[n]);return u}function me(t,e,n){return t===t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function At(t,e,n,r,u,o){var c,f=e&Nt,l=e&Bt,v=e&Ee;if(n&&(c=u?n(t,r,u,o):n(t)),c!==i)return c;if(!z(t))return t;var _=b(t);if(_){if(c=hh(t),!f)return at(t,c)}else{var m=rt(t),C=m==An||m==zi;if(he(t))return pu(t,f);if(m==Kt||m==Re||C&&!u){if(c=l||C?{}:Lu(t),!f)return l?th(t,If(c,t)):jf(t,Gs(c,t))}else{if(!B[m])return u?t:{};c=lh(t,m,f)}}o||(o=new Rt);var I=o.get(t);if(I)return I;o.set(t,c),aa(t)?t.forEach(function(S){c.add(At(S,e,n,S,t,o))}):sa(t)&&t.forEach(function(S,N){c.set(N,At(S,e,n,N,t,o))});var y=v?l?di:pi:l?ct:V,L=_?i:y(t);return wt(L||t,function(S,N){L&&(N=S,S=t[N]),on(c,N,At(S,e,n,N,t,o))}),c}function xf(t){var e=V(t);return function(n){return Ks(n,t,e)}}function Ks(t,e,n){var r=n.length;if(t==null)return!r;for(t=W(t);r--;){var u=n[r],o=e[u],c=t[u];if(c===i&&!(u in t)||!o(c))return!1}return!0}function zs(t,e,n){if(typeof t!="function")throw new Pt(O);return gn(function(){t.apply(i,n)},e)}function cn(t,e,n,r){var u=-1,o=Sn,c=!0,f=t.length,l=[],v=e.length;if(!f)return l;n&&(e=K(e,lt(n))),r?(o=Nr,c=!1):e.length>=w&&(o=en,c=!1,e=new _e(e));t:for(;++u<f;){var _=t[u],m=n==null?_:n(_);if(_=r||_!==0?_:0,c&&m===m){for(var C=v;C--;)if(e[C]===m)continue t;l.push(_)}else o(e,m,r)||l.push(_)}return l}var ae=mu(Ut),Js=mu(Qr,!0);function Ef(t,e){var n=!0;return ae(t,function(r,u,o){return n=!!e(r,u,o),n}),n}function zn(t,e,n){for(var r=-1,u=t.length;++r<u;){var o=t[r],c=e(o);if(c!=null&&(f===i?c===c&&!dt(c):n(c,f)))var f=c,l=o}return l}function yf(t,e,n,r){var u=t.length;for(n=T(n),n<0&&(n=-n>u?0:u+n),r=r===i||r>u?u:T(r),r<0&&(r+=u),r=n>r?0:ca(r);n<r;)t[n++]=e;return t}function Ys(t,e){var n=[];return ae(t,function(r,u,o){e(r,u,o)&&n.push(r)}),n}function tt(t,e,n,r,u){var o=-1,c=t.length;for(n||(n=dh),u||(u=[]);++o<c;){var f=t[o];e>0&&n(f)?e>1?tt(f,e-1,n,r,u):ie(u,f):r||(u[u.length]=f)}return u}var Xr=wu(),Zs=wu(!0);function Ut(t,e){return t&&Xr(t,e,V)}function Qr(t,e){return t&&Zs(t,e,V)}function Jn(t,e){return re(e,function(n){return Vt(t[n])})}function we(t,e){e=ce(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Mt(e[n++])];return n&&n==r?t:i}function Xs(t,e,n){var r=e(t);return b(t)?r:ie(r,n(t))}function it(t){return t==null?t===i?ja:Va:ge&&ge in W(t)?oh(t):Ch(t)}function Vr(t,e){return t>e}function Sf(t,e){return t!=null&&M.call(t,e)}function Of(t,e){return t!=null&&e in W(t)}function Rf(t,e,n){return t>=nt(e,n)&&t<Q(e,n)}function kr(t,e,n){for(var r=n?Nr:Sn,u=t[0].length,o=t.length,c=o,f=d(o),l=1/0,v=[];c--;){var _=t[c];c&&e&&(_=K(_,lt(e))),l=nt(_.length,l),f[c]=!n&&(e||u>=120&&_.length>=120)?new _e(c&&_):i}_=t[0];var m=-1,C=f[0];t:for(;++m<u&&v.length<l;){var I=_[m],y=e?e(I):I;if(I=n||I!==0?I:0,!(C?en(C,y):r(v,y,n))){for(c=o;--c;){var L=f[c];if(!(L?en(L,y):r(t[c],y,n)))continue t}C&&C.push(y),v.push(I)}}return v}function bf(t,e,n,r){return Ut(t,function(u,o,c){e(r,n(u),o,c)}),r}function fn(t,e,n){e=ce(e,t),t=$u(t,e);var r=t==null?t:t[Mt(xt(e))];return r==null?i:ht(r,t,n)}function Qs(t){return J(t)&&it(t)==Re}function Tf(t){return J(t)&&it(t)==tn}function Lf(t){return J(t)&&it(t)==Xe}function hn(t,e,n,r,u){return t===e?!0:t==null||e==null||!J(t)&&!J(e)?t!==t&&e!==e:Hf(t,e,n,r,hn,u)}function Hf(t,e,n,r,u,o){var c=b(t),f=b(e),l=c?Pn:rt(t),v=f?Pn:rt(e);l=l==Re?Kt:l,v=v==Re?Kt:v;var _=l==Kt,m=v==Kt,C=l==v;if(C&&he(t)){if(!he(e))return!1;c=!0,_=!1}if(C&&!_)return o||(o=new Rt),c||Ge(t)?Ru(t,e,n,r,u,o):uh(t,e,l,n,r,u,o);if(!(n&ye)){var I=_&&M.call(t,"__wrapped__"),y=m&&M.call(e,"__wrapped__");if(I||y){var L=I?t.value():t,S=y?e.value():e;return o||(o=new Rt),u(L,S,n,r,o)}}return C?(o||(o=new Rt),ah(t,e,n,r,u,o)):!1}function Nf(t){return J(t)&&rt(t)==yt}function jr(t,e,n,r){var u=n.length,o=u,c=!r;if(t==null)return!o;for(t=W(t);u--;){var f=n[u];if(c&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<o;){f=n[u];var l=f[0],v=t[l],_=f[1];if(c&&f[2]){if(v===i&&!(l in t))return!1}else{var m=new Rt;if(r)var C=r(v,_,l,t,e,m);if(!(C===i?hn(_,v,ye|mn,r,m):C))return!1}}return!0}function Vs(t){if(!z(t)||vh(t))return!1;var e=Vt(t)?Hc:Io;return e.test(Ce(t))}function Df(t){return J(t)&&it(t)==Ve}function $f(t){return J(t)&&rt(t)==St}function qf(t){return J(t)&&cr(t.length)&&!!G[it(t)]}function ks(t){return typeof t=="function"?t:t==null?ft:typeof t=="object"?b(t)?eu(t[0],t[1]):tu(t):Pa(t)}function ti(t){if(!dn(t))return Fc(t);var e=[];for(var n in W(t))M.call(t,n)&&n!="constructor"&&e.push(n);return e}function Uf(t){if(!z(t))return Ph(t);var e=dn(t),n=[];for(var r in t)r=="constructor"&&(e||!M.call(t,r))||n.push(r);return n}function ei(t,e){return t<e}function js(t,e){var n=-1,r=ot(t)?d(t.length):[];return ae(t,function(u,o,c){r[++n]=e(u,o,c)}),r}function tu(t){var e=vi(t);return e.length==1&&e[0][2]?Nu(e[0][0],e[0][1]):function(n){return n===t||jr(n,t,e)}}function eu(t,e){return mi(t)&&Hu(e)?Nu(Mt(t),e):function(n){var r=Oi(n,t);return r===i&&r===e?Ri(n,t):hn(e,r,ye|mn)}}function Yn(t,e,n,r,u){t!==e&&Xr(e,function(o,c){if(u||(u=new Rt),z(o))Ff(t,e,c,n,Yn,r,u);else{var f=r?r(Pi(t,c),o,c+"",t,e,u):i;f===i&&(f=o),Yr(t,c,f)}},ct)}function Ff(t,e,n,r,u,o,c){var f=Pi(t,n),l=Pi(e,n),v=c.get(l);if(v){Yr(t,n,v);return}var _=o?o(f,l,n+"",t,e,c):i,m=_===i;if(m){var C=b(l),I=!C&&he(l),y=!C&&!I&&Ge(l);_=l,C||I||y?b(f)?_=f:Y(f)?_=at(f):I?(m=!1,_=pu(l,!0)):y?(m=!1,_=du(l,!0)):_=[]:vn(l)||Ae(l)?(_=f,Ae(f)?_=fa(f):(!z(f)||Vt(f))&&(_=Lu(l))):m=!1}m&&(c.set(l,_),u(_,l,r,o,c),c.delete(l)),Yr(t,n,_)}function nu(t,e){var n=t.length;if(n)return e+=e<0?n:0,Qt(e,n)?t[e]:i}function ru(t,e,n){e.length?e=K(e,function(o){return b(o)?function(c){return we(c,o.length===1?o[0]:o)}:o}):e=[ft];var r=-1;e=K(e,lt(E()));var u=js(t,function(o,c,f){var l=K(e,function(v){return v(o)});return{criteria:l,index:++r,value:o}});return hc(u,function(o,c){return kf(o,c,n)})}function Mf(t,e){return iu(t,e,function(n,r){return Ri(t,r)})}function iu(t,e,n){for(var r=-1,u=e.length,o={};++r<u;){var c=e[r],f=we(t,c);n(f,c)&&ln(o,ce(c,t),f)}return o}function Wf(t){return function(e){return we(e,t)}}function ni(t,e,n,r){var u=r?fc:Le,o=-1,c=e.length,f=t;for(t===e&&(e=at(e)),n&&(f=K(t,lt(n)));++o<c;)for(var l=0,v=e[o],_=n?n(v):v;(l=u(f,_,l,r))>-1;)f!==t&&qn.call(f,l,1),qn.call(t,l,1);return t}function su(t,e){for(var n=t?e.length:0,r=n-1;n--;){var u=e[n];if(n==r||u!==o){var o=u;Qt(u)?qn.call(t,u,1):ui(t,u)}}return t}function ri(t,e){return t+Mn(Fs()*(e-t+1))}function Bf(t,e,n,r){for(var u=-1,o=Q(Fn((e-t)/(n||1)),0),c=d(o);o--;)c[r?o:++u]=t,t+=n;return c}function ii(t,e){var n="";if(!t||e<1||e>ne)return n;do e%2&&(n+=t),e=Mn(e/2),e&&(t+=t);while(e);return n}function H(t,e){return Ci(Du(t,e,ft),t+"")}function Gf(t){return Bs(Ke(t))}function Kf(t,e){var n=Ke(t);return rr(n,me(e,0,n.length))}function ln(t,e,n,r){if(!z(t))return t;e=ce(e,t);for(var u=-1,o=e.length,c=o-1,f=t;f!=null&&++u<o;){var l=Mt(e[u]),v=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(u!=c){var _=f[l];v=r?r(_,l,f):i,v===i&&(v=z(_)?_:Qt(e[u+1])?[]:{})}on(f,l,v),f=f[l]}return t}var uu=Wn?function(t,e){return Wn.set(t,e),t}:ft,zf=Un?function(t,e){return Un(t,"toString",{configurable:!0,enumerable:!1,value:Ti(e),writable:!0})}:ft;function Jf(t){return rr(Ke(t))}function It(t,e,n){var r=-1,u=t.length;e<0&&(e=-e>u?0:u+e),n=n>u?u:n,n<0&&(n+=u),u=e>n?0:n-e>>>0,e>>>=0;for(var o=d(u);++r<u;)o[r]=t[r+e];return o}function Yf(t,e){var n;return ae(t,function(r,u,o){return n=e(r,u,o),!n}),!!n}function Zn(t,e,n){var r=0,u=t==null?r:t.length;if(typeof e=="number"&&e===e&&u<=Ya){for(;r<u;){var o=r+u>>>1,c=t[o];c!==null&&!dt(c)&&(n?c<=e:c<e)?r=o+1:u=o}return u}return si(t,e,ft,n)}function si(t,e,n,r){var u=0,o=t==null?0:t.length;if(o===0)return 0;e=n(e);for(var c=e!==e,f=e===null,l=dt(e),v=e===i;u<o;){var _=Mn((u+o)/2),m=n(t[_]),C=m!==i,I=m===null,y=m===m,L=dt(m);if(c)var S=r||y;else v?S=y&&(r||C):f?S=y&&C&&(r||!I):l?S=y&&C&&!I&&(r||!L):I||L?S=!1:S=r?m<=e:m<e;S?u=_+1:o=_}return nt(o,Ja)}function au(t,e){for(var n=-1,r=t.length,u=0,o=[];++n<r;){var c=t[n],f=e?e(c):c;if(!n||!bt(f,l)){var l=f;o[u++]=c===0?0:c}}return o}function ou(t){return typeof t=="number"?t:dt(t)?wn:+t}function pt(t){if(typeof t=="string")return t;if(b(t))return K(t,pt)+"";if(dt(t))return Ms?Ms.call(t):"";var e=t+"";return e=="0"&&1/t==-pe?"-0":e}function oe(t,e,n){var r=-1,u=Sn,o=t.length,c=!0,f=[],l=f;if(n)c=!1,u=Nr;else if(o>=w){var v=e?null:ih(t);if(v)return Rn(v);c=!1,u=en,l=new _e}else l=e?[]:f;t:for(;++r<o;){var _=t[r],m=e?e(_):_;if(_=n||_!==0?_:0,c&&m===m){for(var C=l.length;C--;)if(l[C]===m)continue t;e&&l.push(m),f.push(_)}else u(l,m,n)||(l!==f&&l.push(m),f.push(_))}return f}function ui(t,e){return e=ce(e,t),t=$u(t,e),t==null||delete t[Mt(xt(e))]}function cu(t,e,n,r){return ln(t,e,n(we(t,e)),r)}function Xn(t,e,n,r){for(var u=t.length,o=r?u:-1;(r?o--:++o<u)&&e(t[o],o,t););return n?It(t,r?0:o,r?o+1:u):It(t,r?o+1:0,r?u:o)}function fu(t,e){var n=t;return n instanceof D&&(n=n.value()),Dr(e,function(r,u){return u.func.apply(u.thisArg,ie([r],u.args))},n)}function ai(t,e,n){var r=t.length;if(r<2)return r?oe(t[0]):[];for(var u=-1,o=d(r);++u<r;)for(var c=t[u],f=-1;++f<r;)f!=u&&(o[u]=cn(o[u]||c,t[f],e,n));return oe(tt(o,1),e,n)}function hu(t,e,n){for(var r=-1,u=t.length,o=e.length,c={};++r<u;){var f=r<o?e[r]:i;n(c,t[r],f)}return c}function oi(t){return Y(t)?t:[]}function ci(t){return typeof t=="function"?t:ft}function ce(t,e){return b(t)?t:mi(t,e)?[t]:Mu(U(t))}var Zf=H;function fe(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:It(t,e,n)}var lu=Nc||function(t){return j.clearTimeout(t)};function pu(t,e){if(e)return t.slice();var n=t.length,r=Ns?Ns(n):new t.constructor(n);return t.copy(r),r}function fi(t){var e=new t.constructor(t.byteLength);return new Dn(e).set(new Dn(t)),e}function Xf(t,e){var n=e?fi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Qf(t){var e=new t.constructor(t.source,Qi.exec(t));return e.lastIndex=t.lastIndex,e}function Vf(t){return an?W(an.call(t)):{}}function du(t,e){var n=e?fi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function gu(t,e){if(t!==e){var n=t!==i,r=t===null,u=t===t,o=dt(t),c=e!==i,f=e===null,l=e===e,v=dt(e);if(!f&&!v&&!o&&t>e||o&&c&&l&&!f&&!v||r&&c&&l||!n&&l||!u)return 1;if(!r&&!o&&!v&&t<e||v&&n&&u&&!r&&!o||f&&n&&u||!c&&u||!l)return-1}return 0}function kf(t,e,n){for(var r=-1,u=t.criteria,o=e.criteria,c=u.length,f=n.length;++r<c;){var l=gu(u[r],o[r]);if(l){if(r>=f)return l;var v=n[r];return l*(v=="desc"?-1:1)}}return t.index-e.index}function vu(t,e,n,r){for(var u=-1,o=t.length,c=n.length,f=-1,l=e.length,v=Q(o-c,0),_=d(l+v),m=!r;++f<l;)_[f]=e[f];for(;++u<c;)(m||u<o)&&(_[n[u]]=t[u]);for(;v--;)_[f++]=t[u++];return _}function _u(t,e,n,r){for(var u=-1,o=t.length,c=-1,f=n.length,l=-1,v=e.length,_=Q(o-f,0),m=d(_+v),C=!r;++u<_;)m[u]=t[u];for(var I=u;++l<v;)m[I+l]=e[l];for(;++c<f;)(C||u<o)&&(m[I+n[c]]=t[u++]);return m}function at(t,e){var n=-1,r=t.length;for(e||(e=d(r));++n<r;)e[n]=t[n];return e}function Ft(t,e,n,r){var u=!n;n||(n={});for(var o=-1,c=e.length;++o<c;){var f=e[o],l=r?r(n[f],t[f],f,n,t):i;l===i&&(l=t[f]),u?Yt(n,f,l):on(n,f,l)}return n}function jf(t,e){return Ft(t,_i(t),e)}function th(t,e){return Ft(t,bu(t),e)}function Qn(t,e){return function(n,r){var u=b(n)?ic:Af,o=e?e():{};return u(n,t,E(r,2),o)}}function Me(t){return H(function(e,n){var r=-1,u=n.length,o=u>1?n[u-1]:i,c=u>2?n[2]:i;for(o=t.length>3&&typeof o=="function"?(u--,o):i,c&&st(n[0],n[1],c)&&(o=u<3?i:o,u=1),e=W(e);++r<u;){var f=n[r];f&&t(e,f,r,o)}return e})}function mu(t,e){return function(n,r){if(n==null)return n;if(!ot(n))return t(n,r);for(var u=n.length,o=e?u:-1,c=W(n);(e?o--:++o<u)&&r(c[o],o,c)!==!1;);return n}}function wu(t){return function(e,n,r){for(var u=-1,o=W(e),c=r(e),f=c.length;f--;){var l=c[t?f:++u];if(n(o[l],l,o)===!1)break}return e}}function eh(t,e,n){var r=e&_t,u=pn(t);function o(){var c=this&&this!==j&&this instanceof o?u:t;return c.apply(r?n:this,arguments)}return o}function Pu(t){return function(e){e=U(e);var n=He(e)?Ot(e):i,r=n?n[0]:e.charAt(0),u=n?fe(n,1).join(""):e.slice(1);return r[t]()+u}}function We(t){return function(e){return Dr(ma(_a(e).replace(Ko,"")),t,"")}}function pn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fe(t.prototype),r=t.apply(n,e);return z(r)?r:n}}function nh(t,e,n){var r=pn(t);function u(){for(var o=arguments.length,c=d(o),f=o,l=Be(u);f--;)c[f]=arguments[f];var v=o<3&&c[0]!==l&&c[o-1]!==l?[]:se(c,l);if(o-=v.length,o<n)return Eu(t,e,Vn,u.placeholder,i,c,v,i,i,n-o);var _=this&&this!==j&&this instanceof u?r:t;return ht(_,this,c)}return u}function Cu(t){return function(e,n,r){var u=W(e);if(!ot(e)){var o=E(n,3);e=V(e),n=function(f){return o(u[f],f,u)}}var c=t(e,n,r);return c>-1?u[o?e[c]:c]:i}}function Au(t){return Xt(function(e){var n=e.length,r=n,u=Ct.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if(typeof o!="function")throw new Pt(O);if(u&&!c&&er(o)=="wrapper")var c=new Ct([],!0)}for(r=c?r:n;++r<n;){o=e[r];var f=er(o),l=f=="wrapper"?gi(o):i;l&&wi(l[0])&&l[1]==(Gt|Dt|$t|Ye)&&!l[4].length&&l[9]==1?c=c[er(l[0])].apply(c,l[3]):c=o.length==1&&wi(o)?c[f]():c.thru(o)}return function(){var v=arguments,_=v[0];if(c&&v.length==1&&b(_))return c.plant(_).value();for(var m=0,C=n?e[m].apply(this,v):_;++m<n;)C=e[m].call(this,C);return C}})}function Vn(t,e,n,r,u,o,c,f,l,v){var _=e&Gt,m=e&_t,C=e&le,I=e&(Dt|Se),y=e&gr,L=C?i:pn(t);function S(){for(var N=arguments.length,$=d(N),gt=N;gt--;)$[gt]=arguments[gt];if(I)var ut=Be(S),vt=pc($,ut);if(r&&($=vu($,r,u,I)),o&&($=_u($,o,c,I)),N-=vt,I&&N<v){var Z=se($,ut);return Eu(t,e,Vn,S.placeholder,n,$,Z,f,l,v-N)}var Tt=m?n:this,jt=C?Tt[t]:t;return N=$.length,f?$=Ah($,f):y&&N>1&&$.reverse(),_&&l<N&&($.length=l),this&&this!==j&&this instanceof S&&(jt=L||pn(jt)),jt.apply(Tt,$)}return S}function Iu(t,e){return function(n,r){return bf(n,t,e(r),{})}}function kn(t,e){return function(n,r){var u;if(n===i&&r===i)return e;if(n!==i&&(u=n),r!==i){if(u===i)return r;typeof n=="string"||typeof r=="string"?(n=pt(n),r=pt(r)):(n=ou(n),r=ou(r)),u=t(n,r)}return u}}function hi(t){return Xt(function(e){return e=K(e,lt(E())),H(function(n){var r=this;return t(e,function(u){return ht(u,r,n)})})})}function jn(t,e){e=e===i?" ":pt(e);var n=e.length;if(n<2)return n?ii(e,t):e;var r=ii(e,Fn(t/Ne(e)));return He(e)?fe(Ot(r),0,t).join(""):r.slice(0,t)}function rh(t,e,n,r){var u=e&_t,o=pn(t);function c(){for(var f=-1,l=arguments.length,v=-1,_=r.length,m=d(_+l),C=this&&this!==j&&this instanceof c?o:t;++v<_;)m[v]=r[v];for(;l--;)m[v++]=arguments[++f];return ht(C,u?n:this,m)}return c}function xu(t){return function(e,n,r){return r&&typeof r!="number"&&st(e,n,r)&&(n=r=i),e=kt(e),n===i?(n=e,e=0):n=kt(n),r=r===i?e<n?1:-1:kt(r),Bf(e,n,r,t)}}function tr(t){return function(e,n){return typeof e=="string"&&typeof n=="string"||(e=Et(e),n=Et(n)),t(e,n)}}function Eu(t,e,n,r,u,o,c,f,l,v){var _=e&Dt,m=_?c:i,C=_?i:c,I=_?o:i,y=_?i:o;e|=_?$t:Oe,e&=~(_?Oe:$t),e&Gi||(e&=~(_t|le));var L=[t,e,u,I,m,y,C,f,l,v],S=n.apply(i,L);return wi(t)&&qu(S,L),S.placeholder=r,Uu(S,t,e)}function li(t){var e=X[t];return function(n,r){if(n=Et(n),r=r==null?0:nt(T(r),292),r&&Us(n)){var u=(U(n)+"e").split("e"),o=e(u[0]+"e"+(+u[1]+r));return u=(U(o)+"e").split("e"),+(u[0]+"e"+(+u[1]-r))}return e(n)}}var ih=qe&&1/Rn(new qe([,-0]))[1]==pe?function(t){return new qe(t)}:Ni;function yu(t){return function(e){var n=rt(e);return n==yt?Br(e):n==St?Pc(e):lc(e,t(e))}}function Zt(t,e,n,r,u,o,c,f){var l=e&le;if(!l&&typeof t!="function")throw new Pt(O);var v=r?r.length:0;if(v||(e&=~($t|Oe),r=u=i),c=c===i?c:Q(T(c),0),f=f===i?f:T(f),v-=u?u.length:0,e&Oe){var _=r,m=u;r=u=i}var C=l?i:gi(t),I=[t,e,n,r,u,_,m,o,c,f];if(C&&wh(I,C),t=I[0],e=I[1],n=I[2],r=I[3],u=I[4],f=I[9]=I[9]===i?l?0:t.length:Q(I[9]-v,0),!f&&e&(Dt|Se)&&(e&=~(Dt|Se)),!e||e==_t)var y=eh(t,e,n);else e==Dt||e==Se?y=nh(t,e,f):(e==$t||e==(_t|$t))&&!u.length?y=rh(t,e,n,r):y=Vn.apply(i,I);var L=C?uu:qu;return Uu(L(y,I),t,e)}function Su(t,e,n,r){return t===i||bt(t,$e[n])&&!M.call(r,n)?e:t}function Ou(t,e,n,r,u,o){return z(t)&&z(e)&&(o.set(e,t),Yn(t,e,i,Ou,o),o.delete(e)),t}function sh(t){return vn(t)?i:t}function Ru(t,e,n,r,u,o){var c=n&ye,f=t.length,l=e.length;if(f!=l&&!(c&&l>f))return!1;var v=o.get(t),_=o.get(e);if(v&&_)return v==e&&_==t;var m=-1,C=!0,I=n&mn?new _e:i;for(o.set(t,e),o.set(e,t);++m<f;){var y=t[m],L=e[m];if(r)var S=c?r(L,y,m,e,t,o):r(y,L,m,t,e,o);if(S!==i){if(S)continue;C=!1;break}if(I){if(!$r(e,function(N,$){if(!en(I,$)&&(y===N||u(y,N,n,r,o)))return I.push($)})){C=!1;break}}else if(!(y===L||u(y,L,n,r,o))){C=!1;break}}return o.delete(t),o.delete(e),C}function uh(t,e,n,r,u,o,c){switch(n){case be:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case tn:return!(t.byteLength!=e.byteLength||!o(new Dn(t),new Dn(e)));case Ze:case Xe:case Qe:return bt(+t,+e);case Cn:return t.name==e.name&&t.message==e.message;case Ve:case ke:return t==e+"";case yt:var f=Br;case St:var l=r&ye;if(f||(f=Rn),t.size!=e.size&&!l)return!1;var v=c.get(t);if(v)return v==e;r|=mn,c.set(t,e);var _=Ru(f(t),f(e),r,u,o,c);return c.delete(t),_;case In:if(an)return an.call(t)==an.call(e)}return!1}function ah(t,e,n,r,u,o){var c=n&ye,f=pi(t),l=f.length,v=pi(e),_=v.length;if(l!=_&&!c)return!1;for(var m=l;m--;){var C=f[m];if(!(c?C in e:M.call(e,C)))return!1}var I=o.get(t),y=o.get(e);if(I&&y)return I==e&&y==t;var L=!0;o.set(t,e),o.set(e,t);for(var S=c;++m<l;){C=f[m];var N=t[C],$=e[C];if(r)var gt=c?r($,N,C,e,t,o):r(N,$,C,t,e,o);if(!(gt===i?N===$||u(N,$,n,r,o):gt)){L=!1;break}S||(S=C=="constructor")}if(L&&!S){var ut=t.constructor,vt=e.constructor;ut!=vt&&"constructor"in t&&"constructor"in e&&!(typeof ut=="function"&&ut instanceof ut&&typeof vt=="function"&&vt instanceof vt)&&(L=!1)}return o.delete(t),o.delete(e),L}function Xt(t){return Ci(Du(t,i,Ku),t+"")}function pi(t){return Xs(t,V,_i)}function di(t){return Xs(t,ct,bu)}var gi=Wn?function(t){return Wn.get(t)}:Ni;function er(t){for(var e=t.name+"",n=Ue[e],r=M.call(Ue,e)?n.length:0;r--;){var u=n[r],o=u.func;if(o==null||o==t)return u.name}return e}function Be(t){var e=M.call(a,"placeholder")?a:t;return e.placeholder}function E(){var t=a.iteratee||Li;return t=t===Li?ks:t,arguments.length?t(arguments[0],arguments[1]):t}function nr(t,e){var n=t.__data__;return gh(e)?n[typeof e=="string"?"string":"hash"]:n.map}function vi(t){for(var e=V(t),n=e.length;n--;){var r=e[n],u=t[r];e[n]=[r,u,Hu(u)]}return e}function Pe(t,e){var n=_c(t,e);return Vs(n)?n:i}function oh(t){var e=M.call(t,ge),n=t[ge];try{t[ge]=i;var r=!0}catch{}var u=Hn.call(t);return r&&(e?t[ge]=n:delete t[ge]),u}var _i=Kr?function(t){return t==null?[]:(t=W(t),re(Kr(t),function(e){return $s.call(t,e)}))}:Di,bu=Kr?function(t){for(var e=[];t;)ie(e,_i(t)),t=$n(t);return e}:Di,rt=it;(zr&&rt(new zr(new ArrayBuffer(1)))!=be||rn&&rt(new rn)!=yt||Jr&&rt(Jr.resolve())!=Ji||qe&&rt(new qe)!=St||sn&&rt(new sn)!=je)&&(rt=function(t){var e=it(t),n=e==Kt?t.constructor:i,r=n?Ce(n):"";if(r)switch(r){case Gc:return be;case Kc:return yt;case zc:return Ji;case Jc:return St;case Yc:return je}return e});function ch(t,e,n){for(var r=-1,u=n.length;++r<u;){var o=n[r],c=o.size;switch(o.type){case"drop":t+=c;break;case"dropRight":e-=c;break;case"take":e=nt(e,t+c);break;case"takeRight":t=Q(t,e-c);break}}return{start:t,end:e}}function fh(t){var e=t.match(go);return e?e[1].split(vo):[]}function Tu(t,e,n){e=ce(e,t);for(var r=-1,u=e.length,o=!1;++r<u;){var c=Mt(e[r]);if(!(o=t!=null&&n(t,c)))break;t=t[c]}return o||++r!=u?o:(u=t==null?0:t.length,!!u&&cr(u)&&Qt(c,u)&&(b(t)||Ae(t)))}function hh(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&M.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Lu(t){return typeof t.constructor=="function"&&!dn(t)?Fe($n(t)):{}}function lh(t,e,n){var r=t.constructor;switch(e){case tn:return fi(t);case Ze:case Xe:return new r(+t);case be:return Xf(t,n);case vr:case _r:case mr:case wr:case Pr:case Cr:case Ar:case Ir:case xr:return du(t,n);case yt:return new r;case Qe:case ke:return new r(t);case Ve:return Qf(t);case St:return new r;case In:return Vf(t)}}function ph(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(po,`{
/* [wrapped with `+e+`] */
`)}function dh(t){return b(t)||Ae(t)||!!(qs&&t&&t[qs])}function Qt(t,e){var n=typeof t;return e=e??ne,!!e&&(n=="number"||n!="symbol"&&Eo.test(t))&&t>-1&&t%1==0&&t<e}function st(t,e,n){if(!z(n))return!1;var r=typeof e;return(r=="number"?ot(n)&&Qt(e,n.length):r=="string"&&e in n)?bt(n[e],t):!1}function mi(t,e){if(b(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||dt(t)?!0:co.test(t)||!oo.test(t)||e!=null&&t in W(e)}function gh(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function wi(t){var e=er(t),n=a[e];if(typeof n!="function"||!(e in D.prototype))return!1;if(t===n)return!0;var r=gi(n);return!!r&&t===r[0]}function vh(t){return!!Hs&&Hs in t}var _h=Tn?Vt:$i;function dn(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||$e;return t===n}function Hu(t){return t===t&&!z(t)}function Nu(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==i||t in W(n))}}function mh(t){var e=ar(t,function(r){return n.size===Je&&n.clear(),r}),n=e.cache;return e}function wh(t,e){var n=t[1],r=e[1],u=n|r,o=u<(_t|le|Gt),c=r==Gt&&n==Dt||r==Gt&&n==Ye&&t[7].length<=e[8]||r==(Gt|Ye)&&e[7].length<=e[8]&&n==Dt;if(!(o||c))return t;r&_t&&(t[2]=e[2],u|=n&_t?0:Gi);var f=e[3];if(f){var l=t[3];t[3]=l?vu(l,f,e[4]):f,t[4]=l?se(t[3],xe):e[4]}return f=e[5],f&&(l=t[5],t[5]=l?_u(l,f,e[6]):f,t[6]=l?se(t[5],xe):e[6]),f=e[7],f&&(t[7]=f),r&Gt&&(t[8]=t[8]==null?e[8]:nt(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=u,t}function Ph(t){var e=[];if(t!=null)for(var n in W(t))e.push(n);return e}function Ch(t){return Hn.call(t)}function Du(t,e,n){return e=Q(e===i?t.length-1:e,0),function(){for(var r=arguments,u=-1,o=Q(r.length-e,0),c=d(o);++u<o;)c[u]=r[e+u];u=-1;for(var f=d(e+1);++u<e;)f[u]=r[u];return f[e]=n(c),ht(t,this,f)}}function $u(t,e){return e.length<2?t:we(t,It(e,0,-1))}function Ah(t,e){for(var n=t.length,r=nt(e.length,n),u=at(t);r--;){var o=e[r];t[r]=Qt(o,n)?u[o]:i}return t}function Pi(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var qu=Fu(uu),gn=$c||function(t,e){return j.setTimeout(t,e)},Ci=Fu(zf);function Uu(t,e,n){var r=e+"";return Ci(t,ph(r,Ih(fh(r),n)))}function Fu(t){var e=0,n=0;return function(){var r=Mc(),u=Ba-(r-n);if(n=r,u>0){if(++e>=Wa)return arguments[0]}else e=0;return t.apply(i,arguments)}}function rr(t,e){var n=-1,r=t.length,u=r-1;for(e=e===i?r:e;++n<e;){var o=ri(n,u),c=t[o];t[o]=t[n],t[n]=c}return t.length=e,t}var Mu=mh(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(fo,function(n,r,u,o){e.push(u?o.replace(wo,"$1"):r||n)}),e});function Mt(t){if(typeof t=="string"||dt(t))return t;var e=t+"";return e=="0"&&1/t==-pe?"-0":e}function Ce(t){if(t!=null){try{return Ln.call(t)}catch{}try{return t+""}catch{}}return""}function Ih(t,e){return wt(Za,function(n){var r="_."+n[0];e&n[1]&&!Sn(t,r)&&t.push(r)}),t.sort()}function Wu(t){if(t instanceof D)return t.clone();var e=new Ct(t.__wrapped__,t.__chain__);return e.__actions__=at(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function xh(t,e,n){(n?st(t,e,n):e===i)?e=1:e=Q(T(e),0);var r=t==null?0:t.length;if(!r||e<1)return[];for(var u=0,o=0,c=d(Fn(r/e));u<r;)c[o++]=It(t,u,u+=e);return c}function Eh(t){for(var e=-1,n=t==null?0:t.length,r=0,u=[];++e<n;){var o=t[e];o&&(u[r++]=o)}return u}function yh(){var t=arguments.length;if(!t)return[];for(var e=d(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return ie(b(n)?at(n):[n],tt(e,1))}var Sh=H(function(t,e){return Y(t)?cn(t,tt(e,1,Y,!0)):[]}),Oh=H(function(t,e){var n=xt(e);return Y(n)&&(n=i),Y(t)?cn(t,tt(e,1,Y,!0),E(n,2)):[]}),Rh=H(function(t,e){var n=xt(e);return Y(n)&&(n=i),Y(t)?cn(t,tt(e,1,Y,!0),i,n):[]});function bh(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===i?1:T(e),It(t,e<0?0:e,r)):[]}function Th(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===i?1:T(e),e=r-e,It(t,0,e<0?0:e)):[]}function Lh(t,e){return t&&t.length?Xn(t,E(e,3),!0,!0):[]}function Hh(t,e){return t&&t.length?Xn(t,E(e,3),!0):[]}function Nh(t,e,n,r){var u=t==null?0:t.length;return u?(n&&typeof n!="number"&&st(t,e,n)&&(n=0,r=u),yf(t,e,n,r)):[]}function Bu(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var u=n==null?0:T(n);return u<0&&(u=Q(r+u,0)),On(t,E(e,3),u)}function Gu(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var u=r-1;return n!==i&&(u=T(n),u=n<0?Q(r+u,0):nt(u,r-1)),On(t,E(e,3),u,!0)}function Ku(t){var e=t==null?0:t.length;return e?tt(t,1):[]}function Dh(t){var e=t==null?0:t.length;return e?tt(t,pe):[]}function $h(t,e){var n=t==null?0:t.length;return n?(e=e===i?1:T(e),tt(t,e)):[]}function qh(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var u=t[e];r[u[0]]=u[1]}return r}function zu(t){return t&&t.length?t[0]:i}function Uh(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var u=n==null?0:T(n);return u<0&&(u=Q(r+u,0)),Le(t,e,u)}function Fh(t){var e=t==null?0:t.length;return e?It(t,0,-1):[]}var Mh=H(function(t){var e=K(t,oi);return e.length&&e[0]===t[0]?kr(e):[]}),Wh=H(function(t){var e=xt(t),n=K(t,oi);return e===xt(n)?e=i:n.pop(),n.length&&n[0]===t[0]?kr(n,E(e,2)):[]}),Bh=H(function(t){var e=xt(t),n=K(t,oi);return e=typeof e=="function"?e:i,e&&n.pop(),n.length&&n[0]===t[0]?kr(n,i,e):[]});function Gh(t,e){return t==null?"":Uc.call(t,e)}function xt(t){var e=t==null?0:t.length;return e?t[e-1]:i}function Kh(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var u=r;return n!==i&&(u=T(n),u=u<0?Q(r+u,0):nt(u,r-1)),e===e?Ac(t,e,u):On(t,Es,u,!0)}function zh(t,e){return t&&t.length?nu(t,T(e)):i}var Jh=H(Ju);function Ju(t,e){return t&&t.length&&e&&e.length?ni(t,e):t}function Yh(t,e,n){return t&&t.length&&e&&e.length?ni(t,e,E(n,2)):t}function Zh(t,e,n){return t&&t.length&&e&&e.length?ni(t,e,i,n):t}var Xh=Xt(function(t,e){var n=t==null?0:t.length,r=Zr(t,e);return su(t,K(e,function(u){return Qt(u,n)?+u:u}).sort(gu)),r});function Qh(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,u=[],o=t.length;for(e=E(e,3);++r<o;){var c=t[r];e(c,r,t)&&(n.push(c),u.push(r))}return su(t,u),n}function Ai(t){return t==null?t:Bc.call(t)}function Vh(t,e,n){var r=t==null?0:t.length;return r?(n&&typeof n!="number"&&st(t,e,n)?(e=0,n=r):(e=e==null?0:T(e),n=n===i?r:T(n)),It(t,e,n)):[]}function kh(t,e){return Zn(t,e)}function jh(t,e,n){return si(t,e,E(n,2))}function tl(t,e){var n=t==null?0:t.length;if(n){var r=Zn(t,e);if(r<n&&bt(t[r],e))return r}return-1}function el(t,e){return Zn(t,e,!0)}function nl(t,e,n){return si(t,e,E(n,2),!0)}function rl(t,e){var n=t==null?0:t.length;if(n){var r=Zn(t,e,!0)-1;if(bt(t[r],e))return r}return-1}function il(t){return t&&t.length?au(t):[]}function sl(t,e){return t&&t.length?au(t,E(e,2)):[]}function ul(t){var e=t==null?0:t.length;return e?It(t,1,e):[]}function al(t,e,n){return t&&t.length?(e=n||e===i?1:T(e),It(t,0,e<0?0:e)):[]}function ol(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===i?1:T(e),e=r-e,It(t,e<0?0:e,r)):[]}function cl(t,e){return t&&t.length?Xn(t,E(e,3),!1,!0):[]}function fl(t,e){return t&&t.length?Xn(t,E(e,3)):[]}var hl=H(function(t){return oe(tt(t,1,Y,!0))}),ll=H(function(t){var e=xt(t);return Y(e)&&(e=i),oe(tt(t,1,Y,!0),E(e,2))}),pl=H(function(t){var e=xt(t);return e=typeof e=="function"?e:i,oe(tt(t,1,Y,!0),i,e)});function dl(t){return t&&t.length?oe(t):[]}function gl(t,e){return t&&t.length?oe(t,E(e,2)):[]}function vl(t,e){return e=typeof e=="function"?e:i,t&&t.length?oe(t,i,e):[]}function Ii(t){if(!(t&&t.length))return[];var e=0;return t=re(t,function(n){if(Y(n))return e=Q(n.length,e),!0}),Mr(e,function(n){return K(t,qr(n))})}function Yu(t,e){if(!(t&&t.length))return[];var n=Ii(t);return e==null?n:K(n,function(r){return ht(e,i,r)})}var _l=H(function(t,e){return Y(t)?cn(t,e):[]}),ml=H(function(t){return ai(re(t,Y))}),wl=H(function(t){var e=xt(t);return Y(e)&&(e=i),ai(re(t,Y),E(e,2))}),Pl=H(function(t){var e=xt(t);return e=typeof e=="function"?e:i,ai(re(t,Y),i,e)}),Cl=H(Ii);function Al(t,e){return hu(t||[],e||[],on)}function Il(t,e){return hu(t||[],e||[],ln)}var xl=H(function(t){var e=t.length,n=e>1?t[e-1]:i;return n=typeof n=="function"?(t.pop(),n):i,Yu(t,n)});function Zu(t){var e=a(t);return e.__chain__=!0,e}function El(t,e){return e(t),t}function ir(t,e){return e(t)}var yl=Xt(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,u=function(o){return Zr(o,t)};return e>1||this.__actions__.length||!(r instanceof D)||!Qt(n)?this.thru(u):(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:ir,args:[u],thisArg:i}),new Ct(r,this.__chain__).thru(function(o){return e&&!o.length&&o.push(i),o}))});function Sl(){return Zu(this)}function Ol(){return new Ct(this.value(),this.__chain__)}function Rl(){this.__values__===i&&(this.__values__=oa(this.value()));var t=this.__index__>=this.__values__.length,e=t?i:this.__values__[this.__index__++];return{done:t,value:e}}function bl(){return this}function Tl(t){for(var e,n=this;n instanceof Gn;){var r=Wu(n);r.__index__=0,r.__values__=i,e?u.__wrapped__=r:e=r;var u=r;n=n.__wrapped__}return u.__wrapped__=t,e}function Ll(){var t=this.__wrapped__;if(t instanceof D){var e=t;return this.__actions__.length&&(e=new D(this)),e=e.reverse(),e.__actions__.push({func:ir,args:[Ai],thisArg:i}),new Ct(e,this.__chain__)}return this.thru(Ai)}function Hl(){return fu(this.__wrapped__,this.__actions__)}var Nl=Qn(function(t,e,n){M.call(t,n)?++t[n]:Yt(t,n,1)});function Dl(t,e,n){var r=b(t)?Is:Ef;return n&&st(t,e,n)&&(e=i),r(t,E(e,3))}function $l(t,e){var n=b(t)?re:Ys;return n(t,E(e,3))}var ql=Cu(Bu),Ul=Cu(Gu);function Fl(t,e){return tt(sr(t,e),1)}function Ml(t,e){return tt(sr(t,e),pe)}function Wl(t,e,n){return n=n===i?1:T(n),tt(sr(t,e),n)}function Xu(t,e){var n=b(t)?wt:ae;return n(t,E(e,3))}function Qu(t,e){var n=b(t)?sc:Js;return n(t,E(e,3))}var Bl=Qn(function(t,e,n){M.call(t,n)?t[n].push(e):Yt(t,n,[e])});function Gl(t,e,n,r){t=ot(t)?t:Ke(t),n=n&&!r?T(n):0;var u=t.length;return n<0&&(n=Q(u+n,0)),fr(t)?n<=u&&t.indexOf(e,n)>-1:!!u&&Le(t,e,n)>-1}var Kl=H(function(t,e,n){var r=-1,u=typeof e=="function",o=ot(t)?d(t.length):[];return ae(t,function(c){o[++r]=u?ht(e,c,n):fn(c,e,n)}),o}),zl=Qn(function(t,e,n){Yt(t,n,e)});function sr(t,e){var n=b(t)?K:js;return n(t,E(e,3))}function Jl(t,e,n,r){return t==null?[]:(b(e)||(e=e==null?[]:[e]),n=r?i:n,b(n)||(n=n==null?[]:[n]),ru(t,e,n))}var Yl=Qn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function Zl(t,e,n){var r=b(t)?Dr:Ss,u=arguments.length<3;return r(t,E(e,4),n,u,ae)}function Xl(t,e,n){var r=b(t)?uc:Ss,u=arguments.length<3;return r(t,E(e,4),n,u,Js)}function Ql(t,e){var n=b(t)?re:Ys;return n(t,or(E(e,3)))}function Vl(t){var e=b(t)?Bs:Gf;return e(t)}function kl(t,e,n){(n?st(t,e,n):e===i)?e=1:e=T(e);var r=b(t)?Pf:Kf;return r(t,e)}function jl(t){var e=b(t)?Cf:Jf;return e(t)}function tp(t){if(t==null)return 0;if(ot(t))return fr(t)?Ne(t):t.length;var e=rt(t);return e==yt||e==St?t.size:ti(t).length}function ep(t,e,n){var r=b(t)?$r:Yf;return n&&st(t,e,n)&&(e=i),r(t,E(e,3))}var np=H(function(t,e){if(t==null)return[];var n=e.length;return n>1&&st(t,e[0],e[1])?e=[]:n>2&&st(e[0],e[1],e[2])&&(e=[e[0]]),ru(t,tt(e,1),[])}),ur=Dc||function(){return j.Date.now()};function rp(t,e){if(typeof e!="function")throw new Pt(O);return t=T(t),function(){if(--t<1)return e.apply(this,arguments)}}function Vu(t,e,n){return e=n?i:e,e=t&&e==null?t.length:e,Zt(t,Gt,i,i,i,i,e)}function ku(t,e){var n;if(typeof e!="function")throw new Pt(O);return t=T(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var xi=H(function(t,e,n){var r=_t;if(n.length){var u=se(n,Be(xi));r|=$t}return Zt(t,r,e,n,u)}),ju=H(function(t,e,n){var r=_t|le;if(n.length){var u=se(n,Be(ju));r|=$t}return Zt(e,r,t,n,u)});function ta(t,e,n){e=n?i:e;var r=Zt(t,Dt,i,i,i,i,i,e);return r.placeholder=ta.placeholder,r}function ea(t,e,n){e=n?i:e;var r=Zt(t,Se,i,i,i,i,i,e);return r.placeholder=ea.placeholder,r}function na(t,e,n){var r,u,o,c,f,l,v=0,_=!1,m=!1,C=!0;if(typeof t!="function")throw new Pt(O);e=Et(e)||0,z(n)&&(_=!!n.leading,m="maxWait"in n,o=m?Q(Et(n.maxWait)||0,e):o,C="trailing"in n?!!n.trailing:C);function I(Z){var Tt=r,jt=u;return r=u=i,v=Z,c=t.apply(jt,Tt),c}function y(Z){return v=Z,f=gn(N,e),_?I(Z):c}function L(Z){var Tt=Z-l,jt=Z-v,Ca=e-Tt;return m?nt(Ca,o-jt):Ca}function S(Z){var Tt=Z-l,jt=Z-v;return l===i||Tt>=e||Tt<0||m&&jt>=o}function N(){var Z=ur();if(S(Z))return $(Z);f=gn(N,L(Z))}function $(Z){return f=i,C&&r?I(Z):(r=u=i,c)}function gt(){f!==i&&lu(f),v=0,r=l=u=f=i}function ut(){return f===i?c:$(ur())}function vt(){var Z=ur(),Tt=S(Z);if(r=arguments,u=this,l=Z,Tt){if(f===i)return y(l);if(m)return lu(f),f=gn(N,e),I(l)}return f===i&&(f=gn(N,e)),c}return vt.cancel=gt,vt.flush=ut,vt}var ip=H(function(t,e){return zs(t,1,e)}),sp=H(function(t,e,n){return zs(t,Et(e)||0,n)});function up(t){return Zt(t,gr)}function ar(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new Pt(O);var n=function(){var r=arguments,u=e?e.apply(this,r):r[0],o=n.cache;if(o.has(u))return o.get(u);var c=t.apply(this,r);return n.cache=o.set(u,c)||o,c};return n.cache=new(ar.Cache||Jt),n}ar.Cache=Jt;function or(t){if(typeof t!="function")throw new Pt(O);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ap(t){return ku(2,t)}var op=Zf(function(t,e){e=e.length==1&&b(e[0])?K(e[0],lt(E())):K(tt(e,1),lt(E()));var n=e.length;return H(function(r){for(var u=-1,o=nt(r.length,n);++u<o;)r[u]=e[u].call(this,r[u]);return ht(t,this,r)})}),Ei=H(function(t,e){var n=se(e,Be(Ei));return Zt(t,$t,i,e,n)}),ra=H(function(t,e){var n=se(e,Be(ra));return Zt(t,Oe,i,e,n)}),cp=Xt(function(t,e){return Zt(t,Ye,i,i,i,e)});function fp(t,e){if(typeof t!="function")throw new Pt(O);return e=e===i?e:T(e),H(t,e)}function hp(t,e){if(typeof t!="function")throw new Pt(O);return e=e==null?0:Q(T(e),0),H(function(n){var r=n[e],u=fe(n,0,e);return r&&ie(u,r),ht(t,this,u)})}function lp(t,e,n){var r=!0,u=!0;if(typeof t!="function")throw new Pt(O);return z(n)&&(r="leading"in n?!!n.leading:r,u="trailing"in n?!!n.trailing:u),na(t,e,{leading:r,maxWait:e,trailing:u})}function pp(t){return Vu(t,1)}function dp(t,e){return Ei(ci(e),t)}function gp(){if(!arguments.length)return[];var t=arguments[0];return b(t)?t:[t]}function vp(t){return At(t,Ee)}function _p(t,e){return e=typeof e=="function"?e:i,At(t,Ee,e)}function mp(t){return At(t,Nt|Ee)}function wp(t,e){return e=typeof e=="function"?e:i,At(t,Nt|Ee,e)}function Pp(t,e){return e==null||Ks(t,e,V(e))}function bt(t,e){return t===e||t!==t&&e!==e}var Cp=tr(Vr),Ap=tr(function(t,e){return t>=e}),Ae=Qs(function(){return arguments}())?Qs:function(t){return J(t)&&M.call(t,"callee")&&!$s.call(t,"callee")},b=d.isArray,Ip=_s?lt(_s):Tf;function ot(t){return t!=null&&cr(t.length)&&!Vt(t)}function Y(t){return J(t)&&ot(t)}function xp(t){return t===!0||t===!1||J(t)&&it(t)==Ze}var he=qc||$i,Ep=ms?lt(ms):Lf;function yp(t){return J(t)&&t.nodeType===1&&!vn(t)}function Sp(t){if(t==null)return!0;if(ot(t)&&(b(t)||typeof t=="string"||typeof t.splice=="function"||he(t)||Ge(t)||Ae(t)))return!t.length;var e=rt(t);if(e==yt||e==St)return!t.size;if(dn(t))return!ti(t).length;for(var n in t)if(M.call(t,n))return!1;return!0}function Op(t,e){return hn(t,e)}function Rp(t,e,n){n=typeof n=="function"?n:i;var r=n?n(t,e):i;return r===i?hn(t,e,i,n):!!r}function yi(t){if(!J(t))return!1;var e=it(t);return e==Cn||e==Qa||typeof t.message=="string"&&typeof t.name=="string"&&!vn(t)}function bp(t){return typeof t=="number"&&Us(t)}function Vt(t){if(!z(t))return!1;var e=it(t);return e==An||e==zi||e==Xa||e==ka}function ia(t){return typeof t=="number"&&t==T(t)}function cr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ne}function z(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function J(t){return t!=null&&typeof t=="object"}var sa=ws?lt(ws):Nf;function Tp(t,e){return t===e||jr(t,e,vi(e))}function Lp(t,e,n){return n=typeof n=="function"?n:i,jr(t,e,vi(e),n)}function Hp(t){return ua(t)&&t!=+t}function Np(t){if(_h(t))throw new R(x);return Vs(t)}function Dp(t){return t===null}function $p(t){return t==null}function ua(t){return typeof t=="number"||J(t)&&it(t)==Qe}function vn(t){if(!J(t)||it(t)!=Kt)return!1;var e=$n(t);if(e===null)return!0;var n=M.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Ln.call(n)==Tc}var Si=Ps?lt(Ps):Df;function qp(t){return ia(t)&&t>=-ne&&t<=ne}var aa=Cs?lt(Cs):$f;function fr(t){return typeof t=="string"||!b(t)&&J(t)&&it(t)==ke}function dt(t){return typeof t=="symbol"||J(t)&&it(t)==In}var Ge=As?lt(As):qf;function Up(t){return t===i}function Fp(t){return J(t)&&rt(t)==je}function Mp(t){return J(t)&&it(t)==to}var Wp=tr(ei),Bp=tr(function(t,e){return t<=e});function oa(t){if(!t)return[];if(ot(t))return fr(t)?Ot(t):at(t);if(nn&&t[nn])return wc(t[nn]());var e=rt(t),n=e==yt?Br:e==St?Rn:Ke;return n(t)}function kt(t){if(!t)return t===0?t:0;if(t=Et(t),t===pe||t===-pe){var e=t<0?-1:1;return e*za}return t===t?t:0}function T(t){var e=kt(t),n=e%1;return e===e?n?e-n:e:0}function ca(t){return t?me(T(t),0,qt):0}function Et(t){if(typeof t=="number")return t;if(dt(t))return wn;if(z(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=z(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Os(t);var n=Ao.test(t);return n||xo.test(t)?nc(t.slice(2),n?2:8):Co.test(t)?wn:+t}function fa(t){return Ft(t,ct(t))}function Gp(t){return t?me(T(t),-ne,ne):t===0?t:0}function U(t){return t==null?"":pt(t)}var Kp=Me(function(t,e){if(dn(e)||ot(e)){Ft(e,V(e),t);return}for(var n in e)M.call(e,n)&&on(t,n,e[n])}),ha=Me(function(t,e){Ft(e,ct(e),t)}),hr=Me(function(t,e,n,r){Ft(e,ct(e),t,r)}),zp=Me(function(t,e,n,r){Ft(e,V(e),t,r)}),Jp=Xt(Zr);function Yp(t,e){var n=Fe(t);return e==null?n:Gs(n,e)}var Zp=H(function(t,e){t=W(t);var n=-1,r=e.length,u=r>2?e[2]:i;for(u&&st(e[0],e[1],u)&&(r=1);++n<r;)for(var o=e[n],c=ct(o),f=-1,l=c.length;++f<l;){var v=c[f],_=t[v];(_===i||bt(_,$e[v])&&!M.call(t,v))&&(t[v]=o[v])}return t}),Xp=H(function(t){return t.push(i,Ou),ht(la,i,t)});function Qp(t,e){return xs(t,E(e,3),Ut)}function Vp(t,e){return xs(t,E(e,3),Qr)}function kp(t,e){return t==null?t:Xr(t,E(e,3),ct)}function jp(t,e){return t==null?t:Zs(t,E(e,3),ct)}function td(t,e){return t&&Ut(t,E(e,3))}function ed(t,e){return t&&Qr(t,E(e,3))}function nd(t){return t==null?[]:Jn(t,V(t))}function rd(t){return t==null?[]:Jn(t,ct(t))}function Oi(t,e,n){var r=t==null?i:we(t,e);return r===i?n:r}function id(t,e){return t!=null&&Tu(t,e,Sf)}function Ri(t,e){return t!=null&&Tu(t,e,Of)}var sd=Iu(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=Hn.call(e)),t[e]=n},Ti(ft)),ud=Iu(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=Hn.call(e)),M.call(t,e)?t[e].push(n):t[e]=[n]},E),ad=H(fn);function V(t){return ot(t)?Ws(t):ti(t)}function ct(t){return ot(t)?Ws(t,!0):Uf(t)}function od(t,e){var n={};return e=E(e,3),Ut(t,function(r,u,o){Yt(n,e(r,u,o),r)}),n}function cd(t,e){var n={};return e=E(e,3),Ut(t,function(r,u,o){Yt(n,u,e(r,u,o))}),n}var fd=Me(function(t,e,n){Yn(t,e,n)}),la=Me(function(t,e,n,r){Yn(t,e,n,r)}),hd=Xt(function(t,e){var n={};if(t==null)return n;var r=!1;e=K(e,function(o){return o=ce(o,t),r||(r=o.length>1),o}),Ft(t,di(t),n),r&&(n=At(n,Nt|Bt|Ee,sh));for(var u=e.length;u--;)ui(n,e[u]);return n});function ld(t,e){return pa(t,or(E(e)))}var pd=Xt(function(t,e){return t==null?{}:Mf(t,e)});function pa(t,e){if(t==null)return{};var n=K(di(t),function(r){return[r]});return e=E(e),iu(t,n,function(r,u){return e(r,u[0])})}function dd(t,e,n){e=ce(e,t);var r=-1,u=e.length;for(u||(u=1,t=i);++r<u;){var o=t==null?i:t[Mt(e[r])];o===i&&(r=u,o=n),t=Vt(o)?o.call(t):o}return t}function gd(t,e,n){return t==null?t:ln(t,e,n)}function vd(t,e,n,r){return r=typeof r=="function"?r:i,t==null?t:ln(t,e,n,r)}var da=yu(V),ga=yu(ct);function _d(t,e,n){var r=b(t),u=r||he(t)||Ge(t);if(e=E(e,4),n==null){var o=t&&t.constructor;u?n=r?new o:[]:z(t)?n=Vt(o)?Fe($n(t)):{}:n={}}return(u?wt:Ut)(t,function(c,f,l){return e(n,c,f,l)}),n}function md(t,e){return t==null?!0:ui(t,e)}function wd(t,e,n){return t==null?t:cu(t,e,ci(n))}function Pd(t,e,n,r){return r=typeof r=="function"?r:i,t==null?t:cu(t,e,ci(n),r)}function Ke(t){return t==null?[]:Wr(t,V(t))}function Cd(t){return t==null?[]:Wr(t,ct(t))}function Ad(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=Et(n),n=n===n?n:0),e!==i&&(e=Et(e),e=e===e?e:0),me(Et(t),e,n)}function Id(t,e,n){return e=kt(e),n===i?(n=e,e=0):n=kt(n),t=Et(t),Rf(t,e,n)}function xd(t,e,n){if(n&&typeof n!="boolean"&&st(t,e,n)&&(e=n=i),n===i&&(typeof e=="boolean"?(n=e,e=i):typeof t=="boolean"&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=kt(t),e===i?(e=t,t=0):e=kt(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var u=Fs();return nt(t+u*(e-t+ec("1e-"+((u+"").length-1))),e)}return ri(t,e)}var Ed=We(function(t,e,n){return e=e.toLowerCase(),t+(n?va(e):e)});function va(t){return bi(U(t).toLowerCase())}function _a(t){return t=U(t),t&&t.replace(yo,dc).replace(zo,"")}function yd(t,e,n){t=U(t),e=pt(e);var r=t.length;n=n===i?r:me(T(n),0,r);var u=n;return n-=e.length,n>=0&&t.slice(n,u)==e}function Sd(t){return t=U(t),t&&so.test(t)?t.replace(Zi,gc):t}function Od(t){return t=U(t),t&&ho.test(t)?t.replace(Er,"\\$&"):t}var Rd=We(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),bd=We(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Td=Pu("toLowerCase");function Ld(t,e,n){t=U(t),e=T(e);var r=e?Ne(t):0;if(!e||r>=e)return t;var u=(e-r)/2;return jn(Mn(u),n)+t+jn(Fn(u),n)}function Hd(t,e,n){t=U(t),e=T(e);var r=e?Ne(t):0;return e&&r<e?t+jn(e-r,n):t}function Nd(t,e,n){t=U(t),e=T(e);var r=e?Ne(t):0;return e&&r<e?jn(e-r,n)+t:t}function Dd(t,e,n){return n||e==null?e=0:e&&(e=+e),Wc(U(t).replace(yr,""),e||0)}function $d(t,e,n){return(n?st(t,e,n):e===i)?e=1:e=T(e),ii(U(t),e)}function qd(){var t=arguments,e=U(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Ud=We(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function Fd(t,e,n){return n&&typeof n!="number"&&st(t,e,n)&&(e=n=i),n=n===i?qt:n>>>0,n?(t=U(t),t&&(typeof e=="string"||e!=null&&!Si(e))&&(e=pt(e),!e&&He(t))?fe(Ot(t),0,n):t.split(e,n)):[]}var Md=We(function(t,e,n){return t+(n?" ":"")+bi(e)});function Wd(t,e,n){return t=U(t),n=n==null?0:me(T(n),0,t.length),e=pt(e),t.slice(n,n+e.length)==e}function Bd(t,e,n){var r=a.templateSettings;n&&st(t,e,n)&&(e=i),t=U(t),e=hr({},e,r,Su);var u=hr({},e.imports,r.imports,Su),o=V(u),c=Wr(u,o),f,l,v=0,_=e.interpolate||xn,m="__p += '",C=Gr((e.escape||xn).source+"|"+_.source+"|"+(_===Xi?Po:xn).source+"|"+(e.evaluate||xn).source+"|$","g"),I="//# sourceURL="+(M.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qo+"]")+`
`;t.replace(C,function(S,N,$,gt,ut,vt){return $||($=gt),m+=t.slice(v,vt).replace(So,vc),N&&(f=!0,m+=`' +
__e(`+N+`) +
'`),ut&&(l=!0,m+=`';
`+ut+`;
__p += '`),$&&(m+=`' +
((__t = (`+$+`)) == null ? '' : __t) +
'`),v=vt+S.length,S}),m+=`';
`;var y=M.call(e,"variable")&&e.variable;if(!y)m=`with (obj) {
`+m+`
}
`;else if(mo.test(y))throw new R(k);m=(l?m.replace(eo,""):m).replace(no,"$1").replace(ro,"$1;"),m="function("+(y||"obj")+`) {
`+(y?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(f?", __e = _.escape":"")+(l?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+m+`return __p
}`;var L=wa(function(){return q(o,I+"return "+m).apply(i,c)});if(L.source=m,yi(L))throw L;return L}function Gd(t){return U(t).toLowerCase()}function Kd(t){return U(t).toUpperCase()}function zd(t,e,n){if(t=U(t),t&&(n||e===i))return Os(t);if(!t||!(e=pt(e)))return t;var r=Ot(t),u=Ot(e),o=Rs(r,u),c=bs(r,u)+1;return fe(r,o,c).join("")}function Jd(t,e,n){if(t=U(t),t&&(n||e===i))return t.slice(0,Ls(t)+1);if(!t||!(e=pt(e)))return t;var r=Ot(t),u=bs(r,Ot(e))+1;return fe(r,0,u).join("")}function Yd(t,e,n){if(t=U(t),t&&(n||e===i))return t.replace(yr,"");if(!t||!(e=pt(e)))return t;var r=Ot(t),u=Rs(r,Ot(e));return fe(r,u).join("")}function Zd(t,e){var n=Fa,r=Ma;if(z(e)){var u="separator"in e?e.separator:u;n="length"in e?T(e.length):n,r="omission"in e?pt(e.omission):r}t=U(t);var o=t.length;if(He(t)){var c=Ot(t);o=c.length}if(n>=o)return t;var f=n-Ne(r);if(f<1)return r;var l=c?fe(c,0,f).join(""):t.slice(0,f);if(u===i)return l+r;if(c&&(f+=l.length-f),Si(u)){if(t.slice(f).search(u)){var v,_=l;for(u.global||(u=Gr(u.source,U(Qi.exec(u))+"g")),u.lastIndex=0;v=u.exec(_);)var m=v.index;l=l.slice(0,m===i?f:m)}}else if(t.indexOf(pt(u),f)!=f){var C=l.lastIndexOf(u);C>-1&&(l=l.slice(0,C))}return l+r}function Xd(t){return t=U(t),t&&io.test(t)?t.replace(Yi,Ic):t}var Qd=We(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),bi=Pu("toUpperCase");function ma(t,e,n){return t=U(t),e=n?i:e,e===i?mc(t)?yc(t):cc(t):t.match(e)||[]}var wa=H(function(t,e){try{return ht(t,i,e)}catch(n){return yi(n)?n:new R(n)}}),Vd=Xt(function(t,e){return wt(e,function(n){n=Mt(n),Yt(t,n,xi(t[n],t))}),t});function kd(t){var e=t==null?0:t.length,n=E();return t=e?K(t,function(r){if(typeof r[1]!="function")throw new Pt(O);return[n(r[0]),r[1]]}):[],H(function(r){for(var u=-1;++u<e;){var o=t[u];if(ht(o[0],this,r))return ht(o[1],this,r)}})}function jd(t){return xf(At(t,Nt))}function Ti(t){return function(){return t}}function tg(t,e){return t==null||t!==t?e:t}var eg=Au(),ng=Au(!0);function ft(t){return t}function Li(t){return ks(typeof t=="function"?t:At(t,Nt))}function rg(t){return tu(At(t,Nt))}function ig(t,e){return eu(t,At(e,Nt))}var sg=H(function(t,e){return function(n){return fn(n,t,e)}}),ug=H(function(t,e){return function(n){return fn(t,n,e)}});function Hi(t,e,n){var r=V(e),u=Jn(e,r);n==null&&!(z(e)&&(u.length||!r.length))&&(n=e,e=t,t=this,u=Jn(e,V(e)));var o=!(z(n)&&"chain"in n)||!!n.chain,c=Vt(t);return wt(u,function(f){var l=e[f];t[f]=l,c&&(t.prototype[f]=function(){var v=this.__chain__;if(o||v){var _=t(this.__wrapped__),m=_.__actions__=at(this.__actions__);return m.push({func:l,args:arguments,thisArg:t}),_.__chain__=v,_}return l.apply(t,ie([this.value()],arguments))})}),t}function ag(){return j._===this&&(j._=Lc),this}function Ni(){}function og(t){return t=T(t),H(function(e){return nu(e,t)})}var cg=hi(K),fg=hi(Is),hg=hi($r);function Pa(t){return mi(t)?qr(Mt(t)):Wf(t)}function lg(t){return function(e){return t==null?i:we(t,e)}}var pg=xu(),dg=xu(!0);function Di(){return[]}function $i(){return!1}function gg(){return{}}function vg(){return""}function _g(){return!0}function mg(t,e){if(t=T(t),t<1||t>ne)return[];var n=qt,r=nt(t,qt);e=E(e),t-=qt;for(var u=Mr(r,e);++n<t;)e(n);return u}function wg(t){return b(t)?K(t,Mt):dt(t)?[t]:at(Mu(U(t)))}function Pg(t){var e=++bc;return U(t)+e}var Cg=kn(function(t,e){return t+e},0),Ag=li("ceil"),Ig=kn(function(t,e){return t/e},1),xg=li("floor");function Eg(t){return t&&t.length?zn(t,ft,Vr):i}function yg(t,e){return t&&t.length?zn(t,E(e,2),Vr):i}function Sg(t){return ys(t,ft)}function Og(t,e){return ys(t,E(e,2))}function Rg(t){return t&&t.length?zn(t,ft,ei):i}function bg(t,e){return t&&t.length?zn(t,E(e,2),ei):i}var Tg=kn(function(t,e){return t*e},1),Lg=li("round"),Hg=kn(function(t,e){return t-e},0);function Ng(t){return t&&t.length?Fr(t,ft):0}function Dg(t,e){return t&&t.length?Fr(t,E(e,2)):0}return a.after=rp,a.ary=Vu,a.assign=Kp,a.assignIn=ha,a.assignInWith=hr,a.assignWith=zp,a.at=Jp,a.before=ku,a.bind=xi,a.bindAll=Vd,a.bindKey=ju,a.castArray=gp,a.chain=Zu,a.chunk=xh,a.compact=Eh,a.concat=yh,a.cond=kd,a.conforms=jd,a.constant=Ti,a.countBy=Nl,a.create=Yp,a.curry=ta,a.curryRight=ea,a.debounce=na,a.defaults=Zp,a.defaultsDeep=Xp,a.defer=ip,a.delay=sp,a.difference=Sh,a.differenceBy=Oh,a.differenceWith=Rh,a.drop=bh,a.dropRight=Th,a.dropRightWhile=Lh,a.dropWhile=Hh,a.fill=Nh,a.filter=$l,a.flatMap=Fl,a.flatMapDeep=Ml,a.flatMapDepth=Wl,a.flatten=Ku,a.flattenDeep=Dh,a.flattenDepth=$h,a.flip=up,a.flow=eg,a.flowRight=ng,a.fromPairs=qh,a.functions=nd,a.functionsIn=rd,a.groupBy=Bl,a.initial=Fh,a.intersection=Mh,a.intersectionBy=Wh,a.intersectionWith=Bh,a.invert=sd,a.invertBy=ud,a.invokeMap=Kl,a.iteratee=Li,a.keyBy=zl,a.keys=V,a.keysIn=ct,a.map=sr,a.mapKeys=od,a.mapValues=cd,a.matches=rg,a.matchesProperty=ig,a.memoize=ar,a.merge=fd,a.mergeWith=la,a.method=sg,a.methodOf=ug,a.mixin=Hi,a.negate=or,a.nthArg=og,a.omit=hd,a.omitBy=ld,a.once=ap,a.orderBy=Jl,a.over=cg,a.overArgs=op,a.overEvery=fg,a.overSome=hg,a.partial=Ei,a.partialRight=ra,a.partition=Yl,a.pick=pd,a.pickBy=pa,a.property=Pa,a.propertyOf=lg,a.pull=Jh,a.pullAll=Ju,a.pullAllBy=Yh,a.pullAllWith=Zh,a.pullAt=Xh,a.range=pg,a.rangeRight=dg,a.rearg=cp,a.reject=Ql,a.remove=Qh,a.rest=fp,a.reverse=Ai,a.sampleSize=kl,a.set=gd,a.setWith=vd,a.shuffle=jl,a.slice=Vh,a.sortBy=np,a.sortedUniq=il,a.sortedUniqBy=sl,a.split=Fd,a.spread=hp,a.tail=ul,a.take=al,a.takeRight=ol,a.takeRightWhile=cl,a.takeWhile=fl,a.tap=El,a.throttle=lp,a.thru=ir,a.toArray=oa,a.toPairs=da,a.toPairsIn=ga,a.toPath=wg,a.toPlainObject=fa,a.transform=_d,a.unary=pp,a.union=hl,a.unionBy=ll,a.unionWith=pl,a.uniq=dl,a.uniqBy=gl,a.uniqWith=vl,a.unset=md,a.unzip=Ii,a.unzipWith=Yu,a.update=wd,a.updateWith=Pd,a.values=Ke,a.valuesIn=Cd,a.without=_l,a.words=ma,a.wrap=dp,a.xor=ml,a.xorBy=wl,a.xorWith=Pl,a.zip=Cl,a.zipObject=Al,a.zipObjectDeep=Il,a.zipWith=xl,a.entries=da,a.entriesIn=ga,a.extend=ha,a.extendWith=hr,Hi(a,a),a.add=Cg,a.attempt=wa,a.camelCase=Ed,a.capitalize=va,a.ceil=Ag,a.clamp=Ad,a.clone=vp,a.cloneDeep=mp,a.cloneDeepWith=wp,a.cloneWith=_p,a.conformsTo=Pp,a.deburr=_a,a.defaultTo=tg,a.divide=Ig,a.endsWith=yd,a.eq=bt,a.escape=Sd,a.escapeRegExp=Od,a.every=Dl,a.find=ql,a.findIndex=Bu,a.findKey=Qp,a.findLast=Ul,a.findLastIndex=Gu,a.findLastKey=Vp,a.floor=xg,a.forEach=Xu,a.forEachRight=Qu,a.forIn=kp,a.forInRight=jp,a.forOwn=td,a.forOwnRight=ed,a.get=Oi,a.gt=Cp,a.gte=Ap,a.has=id,a.hasIn=Ri,a.head=zu,a.identity=ft,a.includes=Gl,a.indexOf=Uh,a.inRange=Id,a.invoke=ad,a.isArguments=Ae,a.isArray=b,a.isArrayBuffer=Ip,a.isArrayLike=ot,a.isArrayLikeObject=Y,a.isBoolean=xp,a.isBuffer=he,a.isDate=Ep,a.isElement=yp,a.isEmpty=Sp,a.isEqual=Op,a.isEqualWith=Rp,a.isError=yi,a.isFinite=bp,a.isFunction=Vt,a.isInteger=ia,a.isLength=cr,a.isMap=sa,a.isMatch=Tp,a.isMatchWith=Lp,a.isNaN=Hp,a.isNative=Np,a.isNil=$p,a.isNull=Dp,a.isNumber=ua,a.isObject=z,a.isObjectLike=J,a.isPlainObject=vn,a.isRegExp=Si,a.isSafeInteger=qp,a.isSet=aa,a.isString=fr,a.isSymbol=dt,a.isTypedArray=Ge,a.isUndefined=Up,a.isWeakMap=Fp,a.isWeakSet=Mp,a.join=Gh,a.kebabCase=Rd,a.last=xt,a.lastIndexOf=Kh,a.lowerCase=bd,a.lowerFirst=Td,a.lt=Wp,a.lte=Bp,a.max=Eg,a.maxBy=yg,a.mean=Sg,a.meanBy=Og,a.min=Rg,a.minBy=bg,a.stubArray=Di,a.stubFalse=$i,a.stubObject=gg,a.stubString=vg,a.stubTrue=_g,a.multiply=Tg,a.nth=zh,a.noConflict=ag,a.noop=Ni,a.now=ur,a.pad=Ld,a.padEnd=Hd,a.padStart=Nd,a.parseInt=Dd,a.random=xd,a.reduce=Zl,a.reduceRight=Xl,a.repeat=$d,a.replace=qd,a.result=dd,a.round=Lg,a.runInContext=h,a.sample=Vl,a.size=tp,a.snakeCase=Ud,a.some=ep,a.sortedIndex=kh,a.sortedIndexBy=jh,a.sortedIndexOf=tl,a.sortedLastIndex=el,a.sortedLastIndexBy=nl,a.sortedLastIndexOf=rl,a.startCase=Md,a.startsWith=Wd,a.subtract=Hg,a.sum=Ng,a.sumBy=Dg,a.template=Bd,a.times=mg,a.toFinite=kt,a.toInteger=T,a.toLength=ca,a.toLower=Gd,a.toNumber=Et,a.toSafeInteger=Gp,a.toString=U,a.toUpper=Kd,a.trim=zd,a.trimEnd=Jd,a.trimStart=Yd,a.truncate=Zd,a.unescape=Xd,a.uniqueId=Pg,a.upperCase=Qd,a.upperFirst=bi,a.each=Xu,a.eachRight=Qu,a.first=zu,Hi(a,function(){var t={};return Ut(a,function(e,n){M.call(a.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),a.VERSION=p,wt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){a[t].placeholder=a}),wt(["drop","take"],function(t,e){D.prototype[t]=function(n){n=n===i?1:Q(T(n),0);var r=this.__filtered__&&!e?new D(this):this.clone();return r.__filtered__?r.__takeCount__=nt(n,r.__takeCount__):r.__views__.push({size:nt(n,qt),type:t+(r.__dir__<0?"Right":"")}),r},D.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),wt(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Ki||n==Ka;D.prototype[t]=function(u){var o=this.clone();return o.__iteratees__.push({iteratee:E(u,3),type:n}),o.__filtered__=o.__filtered__||r,o}}),wt(["head","last"],function(t,e){var n="take"+(e?"Right":"");D.prototype[t]=function(){return this[n](1).value()[0]}}),wt(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");D.prototype[t]=function(){return this.__filtered__?new D(this):this[n](1)}}),D.prototype.compact=function(){return this.filter(ft)},D.prototype.find=function(t){return this.filter(t).head()},D.prototype.findLast=function(t){return this.reverse().find(t)},D.prototype.invokeMap=H(function(t,e){return typeof t=="function"?new D(this):this.map(function(n){return fn(n,t,e)})}),D.prototype.reject=function(t){return this.filter(or(E(t)))},D.prototype.slice=function(t,e){t=T(t);var n=this;return n.__filtered__&&(t>0||e<0)?new D(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(e=T(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},D.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},D.prototype.toArray=function(){return this.take(qt)},Ut(D.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),u=a[r?"take"+(e=="last"?"Right":""):e],o=r||/^find/.test(e);u&&(a.prototype[e]=function(){var c=this.__wrapped__,f=r?[1]:arguments,l=c instanceof D,v=f[0],_=l||b(c),m=function(N){var $=u.apply(a,ie([N],f));return r&&C?$[0]:$};_&&n&&typeof v=="function"&&v.length!=1&&(l=_=!1);var C=this.__chain__,I=!!this.__actions__.length,y=o&&!C,L=l&&!I;if(!o&&_){c=L?c:new D(this);var S=t.apply(c,f);return S.__actions__.push({func:ir,args:[m],thisArg:i}),new Ct(S,C)}return y&&L?t.apply(this,f):(S=this.thru(m),y?r?S.value()[0]:S.value():S)})}),wt(["pop","push","shift","sort","splice","unshift"],function(t){var e=bn[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);a.prototype[t]=function(){var u=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(b(o)?o:[],u)}return this[n](function(c){return e.apply(b(c)?c:[],u)})}}),Ut(D.prototype,function(t,e){var n=a[e];if(n){var r=n.name+"";M.call(Ue,r)||(Ue[r]=[]),Ue[r].push({name:e,func:n})}}),Ue[Vn(i,le).name]=[{name:"wrapper",func:i}],D.prototype.clone=Zc,D.prototype.reverse=Xc,D.prototype.value=Qc,a.prototype.at=yl,a.prototype.chain=Sl,a.prototype.commit=Ol,a.prototype.next=Rl,a.prototype.plant=Tl,a.prototype.reverse=Ll,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=Hl,a.prototype.first=a.prototype.head,nn&&(a.prototype[nn]=bl),a},De=Sc();de?((de.exports=De)._=De,Lr._=De):j._=De}).call(_n)})(Ui,Ui.exports);var Kg=Object.defineProperty,zg=Object.defineProperties,Jg=Object.getOwnPropertyDescriptors,Sa=Object.getOwnPropertySymbols,Yg=Object.prototype.hasOwnProperty,Zg=Object.prototype.propertyIsEnumerable,Oa=(P,s,i)=>s in P?Kg(P,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):P[s]=i,lr=(P,s)=>{for(var i in s||(s={}))Yg.call(s,i)&&Oa(P,i,s[i]);if(Sa)for(var i of Sa(s))Zg.call(s,i)&&Oa(P,i,s[i]);return P},Xg=(P,s)=>zg(P,Jg(s));function Ht(P,s,i){var p;const w=et.parseChainId(P);return((p=s.rpcMap)==null?void 0:p[w.reference])||`${Gg}?chainId=${w.namespace}:${w.reference}&projectId=${i}`}function Ie(P){return P.includes(":")?P.split(":")[1]:P}function Ra(P){return P.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)}function Qg(P,s){const i=Object.keys(s.namespaces).filter(w=>w.includes(P));if(!i.length)return[];const p=[];return i.forEach(w=>{const x=s.namespaces[w].accounts;p.push(...x)}),p}function Fi(P={},s={}){const i=ba(P),p=ba(s);return Ui.exports.merge(i,p)}function ba(P){var s,i,p,w;const x={};if(!et.isValidObject(P))return x;for(const[O,k]of Object.entries(P)){const ee=et.isCaipNamespace(O)?[O]:k.chains,Je=k.methods||[],xe=k.events||[],Nt=k.rpcMap||{},Bt=et.parseNamespaceKey(O);x[Bt]=Xg(lr(lr({},x[Bt]),k),{chains:et.mergeArrays(ee,(s=x[Bt])==null?void 0:s.chains),methods:et.mergeArrays(Je,(i=x[Bt])==null?void 0:i.methods),events:et.mergeArrays(xe,(p=x[Bt])==null?void 0:p.events),rpcMap:lr(lr({},Nt),(w=x[Bt])==null?void 0:w.rpcMap)})}return x}function Vg(P){return P.includes(":")?P.split(":")[2]:P}function Ta(P){const s={};for(const[i,p]of Object.entries(P)){const w=p.methods||[],x=p.events||[],O=p.accounts||[],k=et.isCaipNamespace(i)?[i]:p.chains?p.chains:Ra(p.accounts);s[i]={chains:k,methods:w,events:x,accounts:O}}return s}function Mi(P){return typeof P=="number"?P:P.includes("0x")?parseInt(P,16):(P=P.includes(":")?P.split(":")[1]:P,isNaN(Number(P))?P:Number(P))}const La={},F=P=>La[P],Wi=(P,s)=>{La[P]=s};class kg{constructor(s){this.name="polkadot",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getAccounts(){const s=this.namespace.accounts;return s?s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=Ie(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}var jg=Object.defineProperty,tv=Object.defineProperties,ev=Object.getOwnPropertyDescriptors,Ha=Object.getOwnPropertySymbols,nv=Object.prototype.hasOwnProperty,rv=Object.prototype.propertyIsEnumerable,Na=(P,s,i)=>s in P?jg(P,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):P[s]=i,Da=(P,s)=>{for(var i in s||(s={}))nv.call(s,i)&&Na(P,i,s[i]);if(Ha)for(var i of Ha(s))rv.call(s,i)&&Na(P,i,s[i]);return P},$a=(P,s)=>tv(P,ev(s));class iv{constructor(s){this.name="eip155",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(s){switch(s.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(s);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(s)}return this.namespace.methods.includes(s.request.method)?await this.client.request(s):this.getHttpProvider().request(s.request)}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(parseInt(s),i),this.chainId=parseInt(s),this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}createHttpProvider(s,i){const p=i||Ht(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new xa.HttpConnection(p,F("disableProviderPing")))}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=parseInt(Ie(i));s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}getHttpProvider(){const s=this.chainId,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}async handleSwitchChain(s){var i,p;let w=s.request.params?(i=s.request.params[0])==null?void 0:i.chainId:"0x0";w=w.startsWith("0x")?w:`0x${w}`;const x=parseInt(w,16);if(this.isChainApproved(x))this.setDefaultChain(`${x}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:s.topic,request:{method:s.request.method,params:[{chainId:w}]},chainId:(p=this.namespace.chains)==null?void 0:p[0]}),this.setDefaultChain(`${x}`);else throw new Error(`Failed to switch to chain 'eip155:${x}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(s){return this.namespace.chains.includes(`${this.name}:${s}`)}async getCapabilities(s){var i,p,w;const x=(p=(i=s.request)==null?void 0:i.params)==null?void 0:p[0];if(!x)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const O=this.client.session.get(s.topic),k=((w=O?.sessionProperties)==null?void 0:w.capabilities)||{};if(k!=null&&k[x])return k?.[x];const ee=await this.client.request(s);try{await this.client.session.update(s.topic,{sessionProperties:$a(Da({},O.sessionProperties||{}),{capabilities:$a(Da({},k||{}),{[x]:ee})})})}catch(Je){console.warn("Failed to update session with capabilities",Je)}return ee}}class sv{constructor(s){this.name="solana",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=Ie(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}class uv{constructor(s){this.name="cosmos",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=Ie(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}class av{constructor(s){this.name="algorand",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){if(!this.httpProviders[s]){const p=i||Ht(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,p)}this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;s[i]=this.createHttpProvider(i,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace,this.client.core.projectId);return typeof p>"u"?void 0:new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}class ov{constructor(s){this.name="cip34",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{const p=this.getCardanoRPCUrl(i),w=Ie(i);s[w]=this.createHttpProvider(w,p)}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}getCardanoRPCUrl(s){const i=this.namespace.rpcMap;if(i)return i[s]}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||this.getCardanoRPCUrl(s);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}class cv{constructor(s){this.name="elrond",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=Ie(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}class fv{constructor(s){this.name="multiversx",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;const w=Ie(i);s[w]=this.createHttpProvider(w,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}class hv{constructor(s){this.name="near",this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace=Object.assign(this.namespace,s)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}setDefaultChain(s,i){if(this.chainId=s,!this.httpProviders[s]){const p=i||Ht(`${this.name}:${s}`,this.namespace);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,p)}this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const s=this.namespace.accounts;return s?s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]:[]}createHttpProviders(){const s={};return this.namespace.chains.forEach(i=>{var p;s[i]=this.createHttpProvider(i,(p=this.namespace.rpcMap)==null?void 0:p[i])}),s}getHttpProvider(){const s=`${this.name}:${this.chainId}`,i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace);return typeof p>"u"?void 0:new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}class lv{constructor(s){this.name=ze,this.namespace=s.namespace,this.events=F("events"),this.client=F("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(s){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(s.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(s.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(s.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(s.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider(s.chainId).request(s.request)}setDefaultChain(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(Lt.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}getAccounts(){const s=this.namespace.accounts;return s?[...new Set(s.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){var s,i;const p={};return(i=(s=this.namespace)==null?void 0:s.accounts)==null||i.forEach(w=>{const x=et.parseChainId(w);p[`${x.namespace}:${x.reference}`]=this.createHttpProvider(w)}),p}getHttpProvider(s){const i=this.httpProviders[s];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${s} not found`);return i}setHttpProvider(s,i){const p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}createHttpProvider(s,i){const p=i||Ht(s,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${s}`);return new Wt.JsonRpcProvider(new te.default(p,F("disableProviderPing")))}}var pv=Object.defineProperty,dv=Object.defineProperties,gv=Object.getOwnPropertyDescriptors,qa=Object.getOwnPropertySymbols,vv=Object.prototype.hasOwnProperty,_v=Object.prototype.propertyIsEnumerable,Ua=(P,s,i)=>s in P?pv(P,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):P[s]=i,pr=(P,s)=>{for(var i in s||(s={}))vv.call(s,i)&&Ua(P,i,s[i]);if(qa)for(var i of qa(s))_v.call(s,i)&&Ua(P,i,s[i]);return P},Bi=(P,s)=>dv(P,gv(s));class dr{constructor(s){this.events=new Fg.default,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=s,this.logger=typeof s?.logger<"u"&&typeof s?.logger!="string"?s.logger:Ia.pino(Ia.getDefaultLoggerOptions({level:s?.logger||Ea})),this.disableProviderPing=s?.disableProviderPing||!1}static async init(s){const i=new dr(s);return await i.initialize(),i}async request(s,i,p){const[w,x]=this.validateChain(i);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(w).request({request:pr({},s),chainId:`${w}:${x}`,topic:this.session.topic,expiry:p})}sendAsync(s,i,p,w){const x=new Date().getTime();this.request(s,p,w).then(O=>i(null,qg.formatJsonRpcResult(x,O))).catch(O=>i(O,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var s;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(s=this.session)==null?void 0:s.topic,reason:et.getSdkError("USER_DISCONNECTED")}),await this.cleanup()}async connect(s){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(s),await this.cleanupPendingPairings(),!s.skipPairing)return await this.pair(s.pairingTopic)}async authenticate(s){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(s),await this.cleanupPendingPairings();const{uri:i,response:p}=await this.client.authenticate(s);i&&(this.uri=i,this.events.emit("display_uri",i));const w=await p();if(this.session=w.session,this.session){const x=Ta(this.session.namespaces);this.namespaces=Fi(this.namespaces,x),this.persist("namespaces",this.namespaces),this.onConnect()}return w}on(s,i){this.events.on(s,i)}once(s,i){this.events.once(s,i)}removeListener(s,i){this.events.removeListener(s,i)}off(s,i){this.events.off(s,i)}get isWalletConnect(){return!0}async pair(s){this.shouldAbortPairingAttempt=!1;let i=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(i>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:p,approval:w}=await this.client.connect({pairingTopic:s,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});p&&(this.uri=p,this.events.emit("display_uri",p)),await w().then(x=>{this.session=x;const O=Ta(x.namespaces);this.namespaces=Fi(this.namespaces,O),this.persist("namespaces",this.namespaces)}).catch(x=>{if(x.message!==Aa.PROPOSAL_EXPIRY_MESSAGE)throw x;i++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(s,i){try{if(!this.session)return;const[p,w]=this.validateChain(s),x=this.getProvider(p);x.name===ze?x.setDefaultChain(`${p}:${w}`,i):x.setDefaultChain(w,i)}catch(p){if(!/Please call connect/.test(p.message))throw p}}async cleanupPendingPairings(s={}){this.logger.info("Cleaning up inactive pairings...");const i=this.client.pairing.getAll();if(et.isValidArray(i)){for(const p of i)s.deletePairings?this.client.core.expirer.set(p.topic,0):await this.client.core.relayer.subscriber.unsubscribe(p.topic);this.logger.info(`Inactive pairings cleared: ${i.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const s=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[s]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Ug.default.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Ea,relayUrl:this.providerOpts.relayUrl||Mg,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const s=[...new Set(Object.keys(this.session.namespaces).map(i=>et.parseNamespaceKey(i)))];Wi("client",this.client),Wi("events",this.events),Wi("disableProviderPing",this.disableProviderPing),s.forEach(i=>{if(!this.session)return;const p=Qg(i,this.session),w=Ra(p),x=Fi(this.namespaces,this.optionalNamespaces),O=Bi(pr({},x[i]),{accounts:p,chains:w});switch(i){case"eip155":this.rpcProviders[i]=new iv({namespace:O});break;case"algorand":this.rpcProviders[i]=new av({namespace:O});break;case"solana":this.rpcProviders[i]=new sv({namespace:O});break;case"cosmos":this.rpcProviders[i]=new uv({namespace:O});break;case"polkadot":this.rpcProviders[i]=new kg({namespace:O});break;case"cip34":this.rpcProviders[i]=new ov({namespace:O});break;case"elrond":this.rpcProviders[i]=new cv({namespace:O});break;case"multiversx":this.rpcProviders[i]=new fv({namespace:O});break;case"near":this.rpcProviders[i]=new hv({namespace:O});break;default:this.rpcProviders[ze]?this.rpcProviders[ze].updateNamespace(O):this.rpcProviders[ze]=new lv({namespace:O})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",s=>{this.events.emit("session_ping",s)}),this.client.on("session_event",s=>{const{params:i}=s,{event:p}=i;if(p.name==="accountsChanged"){const w=p.data;w&&et.isValidArray(w)&&this.events.emit("accountsChanged",w.map(Vg))}else if(p.name==="chainChanged"){const w=i.chainId,x=i.event.data,O=et.parseNamespaceKey(w),k=Mi(w)!==Mi(x)?`${O}:${Mi(x)}`:w;this.onChainChanged(k)}else this.events.emit(p.name,p.data);this.events.emit("session_event",s)}),this.client.on("session_update",({topic:s,params:i})=>{var p;const{namespaces:w}=i,x=(p=this.client)==null?void 0:p.session.get(s);this.session=Bi(pr({},x),{namespaces:w}),this.onSessionUpdate(),this.events.emit("session_update",{topic:s,params:i})}),this.client.on("session_delete",async s=>{await this.cleanup(),this.events.emit("session_delete",s),this.events.emit("disconnect",Bi(pr({},et.getSdkError("USER_DISCONNECTED")),{data:s.topic}))}),this.on(Lt.DEFAULT_CHAIN_CHANGED,s=>{this.onChainChanged(s,!0)})}getProvider(s){return this.rpcProviders[s]||this.rpcProviders[ze]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(s=>{var i;this.getProvider(s).updateNamespace((i=this.session)==null?void 0:i.namespaces[s])})}setNamespaces(s){const{namespaces:i,optionalNamespaces:p,sessionProperties:w}=s;i&&Object.keys(i).length&&(this.namespaces=i),p&&Object.keys(p).length&&(this.optionalNamespaces=p),this.sessionProperties=w,this.persist("namespaces",i),this.persist("optionalNamespaces",p)}validateChain(s){const[i,p]=s?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,p];if(i&&!Object.keys(this.namespaces||{}).map(O=>et.parseNamespaceKey(O)).includes(i))throw new Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);if(i&&p)return[i,p];const w=et.parseNamespaceKey(Object.keys(this.namespaces)[0]),x=this.rpcProviders[w].getDefaultChain();return[w,x]}async requestAccounts(){const[s]=this.validateChain();return await this.getProvider(s).requestAccounts()}onChainChanged(s,i=!1){if(!this.namespaces)return;const[p,w]=this.validateChain(s);w&&(i||this.getProvider(p).setDefaultChain(w),this.namespaces[p]?this.namespaces[p].defaultChain=w:this.namespaces[`${p}:${w}`]?this.namespaces[`${p}:${w}`].defaultChain=w:this.namespaces[`${p}:${w}`]={defaultChain:w},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",w))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(s,i){this.client.core.storage.setItem(`${ya}/${s}`,i)}async getFromStore(s){return await this.client.core.storage.getItem(`${ya}/${s}`)}}const mv=dr;exports.UniversalProvider=mv,exports.default=dr;
//# sourceMappingURL=index.cjs.js.map
