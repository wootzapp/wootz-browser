"use strict";(self.webpackChunkrewards=self.webpackChunkrewards||[]).push([[78608],{78608:(e,t,n)=>{n.d(t,{autoConnectWC:()=>J,connectWC:()=>Q});var r=n(90228),a=n(6109),o=n(90871);a.C;a.C;class s extends a.C{constructor(e){let{body:t,error:n,url:r}=e;super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${r}`,`Request body: ${(0,o.A)(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code}}a.C;a.C;class c extends a.C{constructor(e,t){let{code:n,docsPath:r,metaMessages:a,name:o,shortMessage:c}=t;super(c,{cause:e,docsPath:r,metaMessages:a||e?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof s?e.code:n??-1}}class i extends c{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class d extends c{constructor(e){super(e,{code:d.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class l extends c{constructor(e){super(e,{code:l.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class u extends c{constructor(e){let{method:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:u.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class p extends c{constructor(e){super(e,{code:p.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class h extends c{constructor(e){super(e,{code:h.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class m extends c{constructor(e){super(e,{code:m.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class b extends c{constructor(e){super(e,{code:b.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class g extends c{constructor(e){super(e,{code:g.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class f extends c{constructor(e){super(e,{code:f.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class v extends c{constructor(e){let{method:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:v.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not implemented.`})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class w extends c{constructor(e){super(e,{code:w.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class y extends c{constructor(e){super(e,{code:y.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class C extends i{constructor(e){super(e,{code:C.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class M extends i{constructor(e){super(e,{code:M.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(M,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class P extends i{constructor(e){let{method:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:P.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class E extends i{constructor(e){super(e,{code:E.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class O extends i{constructor(e){super(e,{code:O.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class R extends i{constructor(e){super(e,{code:R.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});var j=n(9893),I=n(83423),q=n(3340),T=n(93300),x=n(50967),N=n(85602),U=n(26711),_=n(49026),S=n(11177),D=n(55881),L=n(27334);const A="wallet_addEthereumChain",$=!0,k={requestedChains:"tw.wc.requestedChains",lastUsedChainId:"tw.wc.lastUsedChainId"};async function Q(e,t,n,r,a){const o=await F(e,n,a),s=e.walletConnect;let{onDisplayUri:c}=s||{};if(!c&&a&&"walletConnect"!==n){const e=await(0,U.u)(n);c=t=>{const n=e.mobile.native||e.mobile.universal;if(!n)throw new Error("No app url found for wallet connect to redirect to.");const r=(0,N.Y)(n,t).redirect;a(r)}}c&&o.events.addListener("display_uri",c);let i=s?.optionalChains,d=e.chain;"global.safe"===n&&(i=z.map(j.Q4),d&&!i.includes(d)&&(d=void 0));const{rpcMap:l,chainsToRequest:u}=Y({client:e.client,chain:d,optionalChains:i});o.session&&await o.connect({...s?.pairingTopic?{pairingTopic:s?.pairingTopic}:{},optionalChains:u,chains:d?[d.id]:u.length>0?[u[0]]:[1],rpcMap:l}),H(u,r);const p=(await o.enable())[0];if(!p)throw new Error("No accounts found on provider.");const h=(0,D.A)(o.chainId),m=e.chain&&e.chain.id===h?e.chain:(0,j.Q4)(h);if(e){const t={optionalChains:e.walletConnect?.optionalChains,chain:e.chain,pairingTopic:e.walletConnect?.pairingTopic};r&&(0,x.O7)(r,n,t)}return s?.onDisplayUri&&o.events.removeListener("display_uri",s.onDisplayUri),V(p,m,o,t,r)}async function J(e,t,n,r,a){const o=r?await(0,x.lh)(r,n):null,s=await F(o?{chain:o.chain,client:e.client,walletConnect:{pairingTopic:o.pairingTopic,optionalChains:o.optionalChains}}:{client:e.client,walletConnect:{}},n,a,!0),c=s.accounts[0];if(!c)throw new Error("No accounts found on provider.");const i=(0,D.A)(s.chainId);return V(c,e.chain&&e.chain.id===i?e.chain:(0,j.Q4)(i),s,t,r)}async function F(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=await(0,U.u)(t),s=e.walletConnect,{EthereumProvider:c,OPTIONAL_EVENTS:i,OPTIONAL_METHODS:d}=await n.e(80092).then(n.bind(n,80092));let l=s?.optionalChains,u=e.chain;"global.safe"===t&&(l=z.map(j.Q4),u&&!l.includes(u)&&(u=void 0));const{rpcMap:p,chainsToRequest:h}=Y({client:e.client,chain:u,optionalChains:l}),m=await c.init({showQrModal:void 0===s?.showQrModal?!r&&$:s.showQrModal,projectId:s?.projectId||L.S,optionalMethods:d,optionalEvents:i,optionalChains:h,chains:u?[u.id]:h.length>0?[h[0]]:[1],metadata:{name:s?.appMetadata?.name||(0,S.o)().name,description:s?.appMetadata?.description||(0,S.o)().description,url:s?.appMetadata?.url||(0,S.o)().url,icons:[s?.appMetadata?.logoUrl||(0,S.o)().logoUrl]},rpcMap:p,qrModalOptions:s?.qrModalOptions,disableProviderPing:!0});if(m.events.setMaxListeners(Number.POSITIVE_INFINITY),a||m.session&&await m.disconnect(),"walletConnect"!==t){function b(){const e=m.session?.peer?.metadata?.redirect?.native||o.mobile.native||o.mobile.universal;r&&e&&r(e)}m.signer.client.on("session_request_sent",b),m.events.addListener("disconnect",(()=>{m.signer.client.off("session_request_sent",b)}))}return m}function K(e,t){return{address:(0,I.bv)(t),async sendTransaction(t){return{transactionHash:await e.request({method:"eth_sendTransaction",params:[{gas:t.gas?(0,q.cK)(t.gas):void 0,value:t.value?(0,q.cK)(t.value):void 0,from:this.address,to:t.to,data:t.data}]})}},async signMessage(t){let{message:n}=t;const r="string"===typeof n?(0,q.i3)(n):n.raw instanceof Uint8Array?(0,q.EY)(n.raw):n.raw;return e.request({method:"personal_sign",params:[r,this.address]})},async signTypedData(t){const n=(0,T.y)(t),{domain:a,message:o,primaryType:s}=n,c={EIP712Domain:(0,r.H4)({domain:a}),...n.types};(0,r.$$)({domain:a,message:o,primaryType:s,types:c});const i=(0,r.v8)({domain:a??{},message:o,primaryType:s,types:c});return await e.request({method:"eth_signTypedData_v4",params:[this.address,i]})}}}function V(e,t,n,r,a){const o=K(n,e);async function s(){n.removeListener("accountsChanged",i),n.removeListener("chainChanged",d),n.removeListener("disconnect",c),await n.disconnect()}function c(){H([],a),a?.removeItem(k.lastUsedChainId),s(),r.emit("disconnect",void 0)}function i(e){if(e[0]){const t=K(n,(0,I.bv)(e[0]));r.emit("accountChanged",t),r.emit("accountsChanged",e)}else c()}function d(e){const t=(0,j.Q4)((0,D.A)(e));r.emit("chainChanged",t),a?.setItem(k.lastUsedChainId,String(e))}return n.on("accountsChanged",i),n.on("chainChanged",d),n.on("disconnect",c),n.on("session_delete",c),[o,t,s,e=>async function(e,t,n){const r=t.id;try{const a=function(e){const t=e.session?.namespaces[L.C]?.chains?.map((e=>Number.parseInt(e.split(":")[1]||"")));return t??[]}(e),o=function(e){return e.session?.namespaces[L.C]?.methods||[]}(e);if(!a.includes(r)&&o.includes(A)){const a=await(0,j.PB)(t),o=[...new Set([...t.blockExplorers?.map((e=>e.url))||[],...a.explorers?.map((e=>e.url))||[]])];await e.request({method:A,params:[{chainId:(0,q.cK)(a.chainId),chainName:a.name,nativeCurrency:a.nativeCurrency,rpcUrls:(0,_.k)(a),blockExplorerUrls:o.length>0?o:void 0}]});const s=await async function(e){const t=await e.getItem(k.requestedChains);return t?JSON.parse(t):[]}(n);s.push(r),H(s,n)}await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,q.cK)(r)}]})}catch(a){if(/user rejected request/i.test("string"===typeof a?a:a?.message))throw new C(a);throw new R(a)}}(n,e,a)]}function H(e,t){t?.setItem(k.requestedChains,JSON.stringify(e))}function Y(e){const t={};e.chain&&(t[e.chain.id]=(0,j.r8)({chain:e.chain,client:e.client}));const n=(e?.optionalChains||[]).slice(0,10);for(const o of n)t[o.id]=(0,j.r8)({chain:o,client:e.client});const r=n.map((e=>e.id))||[],a=e.chain?[e.chain.id,...r]:r.length>0?r:[1];return e.chain||0!==n.length||(t[1]=(0,j.Q4)(1).rpc),{rpcMap:t,chainsToRequest:a}}const z=[1,11155111,42161,43114,8453,1313161554,84532,56,42220,100,10,137,1101,324,534352]}}]);
//# sourceMappingURL=78608.0aa57af2.chunk.js.map