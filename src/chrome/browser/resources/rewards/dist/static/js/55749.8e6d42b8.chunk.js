"use strict";(self.webpackChunkrewards=self.webpackChunkrewards||[]).push([[55749],{41009:(e,n,t)=>{t.d(n,{H:()=>o});var i=t(65043);function o(e){const[n,o]=(0,i.useState)(void 0);return(0,i.useEffect)((()=>{(async function(e){switch(e){case"es_ES":return(await t.e(36384).then(t.bind(t,36384))).default;case"ja_JP":return(await t.e(94217).then(t.bind(t,94217))).default;case"tl_PH":return(await t.e(86528).then(t.bind(t,86528))).default;case"vi_VN":return(await t.e(52461).then(t.bind(t,52461))).default;case"de_DE":return(await t.e(6319).then(t.bind(t,6319))).default;case"ko_KR":return(await t.e(40969).then(t.bind(t,40969))).default;case"fr_FR":return(await t.e(56092).then(t.bind(t,56092))).default;default:return(await t.e(41355).then(t.bind(t,41355))).default}})(e).then((e=>{o(e)}))}),[e]),n}},29717:(e,n,t)=>{t.d(n,{D:()=>O});var i=t(70579),o=t(42156),a=t(12265),r=t(65043),s=t(22318),l=t(18342);var d=t(81270),c=t(23102),p=t(9142),h=t(87029),u=t(56703),w=t(73310),m=t(74394),g=t(19983),f=t(83530),y=t(70252),b=t(35739),x=t(4230),v=t(92152),k=t(14494),$=t(34153),I=t(41943);var j=t(43571),E=t(49354);const W=["email","phone","google","apple","facebook","passkey"],O=e=>{const n=e.locale,{wallet:t}=e,o=(0,f.IU)(),$=(0,u.QP)(),O=(0,r.useMemo)((()=>"inApp"===e.wallet.id?e.wallet.getConfig()?.metadata?.image:void 0),[e.wallet]),L={google:n.signInWithGoogle,facebook:n.signInWithFacebook,apple:n.signInWithApple,discord:n.signInWithDiscord,farcaster:"Farcaster",telegram:"Telegram"},{data:R,isLoading:S}=(0,a.I)({queryKey:["auth-options",t.id],queryFn:async()=>(0,d.Y)(t)?async function(e){const n=await fetch(`${(0,l.Wg)("inAppWallet")}/api/2024-05-05/ecosystem-wallet`,{headers:{"x-ecosystem-id":e}}),t=await n.json();if(!t||"UNAUTHORIZED"===t.code)throw new Error(t.message||`Could not find ecosystem wallet with id ${e}, please check your ecosystem wallet configuration.`);return t.authOptions??void 0}(t.id):null,enabled:(0,d.Y)(t),retry:!1}),P=(0,d.Y)(t)?R??W:t.getConfig()?.auth?.options??W,F=P.indexOf("email"),U=-1!==F,A=P.indexOf("phone"),K=-1!==A,[Y,M]=(0,r.useState)(null),T=(0,r.useMemo)((()=>Y||(U&&K?F<A?"email":"phone":U?"email":K?"phone":"none")),[U,K,F,A,Y]);if((0,d.Y)(t)&&S)return(0,i.jsx)(j.x,{});const B=P.includes("passkey"),_="email"===T?n.emailPlaceholder:n.phonePlaceholder,H="email"===T?n.emailRequired:n.phoneRequired;let N="text";"email"===T?N="email":"phone"===T&&(N="tel");const q=P.filter((e=>h.Y.includes(e))),D=q.length>0,G=(0,d.Y)(t)?{id:t.id,partnerId:t.getConfig()?.partnerId}:void 0;const z=q.length>2;return(0,i.jsxs)(k.mc,{flex:"column",gap:"md",style:{position:"relative"},children:[O&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.E,{client:e.client,src:O.src,alt:O.alt,width:`${O.width}`,height:`${O.height}`,style:{margin:"auto"}}),(0,i.jsx)(x.h,{y:"xxs"})]}),D&&(0,i.jsx)(k.mc,{flex:"row",center:"x",gap:q.length>4?"xs":"sm",style:{justifyContent:"space-between",display:"grid",gridTemplateColumns:`repeat(${q.length}, 1fr)`},children:q.map((n=>{const a=z?q.length>4?w.RK.md:w.RK.lg:w.RK.md;return(0,i.jsxs)(C,{"aria-label":`Login with ${n}`,"data-variant":z?"icon":"full",variant:"outline",disabled:e.disabled,onClick:()=>{(async n=>{const i=t.getConfig(),a=i?.auth?.mode??"popup";if(i&&"auth"in i&&"popup"!==a&&!e.isLinking)return(0,p.N)({authOption:n,client:e.client,ecosystem:G,redirectUrl:i?.auth?.redirectUrl,mode:a});try{const i=(0,E.C)({authOption:n,themeObj:$,client:e.client,ecosystem:G});if(!i)throw new Error("Failed to open login window");const a={chain:e.chain,client:e.client,strategy:n,openedWindow:i,closeOpenedWindow:e=>{e.close()}},r=(()=>{if(e.isLinking){if("inApp"!==t.id)throw new Error("Only in-app wallets support multi-auth");return(0,c.o)(t,a)}{const e=t.connect(a);return(0,m.O)(n,s.n),e}})();o({socialLogin:{type:n,connectionPromise:r}}),e.select()}catch(r){console.error(`Error signing in with ${n}`,r)}})(n)},children:[(0,i.jsx)(b.E,{src:g.wP[n],width:a,height:a,client:e.client}),!z&&`${1===q.length?"Continue with ":""}${L[n]}`]},n)}))}),"wide"===e.size&&D&&(U||K)&&(0,i.jsx)(v.l,{text:n.or}),U&&(0,i.jsx)(i.Fragment,{children:"email"===T?(0,i.jsx)(I.n,{type:N,onSelect:n=>{o({emailLogin:n}),e.select()},placeholder:_,name:"email",errorMessage:e=>{var t;if(!(t=e.toLowerCase(),/^\S+@\S+\.\S+$/.test(t.replace(/\+/g,""))))return n.invalidEmail},disabled:e.disabled,emptyErrorMessage:H,submitButtonText:n.submitEmail}):(0,i.jsx)(y.m,{client:e.client,icon:g.M6,onClick:()=>{M("email")},title:n.emailPlaceholder,disabled:e.disabled})}),K&&(0,i.jsx)(i.Fragment,{children:"phone"===T?(0,i.jsx)(I.n,{format:"phone",type:N,onSelect:n=>{o({phoneLogin:n.replace(/[-\(\) ]/g,"")}),e.select()},placeholder:_,name:"phone",errorMessage:e=>{const t=e.replace(/[-\(\) ]/g,"");if(!/^[0-9]+$/.test(t)&&K)return n.invalidPhone},disabled:e.disabled,emptyErrorMessage:H,submitButtonText:n.submitEmail}):(0,i.jsx)(y.m,{client:e.client,icon:g.S9,onClick:()=>{M("phone")},title:n.phonePlaceholder,disabled:e.disabled})}),B&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.m,{client:e.client,icon:g.ON,onClick:()=>{o({passkeyLogin:!0}),e.select()},title:n.passkey,disabled:e.disabled})}),e.isLinking&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.m,{client:e.client,icon:(0,g.Hs)(""),onClick:()=>{o({walletLogin:!0}),e.select()},title:n.linkWallet})})]})},C=(0,o.A)($.$n)({flexGrow:1,"&[data-variant='full']":{display:"flex",justifyContent:"flex-start",padding:w.YK.md,gap:w.YK.sm,fontSize:w.J.md,fontWeight:500,transition:"background-color 0.2s ease","&:active":{boxShadow:"none"}},"&[data-variant='icon']":{padding:w.YK.sm}})},49354:(e,n,t)=>{t.d(n,{C:()=>o});var i=t(86085);function o(e){let{authOption:n,themeObj:t,client:o,ecosystem:r}=e;const{height:s,width:l}=function(e){return"facebook"===e?{width:715,height:555}:{width:350,height:500}}(n),d=(window.innerHeight-s)/2,c=(window.innerWidth-l)/2,p=window.open(function(e,n,t){switch(e){case"apple":case"facebook":case"google":case"farcaster":case"telegram":case"discord":return(0,i.f)({authOption:e,client:n,ecosystem:t});default:return""}}(n,o,r),void 0,`width=${l}, height=${s}, top=${d}, left=${c}`);if(p){const e=function(e){return"google"===e?"Sign In - Google Accounts":`Sign In - ${e.slice(0,1).toUpperCase()}${e.slice(1)}`}(n);p.document.title=e,p.document.body.innerHTML=a,p.document.body.style.background=t.colors.modalBg,p.document.body.style.color=t.colors.accentText}return p&&window.addEventListener("beforeunload",(()=>{p?.close()})),p}const a='\n<svg class="loader" viewBox="0 0 50 50">\n  <circle\n    cx="25"\n    cy="25"\n    r="20"\n    fill="none"\n    stroke="currentColor"\n    stroke-width="4"\n  />\n</svg>\n\n<style>\n  body,\n  html {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .loader {\n    width: 50px;\n    height: 50px;\n    animation: spin 2s linear infinite;\n  }\n\n  .loader circle {\n    animation: loading 1.5s linear infinite;\n  }\n\n  @keyframes loading {\n    0% {\n      stroke-dasharray: 1, 150;\n      stroke-dashoffset: 0;\n    }\n    50% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -35;\n    }\n    100% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -124;\n    }\n  }\n\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n        }\n  }\n</style>\n'},86085:(e,n,t)=>{t.d(n,{K:()=>s,f:()=>r});var i=t(18342),o=t(87029);const a=e=>{if(!o.N.includes(e)&&"wallet"!==e)throw new Error(`Unknown auth option ${e}`);return"wallet"===e?"siwe":e},r=e=>{let{authOption:n,client:t,ecosystem:o,mode:r="popup",redirectUrl:s}=e;if("popup"===r&&s)throw new Error("Redirect URL is not supported for popup mode");if("window"===r&&!s)throw new Error("Redirect URL is required for window mode");const l=a(n);let d=`${(0,i.Wg)("inAppWallet")}/api/2024-05-05/login/${l}?clientId=${t.clientId}`;if(o?.partnerId?d=`${d}&ecosystemId=${o.id}&ecosystemPartnerId=${o.partnerId}`:o&&(d=`${d}&ecosystemId=${o.id}`),"popup"!==r){const e=new URL(s||window.location.href);e.searchParams.set("walletId",o?.id||"inApp"),e.searchParams.set("authProvider",n),d=`${d}&redirectUrl=${encodeURIComponent(e.toString())}`}return d},s=e=>{let{authOption:n,client:t,ecosystem:o}=e;const r=a(n);let s=`${(0,i.Wg)("inAppWallet")}/api/2024-05-05/login/${r}/callback?clientId=${t.clientId}`;return o?.partnerId?s=`${s}&ecosystemId=${o.id}&ecosystemPartnerId=${o.partnerId}`:o&&(s=`${s}&ecosystemId=${o.id}`),s}},9142:(e,n,t)=>{t.d(n,{x:()=>s,N:()=>r});var i=t(18342),o=t(86085);const a=e=>{let{isWindowOpenedByFn:n,win:t,closeOpenedWindow:i}=e;n?t?.close():t&&i?i(t):t&&t.close()},r=e=>{const n=(0,o.f)({...e,mode:e.mode||"redirect"});"redirect"===e.mode?window.location.href=n:window.open(n)},s=async e=>{let n=e.openedWindow,t=!1;if(n||(n=window.open((0,o.f)({...e,mode:"popup"}),`Login to ${e.authOption}`,"width=350, height=500"),t=!0),!n)throw new Error("Something went wrong opening pop-up");return await new Promise(((o,r)=>{const s=window.setInterval((async()=>{n.closed&&(clearInterval(s),window.removeEventListener("message",l),r(new Error("User closed login window")))}),1e3),l=async d=>{if(d.origin===(0,i.Wg)("inAppWallet"))if("object"===typeof d.data)switch(d.data.eventType){case"oauthSuccessResult":window.removeEventListener("message",l),clearInterval(s),a({isWindowOpenedByFn:t,win:n,closeOpenedWindow:e.closeOpenedWindow}),d.data.authResult&&o(d.data.authResult);break;case"oauthFailureResult":window.removeEventListener("message",l),clearInterval(s),a({isWindowOpenedByFn:t,win:n,closeOpenedWindow:e.closeOpenedWindow}),r(new Error(d.data.errorString))}else r(new Error("Invalid event data"))};window.addEventListener("message",l)}))}}}]);
//# sourceMappingURL=55749.8e6d42b8.chunk.js.map