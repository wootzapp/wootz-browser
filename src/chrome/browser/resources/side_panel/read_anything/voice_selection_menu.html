<style include="cr-icons">
  iron-icon {
    --icon-size: 20px;
    height: var(--icon-size);
    width: var(--icon-size);
    margin: 0px 8px 0px 4px;
  }
  cr-icon-button {
    --cr-icon-button-icon-size: 16px;
    --cr-icon-button-size: 24px;
    margin: 0 4px;
    color: var(--color-sys-on-surface-subtle);
  }
  cr-icon-button.active {
    background-color: var(--cr-active-background-color);
  }
  #voiceSelectionMenu::part(dialog) {
    min-width: 304px;
    width: 100%;
    margin-left: var(--sp-body-padding);
    max-height: 95%;
  }
  .dropdown-voice-selection-button {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: transparent;
    border: none;
    width: 100%;
    padding: 0px 24px 0px 20px;
    color: var(--color-sys-on-surface-subtle);
  }
  .dropdown-voice-selection-button:active {
    background-color: var(--cr-active-background-color);
  }
  .dropdown-voice-selection-button:hover {
    background-color: var(--cr-hover-background-color);
  }
  .display-false {
    display: none;
  }
  .dropdown-voice-selection-button cr-icon-button {
    margin: 0;
  }
  .dropdown-line {
    height: 32px;
    align-items: center;
  }
  .check-mark {
    margin: 0;
  }
  .lang-group-title {
    display: grid;
    font-size: 12px;
    font-weight: 400;
    padding-left: 20px;
    color: var(--color-sys-on-surface-subtle);
  }
  .voice-name {
    max-width: 220px;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 13px;
    font-weight: 500;
  }
  .item-invisible-true {
    visibility: hidden;
  }
</style>

<cr-icon-button
  id="voice-selection"
  on-click="onVoiceSelectionMenuClick_"
  class="toolbar-button"
  tabindex="-1"
  aria-label="$i18n{voiceSelectionLabel}"
  aria-haspopup="menu"
  iron-icon="read-anything:voice-selection">
</cr-icon-button>

<cr-action-menu id="voiceSelectionMenu" on-close="onClose_">
  <template is="dom-repeat" items="[[voiceSelectionOptions_]]">
    <div data-test-id$="group-[[stringToHtmlTestId_(item.language)]]">
      <span class="dropdown-line lang-group-title">
        [[item.language]]
      </span>

      <template is="dom-repeat" items="[[item.voices]]">
        <button data-test-id$="[[item.id]]"
          class="dropdown-line dropdown-voice-selection-button"
          on-click="onVoiceSelectClick_">
          <span class="voice-name">
            <iron-icon id="check-mark"
              class$="item-invisible-[[!item.selected]] check-mark"
              icon="read-anything-20:check-mark"></iron-icon>
            [[item.title]]
          </span>
          <cr-icon-button id="play-icon" on-click="onVoicePreviewClick_"
            class$="display-[[!item.previewPlaying]]"
            iron-icon="read-anything-20:play-circle"></cr-icon-button>
          <!-- TODO(crbug.com/1474951) Pause the preview when pause button is
                  pressed -->
          <cr-icon-button id="pause-icon" on-click="onVoicePreviewClick_"
            class$="display-[[item.previewPlaying]]"
            iron-icon="read-anything-20:pause-circle"></cr-icon-button>
        </button>
      </template>
    </div>
  </template>
</cr-action-menu>
