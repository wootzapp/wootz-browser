<style include="sp-shared-style cr-hidden-style cr-icons">
  sp-heading {
    margin: 0 0 8px;
  }

  .content {
    margin: 16px 16px 8px;
    position: relative;
  }

  #error {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    line-height: 20px;
  }

  #errorTitle {
    color: var(--color-side-panel-card-primary-foreground);
    flex-basis: 100%;
    font-size: 14px;
    font-weight: 500;
  }

  #errorDescription {
    color: var(--color-side-panel-card-secondary-foreground);
    flex-basis: 100%;
    font-size: 13px;
  }

  #errorCTA {
    background-color: var(
        --color-side-panel-wallpaper-search-error-button-background);
    border-color: var(
        --color-side-panel-wallpaper-search-error-button-background);
    color: var(
        --color-side-panel-wallpaper-search-error-button-text);
    margin-inline-start: auto;
    min-width: auto;
  }

  customize-chrome-combobox {
    color: var(--color-side-panel-card-primary-foreground);
    font-size: 12px;
    line-height: 16px;
  }

  #descriptorComboboxA {
    width: 100%;
  }

  #optionalDetails {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 16px;
  }

  #optionalDetailsLabel {
    color: var(--color-side-panel-card-secondary-foreground);
    font-size: 12px;
    font-weight: 500;
    line-height: 16px;
    width: 100%;
  }

  #optionalDetails customize-chrome-combobox {
    width: 132px;
  }

  #descriptorComboboxB,
  #descriptorComboboxC {
    flex-grow: 1;
  }

  #descriptorMenuD {
    --cr-column-width: 1fr;
    --cr-grid-gap: 6.5px;
    --cr-grid-width: 100%;
    margin-top: 8px;
    width: 100%;
  }

  #descriptorMenuD button {
    appearance: none;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-menu-button-background);
    border-radius: 8px;
    border: 0;
    padding: 0;
    width: 100%;
    aspect-ratio: 1 / 1;
    position: relative;
    overflow: hidden;
    cursor: pointer;
  }

  #descriptorMenuD button:hover::before {
    display: block;
    content: '';
    inset: 0;
    position: absolute;
    background-color: var(--cr-hover-background-color);
  }

  #descriptorMenuD button paper-ripple {
    --paper-ripple-opacity: 1;
    color: var(--cr-active-background-color);
  }

  :host-context(.focus-outline-visible) #descriptorMenuD button:focus {
    outline: 2px solid var(--cr-focus-outline-color);
    outline-offset: 2px;
  }

  .color-check-mark {
    --customize-chrome-check-mark-wrapper-end: -2px;
    --customize-chrome-check-mark-wrapper-size: 16px;
    --customize-chrome-check-mark-wrapper-top: -2px;
  }

  .descriptor-d {
    border-radius: 50%;
    display: block;
    height: 28px;
    width: 28px;
  }

  @media (forced-colors: active) {
    #descriptorMenuD button {
      border: solid 1px ButtonBorder;
    }

    .descriptor-d {
      forced-color-adjust: none;
    }
  }

  #colorPickerIcon {
    -webkit-mask-image: url(chrome://resources/cr_components/customize_themes/colorize.svg);
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 100%;
    background-color: var(
        --color-theme-color-picker-custom-color-icon-background,
        var(--cr-fallback-color-on-surface-subtle));
    height: 16px;
    left: calc(50% - 8px);
    pointer-events: none;
    position: absolute;
    top: calc(50% - 8px);
    width: 16px;
  }

  #deleteSelectedHueButton {
    --cr-icon-image: url(icons/delete.svg);
    margin-inline-start: 0;
    margin-inline-end: -24px;
  }

  #btnContainer {
    display: flex;
    justify-content: flex-end;
    margin-top: 16px;
  }

  #imageIcon {
    --cr-icon-color: currentColor;
    --cr-icon-image: url(icons/generated_image.svg);
    --cr-icon-size: 20px;
    height: 20px;
    margin-inline-end: 0;
    margin-inline-start: 0;
    width: 20px;
  }

  .sp-hr {
    margin: 16px 0;
  }

  cr-grid {
    --cr-column-width: 1fr;
    --cr-grid-gap: 10px;
    --cr-grid-width: 100%;
    display: block;
  }

  .tile {
    outline-width: 0;
    place-self: stretch;
  }

  :host-context(.focus-outline-visible) .tile:focus {
    box-shadow: 0 0 0 2px var(--cr-focus-outline-color);
  }

  .result {
    background: none;
    cursor: pointer;
  }

  .result img {
    height: 100%;
    left: 50%;
    top: 0;
    transform: translateX(-50%);
  }

  .image-check-mark {
    --customize-chrome-check-mark-wrapper-end: -4px;
    --customize-chrome-check-mark-wrapper-size: 20px;
    --customize-chrome-check-mark-wrapper-top: -6px;
  }

  .image-check-mark[checked] .image-container {
    padding-top: calc(100% - 4px);
    width: calc(100% - 4px);
  }

  .image-container {
    background-color: var(
        --color-side-panel-wallpaper-search-tile-background);
    border-radius: 12px;
    overflow: hidden;
    padding-top: 100%;
    position: relative;
    width: 100%;
  }

  .image-container img {
    position: absolute;
  }

  @media (forced-colors: active) {
    :host-context(.focus-outline-visible) .tile:focus {
      /* Set outline to hcm (high contrast mode) value. */
      outline: var(--cr-focus-outline-hcm);
    }
  }

  #footer {
    align-items: center;
    display: flex;
    gap: 16px;
    margin-block-start: 16px;
    justify-content: space-between;
    font-size: 11px;
    font-weight: 400;
    line-height: 16px;
    color: var(--color-side-panel-card-secondary-foreground);
  }

  #footer a {
    color: var(--cr-link-color);
  }

  .inspirations-content {
    margin-bottom: 8px;
    margin-inline-end: 16px;
    margin-inline-start: 16px;
  }

  .inspirations-content h3 {
    margin: 0;
  }

  .inspiration-title {
    color: var(--color-side-panel-wallpaper-search-inspiration-descriptors);
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    line-height: 16px;
    width: 100%;
    margin-bottom: 8px;
    margin-top: 8px;
  }

  #inspirationCard .tile {
    margin-bottom: 8px;
  }

  #inspirationToggle {
    cursor: pointer;
  }

  #inspirationToggle:hover {
    background-color: var(--cr-hover-background-color);
  }

  #inspirationToggle .cr-icon {
    margin-inline-start: 0;
  }

  .collapse-carets {
    --cr-icon-image: url(icons/collapse_carets.svg);
  }

  .expand-carets {
    --cr-icon-image: url(icons/expand_carets.svg);
  }
</style>
<div class="sp-card">
  <sp-heading id="heading" on-back-button-click="onBackClick_"
      back-button-aria-label="$i18n{backButton}"
      back-button-title="$i18n{backButton}">
    <h2 slot="heading">$i18n{wallpaperSearchPageHeader}</h2>
  </sp-heading>
  <div class="content" id="error" hidden$="[[!errorState_]]" tabindex="-1">
    <div id="errorTitle">[[errorState_.title]]</div>
    <div id="errorDescription">[[errorState_.description]]</div>
    <cr-button id="errorCTA" on-click="onErrorClick_">
      [[errorState_.callToAction]]
    </cr-button>
  </div>
  <div class="content" id="wallpaperSearch" hidden$="[[errorState_]]"
      tabindex="-1">
    <div role="application">
      <customize-chrome-combobox id="descriptorComboboxA"
          label="$i18n{wallpaperSearchSubjectLabel}"
          default-option-label="$i18n{wallpaperSearchSubjectDefaultOptionLabel}"
          items="[[comboboxItems_.a]]"
          value="{{selectedDescriptorA_}}"
          on-value-changed="onSubjectDescriptorChange_">
      </customize-chrome-combobox>
      <div id="optionalDetails">
        <div id="optionalDetailsLabel">$i18n{optionalDetailsLabel}</div>
        <customize-chrome-combobox id="descriptorComboboxB"
            label="$i18n{wallpaperSearchStyleLabel}"
            default-option-label="$i18n{wallpaperSearchStyleDefaultOptionLabel}"
            items="[[comboboxItems_.b]]"
            value="{{selectedDescriptorB_}}"
            on-value-changed="onStyleDescriptorChange_">
        </customize-chrome-combobox>
        <customize-chrome-combobox id="descriptorComboboxC"
            label="$i18n{wallpaperSearchMoodLabel}"
            default-option-label="$i18n{wallpaperSearchMoodDefaultOptionLabel}"
            items="[[comboboxItems_.c]]"
            value="{{selectedDescriptorC_}}" right-align-dropbox
            on-value-changed="onMoodDescriptorChange_">
        </customize-chrome-combobox>
        <cr-grid columns="6" id="descriptorMenuD">
          <template is="dom-repeat" items="[[descriptorD_]]">
            <button class="default-color" on-click="onDefaultColorClick_"
                aria-current$="[[getColorCheckedStatus_(item, selectedDefaultColor_)]]"
                title$="[[getColorLabel_(item)]]">
              <paper-ripple></paper-ripple>
              <customize-chrome-check-mark-wrapper class="color-check-mark"
                  checked="[[isColorSelected_(item, selectedDefaultColor_)]]"
                  checkmark-border-hidden>
                <span class="descriptor-d" style$="background-color: [[item]];">
                </span>
              </customize-chrome-check-mark-wrapper>
            </button>
          </template>
          <button id="customColorContainer" on-click="onCustomColorClick_"
              aria-current$="[[getCustomColorCheckedStatus_(selectedHue_)]]"
              title="$i18n{colorPickerLabel}">
            <paper-ripple></paper-ripple>
            <customize-chrome-check-mark-wrapper class="color-check-mark"
                checked="[[selectedHue_]]" checkmark-border-hidden>
              <div class="descriptor-d"
                  style$="background: hsl([[selectedHue_]], 100%, 50%);">
                <div id="colorPickerIcon"></div>
              </div>
            </customize-chrome-check-mark-wrapper>
          </button>
        </div>
      </cr-grid>
      <cr-theme-hue-slider-dialog id="hueSlider"
          on-selected-hue-changed="onSelectedHueChanged_">
        <cr-icon-button slot="headerSuffix" id="deleteSelectedHueButton"
            hidden$="[[!shouldShowDeleteSelectedHueButton_(selectedHue_)]]"
            title="$i18n{hueSliderDeleteTitle}"
            aria-label="$i18n{hueSliderDeleteA11yLabel}"
            on-click="onSelectedHueDelete_">
        </cr-icon-button>
      </cr-theme-hue-slider-dialog>
      <div id="btnContainer">
        <cr-button
            id="submitButton"
            on-click="onSearchClick_"
            class="action-button">
          <div id="imageIcon" class="cr-icon" slot="prefix-icon"></div>
          $i18n{wallpaperSearchSubmitBtn}
        </cr-button>
      </div>
    </div>
    <hr class="sp-hr">
    <div id="loading" hidden$="[[!loading_]]">
      <cr-loading-gradient>
        <svg width="280" height="183" xmlns="http://www.w3.org/2000/svg">
          <clipPath>
            <rect x="0" y="0" width="86.67" height="86.67" rx="12"></rect>
            <rect x="96.67" y="0" width="86.67" height="86.67" rx="12"></rect>
            <rect x="193.34" y="0" width="86.67" height="86.67" rx="12"></rect>
            <rect x="0" y="96.67" width="86.67" height="86.67" rx="12"></rect>
            <rect x="96.67" y="96.67" width="86.67" height="86.67" rx="12">
            </rect>
            <rect x="193.34" y="96.67" width="86.67" height="86.67" rx="12">
            </rect>
          </clipPath>
        </svg>
      </cr-loading-gradient>
    </div>
    <cr-grid columns="3" disable-arrow-navigation
        hidden$="[[!shouldShowGrid_(results_, emptyContainers_)]]">
      <template is="dom-repeat" id="resultsRepeat" items="[[results_]]"
          on-dom-change="onResultsRender_">
        <div class="tile result" tabindex="0" role="button"
            on-click="onResultClick_"
            aria-label="[[getResultAriaLabel_(index, resultsDescriptors_)]]"
            aria-current$="[[getBackgroundCheckedStatus_(item.id, theme_)]]">
          <customize-chrome-check-mark-wrapper class="image-check-mark"
              checked="[[isBackgroundSelected_(item.id, theme_)]]">
            <div class="image-container">
              <img src="data:image/png;base64,[[item.image]]">
              </img>
            </div>
          </customize-chrome-check-mark-wrapper>
        </div>
      </template>
      <template is="dom-repeat"
          id="emptyResultRepeat"
          items="[[emptyResultContainers_]]">
        <div class="tile empty">
          <div class="image-container"></div>
        </div>
      </template>
    </cr-grid>
    <div id="footer">
      <div id="disclaimer">
        $i18n{experimentalFeatureDisclaimer}
        <a href="#" aria-label="$i18n{learnMoreAboutFeatureA11yLabel}"
            on-click="onLearnMoreClick_">$i18n{learnMore}</a>
      </div>
      <div hidden$="[[!loading_]]">
        <cr-loading-gradient>
          <svg height="16" width="44" xmlns="http://www.w3.org/2000/svg">
            <clipPath>
              <circle cx="8" cy="8" r="8"></circle>
              <circle cx="36" cy="8" r="8"></circle>
            </clipPath>
          </svg>
        </cr-loading-gradient>
      </div>
      <cr-feedback-buttons id="feedbackButtons"
          hidden$="[[!shouldShowFeedbackButtons_(loading_, results_)]]"
          selected-option="[[selectedFeedbackOption_]]"
          on-selected-option-changed="onFeedbackSelectedOptionChanged_">
      </cr-feedback-buttons>
    </div>
  </div>
</div>
<template is="dom-if" if="[[inspirationCardEnabled_]]">
  <hr class="sp-cards-separator" hidden$="[[!shouldShowInspiration_]]">
  <div class="sp-card" id="inspirationCard"
      hidden$="[[!shouldShowInspiration_]]">
    <sp-heading hide-back-button role="button"
        aria-label="$i18n{showInspirationCardToggle}"
        title="$i18n{showInspirationCardToggle}"
        on-click="onInspirationToggleClick_"
        on-keydown="onButtonKeydown_"
        aria-expanded="[[openInspirations_]]"
        tabindex="0"
        id="inspirationToggle">
      <h2 slot="heading">$i18n{wallpaperSearchInspirationHeader}</h2>
      <div class$="cr-icon [[inspirationToggleIcon_]]" slot="buttons">
      </div>
    </sp-heading>
    <iron-collapse opened="[[openInspirations_]]">
      <div class="inspirations-content">
        <template is="dom-repeat" items="[[inspirationGroups_]]">
          <h3>
            <div class="inspiration-title" role="button" tabindex="0"
                on-click="onInspirationGroupTitleClick_"
                on-keydown="onButtonKeydown_"
                aria-current$="[[getInspirationDescriptorsCheckedStatus_(item.descriptors, selectedDescriptorA_, selectedDescriptorB_, selectedDescriptorC_, selectedDefaultColor_)]]">
              [[getInspirationGroupTitle_(item.descriptors)]]
            </div>
          </h3>
          <cr-grid columns="3" disable-arrow-navigation>
            <template is="dom-repeat" items="[[item.inspirations]]">
              <div class="tile result" on-click="onInspirationImageClick_"
                  tabindex="0" role="button"
                  aria-current$="[[getBackgroundCheckedStatus_(item.id, theme_)]]"
                  aria-label="[[item.description]]">
                <customize-chrome-check-mark-wrapper class="image-check-mark"
                  checked="[[isBackgroundSelected_(item.id, theme_)]]">
                  <div class="image-container">
                    <img is="cr-auto-img"
                        auto-src="[[item.thumbnailUrl.url]]"></img>
                  </div>
                </customize-chrome-check-mark-wrapper>
              </div>
            </template>
          </cr-grid>
        </template>
      </div>
    </iron-collapse>
  </div>
</template>
<hr class="sp-cards-separator" hidden$="[[!shouldShowHistory_]]">
<div class="sp-card" id="historyCard" hidden$="[[!shouldShowHistory_]]">
  <sp-heading hide-back-button>
    <h2 slot="heading">$i18n{wallpaperSearchHistoryHeader}</h2>
  </sp-heading>
  <div class="content">
    <cr-grid columns="3" disable-arrow-navigation>
      <template is="dom-repeat" id="historyRepeat" items="[[history_]]">
        <div class="tile result" tabindex="0" role="button"
            aria-label$="[[getHistoryResultAriaLabel_(index, item)]]"
            on-click="onHistoryImageClick_"
            aria-current$="[[getBackgroundCheckedStatus_(item.id, theme_)]]">
          <customize-chrome-check-mark-wrapper class="image-check-mark"
            checked="[[isBackgroundSelected_(item.id, theme_)]]">
            <div class="image-container">
              <img src="data:image/png;base64,[[item.image]]">
              </img>
            </div>
          </customize-chrome-check-mark-wrapper>
        </div>
      </template>
      <template is="dom-repeat"
          id="emptyHistoryRepeat"
          items="[[emptyHistoryContainers_]]">
        <div class="tile empty">
          <div class="image-container"></div>
        </div>
      </template>
    </cr-grid>
  </div>
</div>
